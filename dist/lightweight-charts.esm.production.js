/*!
 * @license
 * TradingView Lightweight Charts v3.8.0-dev+202211041707
 * Copyright (c) 2020 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */
import{bindToDevicePixelRatio as t}from"fancy-canvas/coordinate-space";var i,n,s,h=function(){function t(t,i){this.x=t,this.y=i}return t.prototype.add=function(i){return new t(this.x+i.x,this.y+i.y)},t.prototype.addScaled=function(i,n){return new t(this.x+n*i.x,this.y+n*i.y)},t.prototype.subtract=function(i){return new t(this.x-i.x,this.y-i.y)},t.prototype.dotProduct=function(t){return this.x*t.x+this.y*t.y},t.prototype.crossProduct=function(t){return this.x*t.y-this.y*t.x},t.prototype.signedAngle=function(t){return Math.atan2(this.crossProduct(t),this.dotProduct(t))},t.prototype.angle=function(t){return Math.acos(this.dotProduct(t)/(this.length()*t.length()))},t.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.scaled=function(i){return new t(this.x*i,this.y*i)},t.prototype.normalized=function(){return this.scaled(1/this.length())},t.prototype.transposed=function(){return new t(-this.y,this.x)},t.prototype.clone=function(){return new t(this.x,this.y)},t}(),r=function(t,i){this.t=new h(Math.min(t.x,i.x),Math.min(t.y,i.y)),this.i=new h(Math.max(t.x,i.x),Math.max(t.y,i.y))},e=function(t,i){this.h=t,this.u=i};function u(t,i){return t.x===i.x&&t.y===i.y}function o(t,i){if(u(t,i))throw new Error("Points should be distinct");return function(t,i,n){return{o:t,l:i,v:n}}(t.y-i.y,i.x-t.x,t.x*i.y-i.x*t.y)}function l(t,i){if(u(t,i))throw new Error("Points of a segment should be distinct");return[t,i]}function a(t,i){var n=i.h;return n.o*t.x+n.l*t.y+n.v>0===i.u}function f(t,i){for(var n=0;n<t.length;n++)if(u(t[n],i))return!1;return t.push(i),!0}function c(t,i,n){var s=v(t,i,n.t,new h(n.i.x,n.t.y)),r=v(t,i,new h(n.i.x,n.t.y),n.i),e=v(t,i,n.i,new h(n.t.x,n.i.y)),u=v(t,i,new h(n.t.x,n.i.y),n.t),o=[];if(null!==s&&s>=0&&o.push(s),null!==r&&r>=0&&o.push(r),null!==e&&e>=0&&o.push(e),null!==u&&u>=0&&o.push(u),0===o.length)return null;o.sort((function(t,i){return t-i}));var l=w(t,n)?o[0]:o[o.length-1];return t.addScaled(i.subtract(t),l)}function v(t,i,n,s){var h=function(t,i,n,s){var h=i.subtract(t),r=s.subtract(n),e=h.x*r.y-h.y*r.x;if(Math.abs(e)<1e-6)return null;var u=t.subtract(n);return(u.y*r.x-u.x*r.y)/e}(t,i,n,s);if(null===h)return null;var r=_(n,s,i.subtract(t).scaled(h).add(t));return Math.abs(r._)<1e-6?h:null}function d(t,i,n){var s=i.subtract(t),h=n.subtract(t).dotProduct(s)/s.dotProduct(s);return{M:h,_:t.addScaled(s,h).subtract(n).length()}}function _(t,i,n){var s=d(t,i,n);if(0<=s.M&&s.M<=1)return s;var h=t.subtract(n).length(),r=i.subtract(n).length();return h<r?{M:0,_:h}:{M:1,_:r}}function w(t,i){return t.x>=i.t.x&&t.x<=i.i.x&&t.y>=i.t.y&&t.y<=i.i.y}function M(t,i){for(var n=t.x,s=t.y,h=!1,r=i.length-1,e=0;e<i.length;e++){var u=i[e],o=i[r];r=e,(u.y<s&&o.y>=s||o.y<s&&u.y>=s)&&u.x+(s-u.y)/(o.y-u.y)*(o.x-u.x)<n&&(h=!h)}return h}function b(t,i){var n=t.o*i.l-i.o*t.l;if(Math.abs(n)<1e-6)return null;var s=(t.l*i.v-i.l*t.v)/n,r=(i.o*t.v-t.o*i.v)/n;return new h(s,r)}function m(t,i){return!(t.length<=0||!u(t[t.length-1],i)||!u(t[0],i))||(t.push(i),!1)}function p(t){return[[t.lineWidth,2*t.lineWidth],[5*t.lineWidth,6*t.lineWidth],[6*t.lineWidth,6*t.lineWidth],[t.lineWidth,4*t.lineWidth],[2*t.lineWidth,t.lineWidth]][t.lineStyle-1]||[]}function g(t,i){t.lineStyle=i,y(t,p(t))}function y(t,i){t.setLineDash?t.setLineDash(i):void 0!==t.mozDash?t.mozDash=i:void 0!==t.webkitLineDash&&(t.webkitLineDash=i)}function k(t,i,n,s){t.beginPath();var h=t.lineWidth%2?.5:0;t.moveTo(n,i+h),t.lineTo(s,i+h),t.stroke()}function x(t,i,n,s){t.beginPath();var h=t.lineWidth%2?.5:0;t.moveTo(i+h,n),t.lineTo(i+h,s),t.stroke()}function C(t,i,n,s,h){isFinite(i)&&isFinite(n)&&isFinite(s)&&isFinite(h)&&(0!==t.lineStyle?function(t,i,n,s,h){t.save(),t.beginPath(),y(t,p(t)),t.moveTo(i,n),t.lineTo(s,h),t.stroke(),t.restore()}(t,i,n,s,h):function(t,i,n,s,h){t.beginPath(),t.moveTo(i,n),t.lineTo(s,h),t.stroke()}(t,i,n,s,h))}function N(t,i,n,s,e,a){if(u(t,i))return null;var v=new h(0,0),d=new h(n,s);if(e){if(a){var _=function(t,i){if(0===t.o){var n=-t.v/t.l;return i.t.y<=n&&n<=i.i.y?l(new h(i.t.x,n),new h(i.i.x,n)):null}if(0===t.l){var s=-t.v/t.o;return i.t.x<=s&&s<=i.i.x?l(new h(s,i.t.y),new h(s,i.i.y)):null}var r=[],e=function(n){var s=-(t.v+t.o*n)/t.l;i.t.y<=s&&s<=i.i.y&&f(r,new h(n,s))},o=function(n){var s=-(t.v+t.l*n)/t.o;i.t.x<=s&&s<=i.i.x&&f(r,new h(s,n))};switch(e(i.t.x),o(i.t.y),e(i.i.x),o(i.i.y),r.length){case 0:return null;case 1:return r[0];case 2:return u(r[0],r[1])?r[0]:l(r[0],r[1])}throw new Error("We should have at most two intersection points")}(o(t,i),new r(v,d));return Array.isArray(_)?_:null}var w;return null===(w=c(i,t,new r(v,d)))||u(i,w)?null:l(i,w)}if(a)return null===(w=c(t,i,new r(v,d)))||u(t,w)?null:l(t,w);_=function(t,i){var n=t[0].x,s=t[0].y,r=t[1].x,e=t[1].y,o=i.t.x,a=i.t.y,f=i.i.x,c=i.i.y;function v(t,i,n,s,h,r){var e=0;return t<n?e|=1:t>h&&(e|=2),i<s?e|=4:i>r&&(e|=8),e}for(var d=!1,_=v(n,s,o,a,f,c),w=v(r,e,o,a,f,c),M=0;;){if(M>1e3)throw new Error("Cohen - Sutherland algorithm: infinity loop");if(M++,!(_|w)){d=!0;break}if(_&w)break;var b=_||w,m=void 0,p=void 0;8&b?(m=n+(r-n)*(c-s)/(e-s),p=c):4&b?(m=n+(r-n)*(a-s)/(e-s),p=a):2&b?(p=s+(e-s)*(f-n)/(r-n),m=f):(p=s+(e-s)*(o-n)/(r-n),m=o),b===_?_=v(n=m,s=p,o,a,f,c):w=v(r=m,e=p,o,a,f,c)}return d?u(new h(n,s),new h(r,e))?new h(n,s):l(new h(n,s),new h(r,e)):null}(l(t,i),new r(v,d));return Array.isArray(_)?_:null}function S(t,i,n,s){i.save(),i.fillStyle="#000000",i.beginPath(),i.arc(t.x*s,t.y*s,n*s,0,2*Math.PI,!1),i.fill(),i.restore()}function T(t,i,n,s,h){if(!(i.subtract(t).length()<1))for(var r=function(t,i,n){var s=.5*n,h=Math.sqrt(2),r=i.subtract(t).normalized(),e=5*n,u=1*s;if(e*h*.2<=u)return[];var o=r.scaled(e),l=i.subtract(o),a=r.transposed(),f=1*e,c=a.scaled(f),v=l.add(c),d=l.subtract(c),_=v.subtract(i).normalized().scaled(u),w=d.subtract(i).normalized().scaled(u),M=i.add(_),b=i.add(w),m=s*(h-1),p=a.scaled(m),g=Math.min(e-1*s/h,s*h*1),y=r.scaled(g),k=i.subtract(p),x=i.add(p),C=i.subtract(y);return[[v,M],[d,b],[k,C.subtract(p)],[x,C.add(p)]]}(t,i,s),e=0;e<r.length;++e){var u=r[e][0],o=r[e][1];C(n,u.x*h,u.y*h,o.x*h,o.y*h)}}function A(t,i){if(!t)throw new Error("Assertion failed"+(i?": "+i:""))}function L(t){if(void 0===t)throw new Error("Value is undefined");return t}function E(t){if(null===t)throw new Error("Value is null");return t}function B(t){return E(L(t))}!function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.WithStepsUpsideDown=2]="WithStepsUpsideDown"}(i||(i={})),function(t){t[t.Normal=0]="Normal",t[t.Arrow=1]="Arrow",t[t.Circle=2]="Circle"}(n||(n={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted",t[t.SmallDashed=5]="SmallDashed"}(s||(s={}));var D={khaki:"#f0e68c",azure:"#f0ffff",aliceblue:"#f0f8ff",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",gray:"#808080",green:"#008000",honeydew:"#f0fff0",floralwhite:"#fffaf0",lightblue:"#add8e6",lightcoral:"#f08080",lemonchiffon:"#fffacd",hotpink:"#ff69b4",lightyellow:"#ffffe0",greenyellow:"#adff2f",lightgoldenrodyellow:"#fafad2",limegreen:"#32cd32",linen:"#faf0e6",lightcyan:"#e0ffff",magenta:"#f0f",maroon:"#800000",olive:"#808000",orange:"#ffa500",oldlace:"#fdf5e6",mediumblue:"#0000cd",transparent:"#0000",lime:"#0f0",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",midnightblue:"#191970",orchid:"#da70d6",mediumorchid:"#ba55d3",mediumturquoise:"#48d1cc",orangered:"#ff4500",royalblue:"#4169e1",powderblue:"#b0e0e6",red:"#f00",coral:"#ff7f50",turquoise:"#40e0d0",white:"#fff",whitesmoke:"#f5f5f5",wheat:"#f5deb3",teal:"#008080",steelblue:"#4682b4",bisque:"#ffe4c4",aquamarine:"#7fffd4",aqua:"#0ff",sienna:"#a0522d",silver:"#c0c0c0",springgreen:"#00ff7f",antiquewhite:"#faebd7",burlywood:"#deb887",brown:"#a52a2a",beige:"#f5f5dc",chocolate:"#d2691e",chartreuse:"#7fff00",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cadetblue:"#5f9ea0",tomato:"#ff6347",fuchsia:"#f0f",blue:"#00f",salmon:"#fa8072",blanchedalmond:"#ffebcd",slateblue:"#6a5acd",slategray:"#708090",thistle:"#d8bfd8",tan:"#d2b48c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",blueviolet:"#8a2be2",black:"#000",darkmagenta:"#8b008b",darkslateblue:"#483d8b",darkkhaki:"#bdb76b",darkorchid:"#9932cc",darkorange:"#ff8c00",darkgreen:"#006400",darkred:"#8b0000",dodgerblue:"#1e90ff",darkslategray:"#2f4f4f",dimgray:"#696969",deepskyblue:"#00bfff",firebrick:"#b22222",forestgreen:"#228b22",indigo:"#4b0082",ivory:"#fffff0",lavenderblush:"#fff0f5",feldspar:"#d19275",indianred:"#cd5c5c",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightskyblue:"#87cefa",lightslategray:"#789",lightslateblue:"#8470ff",snow:"#fffafa",lightseagreen:"#20b2aa",lightsalmon:"#ffa07a",darksalmon:"#e9967a",darkviolet:"#9400d3",mediumpurple:"#9370d8",mediumaquamarine:"#66cdaa",skyblue:"#87ceeb",lavender:"#e6e6fa",lightsteelblue:"#b0c4de",mediumvioletred:"#c71585",mintcream:"#f5fffa",navajowhite:"#ffdead",navy:"#000080",olivedrab:"#6b8e23",palevioletred:"#d87093",violetred:"#d02090",yellow:"#ff0",yellowgreen:"#9acd32",lawngreen:"#7cfc00",pink:"#ffc0cb",paleturquoise:"#afeeee",palegoldenrod:"#eee8aa",darkolivegreen:"#556b2f",darkseagreen:"#8fbc8f",darkturquoise:"#00ced1",peachpuff:"#ffdab9",deeppink:"#ff1493",violet:"#ee82ee",palegreen:"#98fb98",mediumseagreen:"#3cb371",peru:"#cd853f",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",purple:"#800080",seagreen:"#2e8b57",seashell:"#fff5ee",papayawhip:"#ffefd5",mediumslateblue:"#7b68ee",plum:"#dda0dd",mediumspringgreen:"#00fa9a"};function F(t){return t<0?0:t>255?255:Math.round(t)||0}function P(t){return t<=0||t>0?t<0?0:t>1?1:Math.round(1e4*t)/1e4:0}var W=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i,R=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,z=/^rgb\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*\)$/,O=/^rgba\(\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?\d{1,10})\s*,\s*(-?[\d]{0,10}(?:\.\d+)?)\s*\)$/;function V(t){var i;if((t=t.toLowerCase())in D&&(t=D[t]),i=O.exec(t)||z.exec(t))return[F(parseInt(i[1],10)),F(parseInt(i[2],10)),F(parseInt(i[3],10)),P(i.length<5?1:parseFloat(i[4]))];if(i=R.exec(t))return[F(parseInt(i[1],16)),F(parseInt(i[2],16)),F(parseInt(i[3],16)),1];if(i=W.exec(t))return[F(17*parseInt(i[1],16)),F(17*parseInt(i[2],16)),F(17*parseInt(i[3],16)),1];throw new Error("Cannot parse color: ".concat(t))}function I(t,i){if("transparent"===t)return t;var n=V(t),s=n[3];return"rgba(".concat(n[0],", ").concat(n[1],", ").concat(n[2],", ").concat(i*s,")")}function H(t){var i,n=V(t);return{m:"rgb(".concat(n[0],", ").concat(n[1],", ").concat(n[2],")"),p:(i=n,.199*i[0]+.687*i[1]+.114*i[2]>160?"black":"white")}}var j=function(t,i){return j=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])},j(t,i)};function U(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}j(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}var q=function(){return q=Object.assign||function(t){for(var i,n=1,s=arguments.length;n<s;n++)for(var h in i=arguments[n])Object.prototype.hasOwnProperty.call(i,h)&&(t[h]=i[h]);return t},q.apply(this,arguments)};function Y(t,i,n){if(n||2===arguments.length)for(var s,h=0,r=i.length;h<r;h++)!s&&h in i||(s||(s=Array.prototype.slice.call(i,0,h)),s[h]=i[h]);return t.concat(s||Array.prototype.slice.call(i))}var $=function(){function t(){this.g=[]}return t.prototype.k=function(t,i,n){var s={C:t,N:i,S:!0===n};this.g.push(s)},t.prototype.T=function(t){var i=this.g.findIndex((function(i){return t===i.C}));i>-1&&this.g.splice(i,1)},t.prototype.A=function(t){this.g=this.g.filter((function(i){return i.N!==t}))},t.prototype.L=function(t,i){var n=Y([],this.g,!0);this.g=this.g.filter((function(t){return!t.S})),n.forEach((function(n){return n.C(t,i)}))},t.prototype.B=function(){return this.g.length>0},t.prototype.D=function(){this.g=[]},t}();function K(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var s=0,h=i;s<h.length;s++){var r=h[s];for(var e in r)void 0!==r[e]&&("object"!=typeof r[e]||void 0===t[e]?t[e]=r[e]:K(t[e],r[e]))}return t}function Z(t){return"number"==typeof t&&isFinite(t)}function X(t){return"number"==typeof t&&t%1==0}function J(t){return"string"==typeof t}function G(t){return"boolean"==typeof t}function Q(t){var i,n,s,h=t;if(!h||"object"!=typeof h)return h;for(n in i=Array.isArray(h)?[]:{},h)h.hasOwnProperty(n)&&(s=h[n],i[n]=s&&"object"==typeof s?Q(s):s);return i}function tt(t){return null!==t}function it(t){return null===t?void 0:t}var nt="'Trebuchet MS', Roboto, Ubuntu, sans-serif";function st(t,i,n){return n=void 0!==n?"".concat(n," "):"",void 0===i&&(i=nt),"".concat(n).concat(t,"px ").concat(i)}var ht=/[2-9]/g,rt=function(){function t(t){void 0===t&&(t=50),this.F=new Map,this.P=0,this.W=Array.from(new Array(t))}return t.prototype.R=function(){this.F.clear(),this.W.fill(void 0)},t.prototype.O=function(t,i,n){var s=n||ht,h=String(i).replace(s,"0"),r=this.F.get(h);if(void 0===r){if(0===(r=t.measureText(h).width)&&0!==i.length)return 0;var e=this.W[this.P];void 0!==e&&this.F.delete(e),this.W[this.P]=h,this.P=(this.P+1)%this.W.length,this.F.set(h,r)}return r},t}(),et=function(){function t(t){this.V={I:1,H:4,j:new rt,U:NaN,q:"",Y:"",$:"",K:0,Z:0,X:0,J:0,G:0,tt:"left"},this.it=t}return t.prototype.nt=function(){var t=this.V,i=this.st(),n=this.ht();return t.U===i&&t.Y===n||(t.U=i,t.Y=n,t.q=st(i,n),t.J=Math.floor(i/3.5),t.K=t.J,t.Z=Math.max(Math.ceil(i/2-t.H/2),0),t.X=Math.ceil(i/2+t.H/2),t.G=Math.round(i/10),t.j.R()),t.$=this.rt(),this.V},t.prototype.rt=function(){return this.it.nt().layout.textColor},t.prototype.st=function(){return this.it.nt().layout.fontSize},t.prototype.ht=function(){return this.it.nt().layout.fontFamily},t}(),ut=function(){function t(){this.et=[],this.ut=1}return t.prototype.ot=function(t){this.et=t},t.prototype.lt=function(t){this.ut=t},t.prototype.ft=function(t){var i;null===(i=this.et)||void 0===i||i.push(t)},t.prototype.ct=function(t,i){this.et.splice(i,0,t)},t.prototype.vt=function(){this.et.length=0},t.prototype.dt=function(){return 0===this.et.length},t.prototype._t=function(t,i){for(var n=0;n<this.et.length;n++)t.save(),t.globalAlpha=this.ut,this.et[n]._t(t,i),t.restore()},t.prototype.wt=function(t,i){t.save(),t.globalAlpha=this.ut;for(var n=0;n<this.et.length;n++){var s=this.et[n];s.wt&&s.wt(t,i)}t.restore()},t.prototype.Mt=function(t,i){for(var n=null,s=this.et.length-1;s>=0;s--){var h=this.et[s];if(h.Mt&&(n=h.Mt(t,i)||null),n)break}return n},t}(),ot=function(){function t(){}return t.prototype._t=function(t,i){var n=i.bt;t.save(),t.scale(n,n),this.gt(t,i),t.restore()},t.prototype.wt=function(t,i){var n=i.bt;t.save(),t.scale(n,n),this.yt(t,i),t.restore()},t.prototype.yt=function(t,i){},t}(),lt=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.kt=null,i}return U(i,t),i.prototype.xt=function(t){this.kt=t},i.prototype.gt=function(t){if(null!==this.kt&&null!==this.kt.Ct){var i=this.kt.Ct,n=this.kt,s=function(s){t.beginPath();for(var h=i.to-1;h>=i.from;--h){var r=n.Nt[h];t.moveTo(r.St,r.Tt),t.arc(r.St,r.Tt,s,0,2*Math.PI)}t.fill()};t.fillStyle=n.At,s(n.Lt+2),t.fillStyle=n.Et,s(n.Lt)}},i}(ot);function at(){return{Nt:[{St:0,Tt:0,Bt:0,Dt:0}],Et:"",At:"",Lt:0,Ct:null}}var ft={from:0,to:1},ct=function(){function t(t,i){this.Ft=new ut,this.Pt=[],this.Wt=[],this.Rt=new Map,this.it=t,this.zt=i,this.Ft.ot(this.Pt)}return t.prototype.Ot=function(t){var i=this.it.Vt();i.length!==this.Pt.length&&(this.Wt=i.map(at),this.Pt=this.Wt.map((function(t){var i=new lt;return i.xt(t),i})),this.Ft.ot(this.Pt)),this.Rt.clear()},t.prototype.It=function(t,i,n){var s=this.Rt.get(n);if(!s){s=this.Ht(n,t),this.Rt.set(n,s);var h=new ut;return h.ot(s),h}var r=new ut;return r.ot(s),r},t.prototype.Ht=function(t,i){var n=this,s=this.it.Vt().map((function(t,i){return[t,i]})).filter((function(i){return t.jt().includes(i[0])})),h=this.zt.Ut(),r=this.it.qt();return s.map((function(t){var s,e=t[0],u=t[1],o=n.Wt[u],l=e.Yt(h);if(null!==l&&e.$t()){var a=E(e.Kt());o.Et=l.Zt,o.Lt=l.Lt,o.Nt[0].Dt=l.Dt,o.Nt[0].Tt=e.Jt().Xt(l.Dt,a.Gt),o.At=null!==(s=l.Qt)&&void 0!==s?s:n.it.ti(o.Nt[0].Tt/i),o.Nt[0].Bt=h,o.Nt[0].St=r.ii(h),o.Ct=ft}else o.Ct=null;return n.Pt[u]}))},t}(),vt=function(){function t(t){this.ni=t}return t.prototype._t=function(t,i){if(null!==this.ni){var n=i.bt,s=this.ni.si.$t,h=this.ni.hi.$t;if(s||h){t.save();var r=Math.round(this.ni.St*n),e=Math.round(this.ni.Tt*n),u=Math.ceil(this.ni.ri*n),o=Math.ceil(this.ni.ei*n);t.lineCap="butt",s&&r>=0&&(t.lineWidth=Math.floor(this.ni.si.ui*n),t.strokeStyle=this.ni.si.$,t.fillStyle=this.ni.si.$,g(t,this.ni.si.oi),x(t,r,0,o)),h&&e>=0&&(t.lineWidth=Math.floor(this.ni.hi.ui*n),t.strokeStyle=this.ni.hi.$,t.fillStyle=this.ni.hi.$,g(t,this.ni.hi.oi),k(t,e,0,u)),t.restore()}}},t}(),dt=function(){function t(t){this.Rt=new Map,this.li={si:{ui:1,oi:0,$:"",$t:!1},hi:{ui:1,oi:0,$:"",$t:!1},ri:0,ei:0,St:0,Tt:0},this.ai=new vt(this.li),this.fi=t}return t.prototype.Ot=function(){this.Rt.clear()},t.prototype.It=function(t,i,n){return this.Ht(n),this.ai},t.prototype.Ht=function(t){var i=this.fi.$t(),n=E(this.fi.vi()).ci().nt().crosshair,s=this.li;s.hi.$t=i&&this.fi.di(t),s.si.$t=i&&this.fi._i(),s.hi.ui=n.horzLine.width,s.hi.oi=n.horzLine.style,s.hi.$=n.horzLine.color,s.si.ui=n.vertLine.width,s.si.oi=n.vertLine.style,s.si.$=n.vertLine.color,s.ri=t.wi(),s.ei=t.Mi(),s.St=this.fi.bi(),s.Tt=this.fi.mi()},t}();function _t(t,i,n,s,h,r){t.fillRect(i+r,n,s-2*r,r),t.fillRect(i+r,n+h-r,s-2*r,r),t.fillRect(i,n,r,h),t.fillRect(i+s-r,n,r,h)}function wt(t,i,n){t.save(),t.scale(i,i),n(),t.restore()}function Mt(t,i,n,s,h,r){t.save(),t.globalCompositeOperation="copy",t.fillStyle=r,t.fillRect(i,n,s,h),t.restore()}function bt(t,i,n,s,h,r,e){t.save(),t.globalCompositeOperation="copy";var u=t.createLinearGradient(0,0,0,h);u.addColorStop(0,r),u.addColorStop(1,e),t.fillStyle=u,t.fillRect(i,n,s,h),t.restore()}var mt=function(){function t(t,i){this.xt(t,i)}return t.prototype.xt=function(t,i){this.ni=t,this.pi=i},t.prototype._t=function(t,i,n){if(this.ni.$t){t.font=i.q;var s=this.ni.gi||!this.ni.yi?i.H:0,h=i.I,r=i.J,e=i.K,u=i.Z,o=i.X,l=this.ni.ki,a=Math.ceil(i.j.O(t,l)),f=i.G,c=i.U+r+e,v=Math.ceil(.5*c),d=h+a+u+o+s,_=this.pi.xi;this.pi.Ci&&(_=this.pi.Ci);var w,M,b=(_=Math.round(_))-v,m=b+c,p="right"===i.tt,g=n.bt,y=n.Ni,k=p?y:0,x=Math.ceil(y*g),C=k;if(t.fillStyle=this.pi.m,t.lineWidth=1,t.lineCap="butt",l){p?(w=k-s,M=(C=k-d)+o):(C=k+d,w=k+s,M=k+h+s+u);var N=Math.max(1,Math.floor(g)),S=Math.max(1,Math.floor(h*g)),T=p?x:0,A=Math.round(b*g),L=Math.round(C*g),E=Math.round(_*g)-Math.floor(.5*g),B=E+N+(E-A),D=Math.round(w*g);t.save(),t.beginPath(),t.moveTo(T,A),t.lineTo(L,A),t.lineTo(L,B),t.lineTo(T,B),t.fill(),t.fillStyle=this.ni.Qt,t.fillRect(p?x-S:0,A,S,B-A),this.ni.gi&&(t.fillStyle=this.pi.$,t.fillRect(T,E,D-T,N)),t.textAlign="left",t.fillStyle=this.pi.$,wt(t,g,(function(){t.fillText(l,M,m-e-f)})),t.restore()}}},t.prototype.Mi=function(t,i){return this.ni.$t?t.U+t.J+t.K:0},t}(),pt=function(){function t(t){this.Si={xi:0,$:"#FFF",m:"#000"},this.Ti={ki:"",$t:!1,gi:!1,yi:!1,Qt:""},this.Ai={ki:"",$t:!1,gi:!1,yi:!0,Qt:""},this.Li=!0,this.Ei=new(t||mt)(this.Ti,this.Si),this.Bi=new(t||mt)(this.Ai,this.Si)}return t.prototype.ki=function(){return this.Di(),this.Ti.ki},t.prototype.xi=function(){return this.Di(),this.Si.xi},t.prototype.Ot=function(){this.Li=!0},t.prototype.Mi=function(t,i){return void 0===i&&(i=!1),Math.max(this.Ei.Mi(t,i),this.Bi.Mi(t,i))},t.prototype.Fi=function(){return this.Si.Ci||0},t.prototype.Pi=function(t){this.Si.Ci=t},t.prototype.Wi=function(){return this.Di(),this.Ti.$t||this.Ai.$t},t.prototype.It=function(){return this.Di(),this.Ei.xt(this.Ti,this.Si),this.Bi.xt(this.Ai,this.Si),this.Ei},t.prototype.Ri=function(){return this.Di(),this.Ei.xt(this.Ti,this.Si),this.Bi.xt(this.Ai,this.Si),this.Bi},t.prototype.Di=function(){this.Li&&(this.Ti.gi=!1,this.Ai.gi=!1,this.zi(this.Ti,this.Ai,this.Si))},t}(),gt=function(t){function i(i,n,s){var h=t.call(this)||this;return h.fi=i,h.Oi=n,h.Vi=s,h}return U(i,t),i.prototype.zi=function(t,i,n){t.$t=!1;var s=this.fi.nt().horzLine;if(s.labelVisible){var h=this.Oi.Kt();if(this.fi.$t()&&!this.Oi.dt()&&null!==h){var r=H(s.labelBackgroundColor);n.m=r.m,n.$=r.p;var e=this.Vi(this.Oi);n.xi=e.xi,t.ki=this.Oi.Ii(e.Dt,h),t.$t=!0}}},i}(pt),yt=/[1-9]/g,kt=function(){function t(){this.ni=null}return t.prototype.xt=function(t){this.ni=t},t.prototype._t=function(t,i,n){var s=this;if(null!==this.ni&&!1!==this.ni.$t&&0!==this.ni.ki.length){t.font=i.q;var h=n.bt,r=Math.round(i.j.O(t,this.ni.ki,yt));if(!(r<=0)){t.save();var e=i.Hi,u=r+2*e,o=u/2,l=this.ni.wi,a=this.ni.xi,f=Math.floor(a-o)+.5;f<0?(a+=Math.abs(0-f),f=Math.floor(a-o)+.5):f+u>l&&(a-=Math.abs(l-(f+u)),f=Math.floor(a-o)+.5);var c=f+u,v=0+i.I+i.J+i.U+i.K;t.fillStyle=this.ni.m;var d=Math.round(f*h),_=Math.round(0*h),w=Math.round(c*h),M=Math.round(v*h);if(t.fillRect(d,_,w-d,M-_),this.ni.gi){var b=Math.round(this.ni.xi*h),m=_,p=Math.round((m+i.I+i.H)*h);t.fillStyle=this.ni.$;var g=Math.max(1,Math.floor(h)),y=Math.floor(.5*h);t.fillRect(b-y,m,g,p-m)}var k=v-i.G-i.K;t.textAlign="left",t.fillStyle=this.ni.$,wt(t,n.bt,(function(){t.fillText(E(s.ni).ki,f+e,k)})),t.restore()}}},t}(),xt=function(){function t(t){this.ji=new kt,this.Ui=!0,this.qi={m:"",xi:0,$:"",ki:"",wi:0,$t:!1,gi:!1},this.Yi=t,this.ji.xt(this.qi)}return t.prototype.Ot=function(){this.Ui=!0},t.prototype.It=function(){return this.Ui&&this.$i(),this.Ui=!1,this.ji},t.prototype.$i=function(){if(this.qi.$t=!1,!this.Yi.qt().dt()){var t=this.Ki();if(null!==t){var i=this.Zi();if(null!==i){var n=H(t);this.qi.m=n.m,this.qi.$=n.p,this.qi.xi=this.Yi.qt().Xi({Ji:i}),this.qi.ki=this.Yi.qt().Gi({Ji:i}),this.qi.wi=this.Yi.qt().wi(),this.qi.$t=!0,this.Ui=!1}}}},t}(),Ct=function(t){function i(i,n,s){var h=t.call(this,n)||this;return h.Qi=i,h.tn=s,h}return U(i,t),i.prototype.Zi=function(){return this.Yi.qt().nn(this.Qi.Ut())},i.prototype.Ki=function(){return"#4c525e"},i.prototype.$i=function(){this.qi.$t=!1,this.Qi.nt().vertLine.labelVisible&&t.prototype.$i.call(this)},i}(xt),Nt="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";var St,Tt=function(){function t(){this.sn=null,this.hn=function(t){for(var i="",n=0;n<t;++n){var s=Math.floor(Math.random()*Nt.length);i+=Nt[s]}return i}(6),this.rn=0}return t.prototype.en=function(){return this.hn},t.prototype.un=function(t){this.hn=t},t.prototype.on=function(){return this.rn},t.prototype.ln=function(t){this.rn=t},t.prototype.Jt=function(){return this.sn},t.prototype.an=function(t){this.sn=t},t.prototype.fn=function(){return[]},t.prototype.$t=function(){return!0},t}();!function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet"}(St||(St={}));var At=function(t){function i(i,n){var s=t.call(this)||this;s.cn=null,s.vn=NaN,s.dn=0,s._n=!0,s.wn=new Map,s.Mn=!1,s.bn=NaN,s.mn=NaN,s.pn=NaN,s.gn=NaN,s.yn=i,s.kn=n,s.xn=new ct(i,s);var h,r;s.Cn=(h=function(){return s.vn},r=function(){return s.mn},function(t){var i=r(),n=h();if(t===E(s.cn).Nn())return{Dt:n,xi:i};var e=E(t.Kt());return{Dt:t.Sn(i,e),xi:i}});var e=function(t,i){return function(){return{Bt:s.yn.qt().Tn(t()),xi:i()}}}((function(){return s.dn}),(function(){return s.bi()}));return s.An=new Ct(s,i,e),s.Ln=new dt(s),s}return U(i,t),i.prototype.nt=function(){return this.kn},i.prototype.En=function(t,i){this.pn=t,this.gn=i},i.prototype.Bn=function(){this.pn=NaN,this.gn=NaN},i.prototype.Dn=function(){return this.pn},i.prototype.Fn=function(){return this.gn},i.prototype.Pn=function(t,i,n){this.Mn||(this.Mn=!0),this._n=!0,this.Wn(t,i,n)},i.prototype.Ut=function(){return this.dn},i.prototype.bi=function(){return this.bn},i.prototype.mi=function(){return this.mn},i.prototype.$t=function(){return this._n},i.prototype.Rn=function(){this._n=!1,this.zn(),this.vn=NaN,this.bn=NaN,this.mn=NaN,this.cn=null,this.Bn()},i.prototype.On=function(){return null!==this.cn?[this.Ln,this.xn]:[]},i.prototype.di=function(t){return t===this.cn&&this.kn.horzLine.visible},i.prototype._i=function(){return this.kn.vertLine.visible},i.prototype.Vn=function(t,i){this._n&&this.cn===t||this.wn.clear();var n=[];return this.cn===t&&n.push(this.In(this.wn,i,this.Cn)),n},i.prototype.fn=function(){return this._n?[this.An]:[]},i.prototype.vi=function(){return this.cn},i.prototype.Hn=function(){this.Ln.Ot(),this.wn.forEach((function(t){return t.Ot()})),this.An.Ot(),this.xn.Ot()},i.prototype.jn=function(t){return t&&!t.Nn().dt()?t.Nn():null},i.prototype.Wn=function(t,i,n){this.Un(t,i,n)&&this.Hn()},i.prototype.Un=function(t,i,n){var s=this.bn,h=this.mn,r=this.vn,e=this.dn,u=this.cn,o=this.jn(n);this.dn=t,this.bn=isNaN(t)?NaN:this.yn.qt().ii(t),this.cn=n;var l=null!==o?o.Kt():null;return null!==o&&null!==l?(this.vn=i,this.mn=o.Xt(i,l)):(this.vn=NaN,this.mn=NaN),s!==this.bn||h!==this.mn||e!==this.dn||r!==this.vn||u!==this.cn},i.prototype.zn=function(){var t=this.yn.Vt().map((function(t){return t.Yn().qn()})).filter(tt),i=0===t.length?null:Math.max.apply(Math,t);this.dn=null!==i?i:NaN},i.prototype.In=function(t,i,n){var s=t.get(i);return void 0===s&&(s=new gt(this,i,n),t.set(i,s)),s},i}(Tt);function Lt(t){return"left"===t||"right"===t}var Et=function(){function t(t){this.$n=new Map,this.Kn=[],this.Zn=t}return t.prototype.Xn=function(t,i){var n=function(t,i){return void 0===t?i:{Jn:Math.max(t.Jn,i.Jn),Gn:t.Gn||i.Gn}}(this.$n.get(t),i);this.$n.set(t,n)},t.prototype.Qn=function(){return this.Zn},t.prototype.ts=function(t){var i=this.$n.get(t);return void 0===i?{Jn:this.Zn}:{Jn:Math.max(this.Zn,i.Jn),Gn:i.Gn}},t.prototype.ns=function(){this.Kn=[{ss:0}]},t.prototype.hs=function(t){this.Kn=[{ss:1,Gt:t}]},t.prototype.rs=function(){this.Kn=[{ss:4}]},t.prototype.es=function(t){this.Kn.push({ss:2,Gt:t})},t.prototype.us=function(t){this.Kn.push({ss:3,Gt:t})},t.prototype.os=function(){return this.Kn},t.prototype.ls=function(t){for(var i=this,n=0,s=t.Kn;n<s.length;n++){var h=s[n];this.fs(h)}this.Zn=Math.max(this.Zn,t.Zn),t.$n.forEach((function(t,n){i.Xn(n,t)}))},t.prototype.fs=function(t){switch(t.ss){case 0:this.ns();break;case 1:this.hs(t.Gt);break;case 2:this.es(t.Gt);break;case 3:this.us(t.Gt);break;case 4:this.rs()}},t}(),Bt={value:"",padding:0,wordWrapWidth:0,forceTextAlign:!1,forceCalculateMaxLineWidth:!1,alignment:"left",font:{family:nt,color:"#2962ff",size:12,bold:!1,italic:!1},box:{scale:1,angle:0,alignment:{vertical:"bottom",horizontal:"left"}}},Dt={visible:!0,line:{width:1,color:"#2962ff",style:0,extend:{left:!1,right:!1},end:{left:0,right:0}},text:Bt},Ft={visible:!0,line:{width:1,color:"#2962ff",style:0,extend:{left:!0,right:!0},end:{left:0,right:0}},text:Bt},Pt={visible:!0,showMiddleLine:!0,extend:{left:!1,right:!1},background:{color:I("#2962ff",.2)},middleLine:{width:1,color:"#2962ff",style:2},channelLine:{width:1,color:"#2962ff",style:0}},Wt={visible:!0,rectangle:{extend:{left:!1,right:!1},background:{color:I("#9c27b0",.2)},border:{width:1,style:0,color:"#9c27b0"}},text:Bt},Rt={visible:!0,triangle:{background:{color:I("#f57c00",.2)},border:{width:1,style:0,color:"#f57c00"}}},zt={visible:!0,text:Bt,line:{width:1,color:"#2962ff",style:0}},Ot={visible:!0,line:{color:I("#f23645",.15)}},Vt={visible:!0,text:K(Q(Bt),{value:"Text"})},It={Ray:K(Q(Dt),{line:{extend:{right:!0}}}),Arrow:K(Q(Dt),{line:{end:{right:1}}}),ExtendedLine:K(Q(Dt),{line:{extend:{right:!0,left:!0}}}),HorizontalRay:K(Q(Ft),{line:{extend:{left:!1}}}),FibRetracement:{visible:!0,extend:{left:!1,right:!1},line:{width:1,style:0},levels:[{color:"#787b86",coeff:0},{color:"#f23645",coeff:.236},{color:"#81c784",coeff:.382},{color:"#4caf50",coeff:.5},{color:"#089981",coeff:.618},{color:"#64b5f6",coeff:.786},{color:"#787b86",coeff:1},{color:"#2962ff",coeff:1.618},{color:"#f23645",coeff:2.618},{color:"#9c27b0",coeff:3.618},{color:"#e91e63",coeff:4.236}]},ParallelChannel:Pt,HorizontalLine:Ft,VerticalLine:zt,Highlighter:Ot,CrossLine:{visible:!0,line:{width:1,color:"#2962ff",style:0}},TrendLine:Dt,Rectangle:Wt,Triangle:Rt,Brush:{visible:!0,line:{width:1,color:"#00bcd4",join:"round",style:0,end:{left:0,right:0}}},Path:{visible:!0,line:{width:1,color:"#2962ff",style:0,end:{left:0,right:1}}},Text:Vt},Ht=function(){function t(){this.ni=null}return t.prototype.xt=function(t){this.ni=t},t.prototype.wt=function(t,i,n){if(null!==this.ni&&!1!==this.ni.$t){var s=this.ni,h=s.xi,r=s.Mi,e=s.$,u=t.canvas.clientWidth;wt(t,n.bt,(function(){t.fillStyle=e,t.fillRect(0,h,u,r)}))}},t}(),jt=function(){function t(t){this.ji=new Ht,this.Ui=!0,this.qi={$:"rgba(41, 98, 255, 0.25)",$t:!1,xi:0,Mi:0},this.cs=t,this.Yi=t.ci(),this.ji.xt(this.qi)}return t.prototype.Ot=function(){this.Ui=!0},t.prototype.It=function(){return this.Ui&&this.$i(),this.Ui=!1,this.ji},t.prototype.$i=function(){this.qi.$t=!1;var t=this.cs.Jt();if(t&&!t.dt()&&this.cs.vs()){var i=this.cs.ds().map((function(i){return t.Xt(i.price,i.price)})),n=Math.max.apply(Math,i),s=Math.min.apply(Math,i);this.qi.xi=s,this.qi.Mi=n-s,this.qi.$t=!0,this.Ui=!1}},t}(),Ut=function(t){function i(i,n){var s=t.call(this)||this;return s._s=!1,s._s=!1,s.cs=i,s.ws=n,s}return U(i,t),i.prototype.Ms=function(t){this._s=t},i.prototype.zi=function(t,i,n){var s;t.$t=!1;var h=this.cs.ci();if(h.qt()&&!h.qt().dt()){var r=this.Ki();if(null!==r){var e=this.cs.Jt();if(null!==e&&!e.dt()&&null!==h.qt().bs()){var u=this.cs.ds();if(!(u.length<=this.ws)){var o=u[this.ws];if(isFinite(o.price)){var l=this.cs.ps(),a=null!==l?l.Kt():null;null!==a&&(n.m=r,n.$=H(n.m).p,n.xi=e.Xt(o.price,a.Gt),t.ki=(null===(s=this.cs.Jt())||void 0===s?void 0:s.Ii(o.price,a.Gt))||"",t.$t=!0)}}}}}},i.prototype.Ki=function(){return this.cs.gs()},i}(pt),qt=function(){function t(){this.ni=null}return t.prototype.xt=function(t){this.ni=t},t.prototype.wt=function(t,i,n){if(null!==this.ni&&!1!==this.ni.$t){var s=this.ni,h=s.xi,r=s.wi,e=s.$,u=t.canvas.clientHeight;wt(t,n.bt,(function(){t.fillStyle=e,t.fillRect(h,0,r,u)}))}},t}(),Yt=function(){function t(t){this.ji=new qt,this.Ui=!0,this.qi={$:"rgba(41, 98, 255, 0.25)",$t:!1,xi:0,wi:0},this.cs=t,this.Yi=t.ci(),this.ji.xt(this.qi)}return t.prototype.Ot=function(){this.Ui=!0},t.prototype.It=function(){return this.Ui&&this.$i(),this.Ui=!1,this.ji},t.prototype.$i=function(){var t=this;if(this.qi.$t=!1,!this.Yi.qt().dt()&&this.cs.vs()){var i=this.cs.ys().map((function(i){return t.Yi.qt().Xi({Ji:i.timestamp})})),n=Math.max.apply(Math,i),s=Math.min.apply(Math,i);this.qi.xi=s,this.qi.wi=n-s,this.qi.$t=!0,this.Ui=!1}},t}(),$t=function(t){function i(i,n){var s=t.call(this,i.ci())||this;return s.cs=i,s.ws=n,s}return U(i,t),i.prototype.Ki=function(){return this.cs.ks()},i.prototype.Zi=function(){var t=this.cs.ys();return t.length<=this.ws?null:t[this.ws].timestamp},i}(xt),Kt=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this)||this;h.xs=new $,h.Cs=new $,h.Ns=[],h.Ss=[],h.Ts=[],h.As=!1,h.Ls=!1,h.Es=!1,h.Bs=!1,h.Ds=null,h.Fs=null,h.Ps=[],h.Yi=i,h.Ps=s,h.Ws=n;for(var r=0;r<h.Rs();r++)h.Ns.push(new Ut(h,r)),h.Ss.push(new $t(h,r));return h.Rs()>1&&(h.Ns.push(new jt(h)),h.Ss.push(new Yt(h))),h.Ds=i.Vt()[0],h.Es=h.Ps.length>=(-1===h.Rs()?2:h.Rs()),h}return U(i,t),i.prototype.zs=function(){return this.Es},i.prototype.Os=function(){this.Ps.length>=Math.max(1,this.Rs())&&(this.Es=!0,this.Ls=!0,this.Fs=null,this.ci().Vs(this))},i.prototype.Is=function(){var t=Y(Y([],this.Ps,!0),this.Fs?[this.Fs]:[],!0);return-1===this.Rs()?t:t.slice(0,this.Rs())},i.prototype.Hs=function(t){this.Ps.push(t)},i.prototype.js=function(t){return this.Is()[t]||null},i.prototype.Us=function(t,i){this.Ps[t].price=i.price,this.Ps[t].timestamp=i.timestamp},i.prototype.qs=function(t){this.Ps=t},i.prototype.Ys=function(t){this.Fs=t},i.prototype.$s=function(t){var i,n,s=(null===(n=null===(i=this.ps())||void 0===i?void 0:i.Kt())||void 0===n?void 0:n.Gt)||0,r=this.Jt(),e=this.qt();if(!r||r.dt()||e.dt())return null;var u=e.Xi({Ji:t.timestamp}),o=r.Xt(t.price,s);return new h(u,o)},i.prototype.Ks=function(t){var i,n,s=(null===(n=null===(i=this.ps())||void 0===i?void 0:i.Kt())||void 0===n?void 0:n.Gt)||0,h=this.Jt(),r=this.qt();return h?{price:h.Sn(t.y,s),timestamp:r.Zs(t.x).Ji}:null},i.prototype.Xs=function(){return{en:this.en(),ss:this.Js,nt:this.Ws}},i.prototype.Jt=function(){return this.Yi.Qs()[0].Gs()},i.prototype.qt=function(){return this.Yi.qt()},i.prototype.ps=function(){return this.Ds},i.prototype.nt=function(){return this.Ws},i.prototype.$t=function(){return this.Ws.visible},i.prototype.th=function(t){K(this.Ws,t),this.ci().Vs(this),this.Ts.forEach((function(t){t.Ot("options")}))},i.prototype.On=function(t){return this.Ts},i.prototype.Hn=function(){if(this.nt().visible){this.ih();for(var t=0;t<this.Ns.length;t++)this.Ns[t].Ot();for(t=0;t<this.Ss.length;t++)this.Ss[t].Ot()}},i.prototype.nh=function(){return this.As},i.prototype.sh=function(t){var i=t!==this.As;return this.As=t,i},i.prototype.vs=function(){return this.Ls},i.prototype.hh=function(t){var i=t!==this.Ls;return this.Ls=t,i&&this.Hn(),i},i.prototype.rh=function(){return this.Bs},i.prototype.eh=function(t){var i=t!==this.Bs;return this.Bs=t,i},i.prototype.ci=function(){return this.Yi},i.prototype.uh=function(){return this.Js},i.prototype.D=function(){},i.prototype.ys=function(){return this.Is()},i.prototype.ds=function(){return this.Is()},i.prototype.ks=function(){return this.vs()?"#2962FF":null},i.prototype.gs=function(){return this.vs()?"#2962FF":null},i.prototype.fn=function(){return this.Ss},i.prototype.Vn=function(){return this.Ns},i.prototype.oh=function(){return!1},i.prototype.lh=function(){return!0},i.prototype.ah=function(t){this.Ts=t},i.prototype.ih=function(){this.Ts.forEach((function(t){return t.Ot()}))},i}(Tt);function Zt(t){var i;if("object"!=typeof t||null===t||"number"==typeof t.nodeType)i=t;else if(t instanceof Date)i=new Date(t.valueOf());else if(Array.isArray(t)){i=[];for(var n=0;n<t.length;n++)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=Zt(t[n]))}else i={},Object.keys(t).forEach((function(n){i[n]=Zt(t[n])}));return i}var Xt,Jt=function(){function t(t,i){this.fh=t,this.ni=i||null}return t.prototype.ss=function(){return this.fh},t.prototype.dh=function(){return this.ni},t}();!function(t){t[t._h=1]="_internal_Regular",t[t.wh=2]="_internal_MovePoint",t[t.Mh=3]="_internal_MovePointBackground",t[t.bh=4]="_internal_ChangePoint",t[t.mh=5]="_internal_Custom"}(Xt||(Xt={}));var Gt=3,Qt=2,ti=function(){function t(){this.kt=null,this.ph=new Jt(Xt.wh)}return t.prototype.xt=function(t){this.kt=t},t.prototype.gh=function(t){this.ph=t},t.prototype._t=function(t,i){if(this.kt&&!(this.kt.Is.length<2)){var n=i.bt,s=this.kt.yh.width||1,h=this.kt.yh.color||"white",r=this.kt.yh.style||0;t.lineCap="butt",t.strokeStyle=h,t.lineWidth=Math.max(1,Math.floor(s*n)),g(t,r);var e=this.kt.Is[0],u=this.kt.Is[1];this.kh(t,[e,u],s,n);var o=this.xh(e,u,i);null!==o&&s>0&&(o[0].x===o[1].x?x(t,Math.round(o[0].x*n),o[0].y*n,o[1].y*n):o[0].y===o[1].y?k(t,Math.round(o[0].y*n),o[0].x*n,o[1].x*n):C(t,o[0].x*n,o[0].y*n,o[1].x*n,o[1].y*n))}},t.prototype.Mt=function(t,i){if(null===this.kt||this.kt.Is.length<2)return null;var n=Gt,s=this.xh(this.kt.Is[0],this.kt.Is[1],i);return null!==s&&_(s[0],s[1],t)._<=n?this.ph:null},t.prototype.xh=function(t,i,n){var s,h,r=E(this.kt);return N(t,i,n.Ni,n.Ch,!!(null===(s=r.yh.extend)||void 0===s?void 0:s.left),!!(null===(h=r.yh.extend)||void 0===h?void 0:h.right))},t.prototype.kh=function(t,i,n,s){var h,r,e=E(this.kt);switch(null===(h=e.yh.end)||void 0===h?void 0:h.left){case 1:T(i[1],i[0],t,n,s);break;case 2:S(i[0],t,n,s)}switch(null===(r=e.yh.end)||void 0===r?void 0:r.right){case 1:T(i[0],i[1],t,n,s);break;case 2:S(i[1],t,n,s)}},t}();function ii(t,i,n,s,h,r){var e,u,o,l;if(Array.isArray(r))if(2===r.length){var a=Math.max(0,r[0]),f=Math.max(0,r[1]);e=a,u=a,o=f,l=f}else{if(4!==r.length)throw new Error("Wrong border radius - it should be like css border radius");e=Math.max(0,r[0]),u=Math.max(0,r[1]),o=Math.max(0,r[2]),l=Math.max(0,r[3])}else e=a=Math.max(0,r),u=a,o=a,l=a;t.beginPath(),t.moveTo(i+e,n),t.lineTo(i+s-u,n),0!==u&&t.arcTo(i+s,n,i+s,n+u,u),t.lineTo(i+s,n+h-o),0!==o&&t.arcTo(i+s,n+h,i+s-o,n+h,o),t.lineTo(i+l,n+h),0!==l&&t.arcTo(i,n+h,i,n+h-l,l),t.lineTo(i,n+e),0!==e&&t.arcTo(i,n,i+e,n,e)}var ni,si=function(){function t(t,i){this.Nh=null,this.Sh=null,this.Th=null,this.Ah=null,this.Lh=null,this.kt=null,this.ph=i||new Jt(Xt.wh),void 0!==t&&this.xt(t)}return t.prototype.xt=function(t){!function(t,i){var n,s,h,r,e,u,o,l,a,f,c,v,d,_,w,M,b,m,p,g,y,k,x,C,N,S,T,A,L,E,B,D,F,P,W,R,z,O,V,I,H,j,U,q,Y,$,K,Z,X,J,G,Q,tt,it,nt,st,ht,rt,et,ut,ot,lt,at,ft,ct,vt,dt,_t,wt,Mt,bt,mt,pt,gt,yt,kt,xt,Ct,Nt,St,Tt,At,Lt,Et,Bt,Dt,Ft,Pt,Wt,Rt,zt,Ot,Vt,It,Ht,jt,Ut,qt,Yt,$t,Kt,Zt,Xt,Jt,Gt,Qt,ti,ii,ni,si,hi,ri,ei,ui,oi,li,ai,fi,ci,vi,di,_i;if(null===t||null===i)return null===t==(null===i);if(void 0===t.Is!=(void 0===i.Is))return!1;if(void 0!==t.Is&&void 0!==i.Is){if(t.Is.length!==i.Is.length)return!1;for(var wi=0;wi<t.Is.length;++wi)if(t.Is[wi].x!==i.Is[wi].x||t.Is[wi].y!==i.Is[wi].y)return!1}return(null===(n=t.ki)||void 0===n?void 0:n.forceCalculateMaxLineWidth)===(null===(s=i.ki)||void 0===s?void 0:s.forceCalculateMaxLineWidth)&&(null===(h=t.ki)||void 0===h?void 0:h.forceTextAlign)===(null===(r=i.ki)||void 0===r?void 0:r.forceTextAlign)&&(null===(e=t.ki)||void 0===e?void 0:e.wordWrapWidth)===(null===(u=i.ki)||void 0===u?void 0:u.wordWrapWidth)&&(null===(o=t.ki)||void 0===o?void 0:o.padding)===(null===(l=i.ki)||void 0===l?void 0:l.padding)&&(null===(a=t.ki)||void 0===a?void 0:a.value)===(null===(f=i.ki)||void 0===f?void 0:f.value)&&(null===(c=t.ki)||void 0===c?void 0:c.alignment)===(null===(v=i.ki)||void 0===v?void 0:v.alignment)&&(null===(_=null===(d=t.ki)||void 0===d?void 0:d.font)||void 0===_?void 0:_.bold)===(null===(M=null===(w=i.ki)||void 0===w?void 0:w.font)||void 0===M?void 0:M.bold)&&(null===(m=null===(b=t.ki)||void 0===b?void 0:b.font)||void 0===m?void 0:m.size)===(null===(g=null===(p=i.ki)||void 0===p?void 0:p.font)||void 0===g?void 0:g.size)&&(null===(k=null===(y=t.ki)||void 0===y?void 0:y.font)||void 0===k?void 0:k.family)===(null===(C=null===(x=i.ki)||void 0===x?void 0:x.font)||void 0===C?void 0:C.family)&&(null===(S=null===(N=t.ki)||void 0===N?void 0:N.font)||void 0===S?void 0:S.italic)===(null===(A=null===(T=i.ki)||void 0===T?void 0:T.font)||void 0===A?void 0:A.italic)&&(null===(E=null===(L=t.ki)||void 0===L?void 0:L.box)||void 0===E?void 0:E.angle)===(null===(D=null===(B=i.ki)||void 0===B?void 0:B.box)||void 0===D?void 0:D.angle)&&(null===(P=null===(F=t.ki)||void 0===F?void 0:F.box)||void 0===P?void 0:P.scale)===(null===(R=null===(W=i.ki)||void 0===W?void 0:W.box)||void 0===R?void 0:R.scale)&&(null===(V=null===(O=null===(z=t.ki)||void 0===z?void 0:z.box)||void 0===O?void 0:O.offset)||void 0===V?void 0:V.x)===(null===(j=null===(H=null===(I=i.ki)||void 0===I?void 0:I.box)||void 0===H?void 0:H.offset)||void 0===j?void 0:j.x)&&(null===(Y=null===(q=null===(U=t.ki)||void 0===U?void 0:U.box)||void 0===q?void 0:q.offset)||void 0===Y?void 0:Y.y)===(null===(Z=null===(K=null===($=i.ki)||void 0===$?void 0:$.box)||void 0===K?void 0:K.offset)||void 0===Z?void 0:Z.y)&&(null===(J=null===(X=t.ki)||void 0===X?void 0:X.box)||void 0===J?void 0:J.maxHeight)===(null===(Q=null===(G=i.ki)||void 0===G?void 0:G.box)||void 0===Q?void 0:Q.maxHeight)&&(null===(nt=null===(it=null===(tt=t.ki)||void 0===tt?void 0:tt.box)||void 0===it?void 0:it.padding)||void 0===nt?void 0:nt.x)===(null===(rt=null===(ht=null===(st=i.ki)||void 0===st?void 0:st.box)||void 0===ht?void 0:ht.padding)||void 0===rt?void 0:rt.x)&&(null===(ot=null===(ut=null===(et=t.ki)||void 0===et?void 0:et.box)||void 0===ut?void 0:ut.padding)||void 0===ot?void 0:ot.y)===(null===(ft=null===(at=null===(lt=i.ki)||void 0===lt?void 0:lt.box)||void 0===at?void 0:at.padding)||void 0===ft?void 0:ft.y)&&(null===(dt=null===(vt=null===(ct=t.ki)||void 0===ct?void 0:ct.box)||void 0===vt?void 0:vt.alignment)||void 0===dt?void 0:dt.vertical)===(null===(Mt=null===(wt=null===(_t=i.ki)||void 0===_t?void 0:_t.box)||void 0===wt?void 0:wt.alignment)||void 0===Mt?void 0:Mt.vertical)&&(null===(pt=null===(mt=null===(bt=t.ki)||void 0===bt?void 0:bt.box)||void 0===mt?void 0:mt.alignment)||void 0===pt?void 0:pt.horizontal)===(null===(kt=null===(yt=null===(gt=i.ki)||void 0===gt?void 0:gt.box)||void 0===yt?void 0:yt.alignment)||void 0===kt?void 0:kt.horizontal)&&(null===(St=null===(Nt=null===(Ct=null===(xt=t.ki)||void 0===xt?void 0:xt.box)||void 0===Ct?void 0:Ct.background)||void 0===Nt?void 0:Nt.inflation)||void 0===St?void 0:St.x)===(null===(Et=null===(Lt=null===(At=null===(Tt=i.ki)||void 0===Tt?void 0:Tt.box)||void 0===At?void 0:At.background)||void 0===Lt?void 0:Lt.inflation)||void 0===Et?void 0:Et.x)&&(null===(Pt=null===(Ft=null===(Dt=null===(Bt=t.ki)||void 0===Bt?void 0:Bt.box)||void 0===Dt?void 0:Dt.background)||void 0===Ft?void 0:Ft.inflation)||void 0===Pt?void 0:Pt.y)===(null===(Ot=null===(zt=null===(Rt=null===(Wt=i.ki)||void 0===Wt?void 0:Wt.box)||void 0===Rt?void 0:Rt.background)||void 0===zt?void 0:zt.inflation)||void 0===Ot?void 0:Ot.y)&&(null===(Ht=null===(It=null===(Vt=t.ki)||void 0===Vt?void 0:Vt.box)||void 0===It?void 0:It.border)||void 0===Ht?void 0:Ht.highlight)===(null===(qt=null===(Ut=null===(jt=i.ki)||void 0===jt?void 0:jt.box)||void 0===Ut?void 0:Ut.border)||void 0===qt?void 0:qt.highlight)&&(null===(Kt=null===($t=null===(Yt=t.ki)||void 0===Yt?void 0:Yt.box)||void 0===$t?void 0:$t.border)||void 0===Kt?void 0:Kt.radius)===(null===(Jt=null===(Xt=null===(Zt=i.ki)||void 0===Zt?void 0:Zt.box)||void 0===Xt?void 0:Xt.border)||void 0===Jt?void 0:Jt.radius)&&(null===(ti=null===(Qt=null===(Gt=t.ki)||void 0===Gt?void 0:Gt.box)||void 0===Qt?void 0:Qt.shadow)||void 0===ti?void 0:ti.offset)===(null===(si=null===(ni=null===(ii=i.ki)||void 0===ii?void 0:ii.box)||void 0===ni?void 0:ni.shadow)||void 0===si?void 0:si.offset)&&(null===(ei=null===(ri=null===(hi=t.ki)||void 0===hi?void 0:hi.box)||void 0===ri?void 0:ri.shadow)||void 0===ei?void 0:ei.color)===(null===(li=null===(oi=null===(ui=i.ki)||void 0===ui?void 0:ui.box)||void 0===oi?void 0:oi.shadow)||void 0===li?void 0:li.color)&&(null===(ci=null===(fi=null===(ai=t.ki)||void 0===ai?void 0:ai.box)||void 0===fi?void 0:fi.shadow)||void 0===ci?void 0:ci.blur)===(null===(_i=null===(di=null===(vi=i.ki)||void 0===vi?void 0:vi.box)||void 0===di?void 0:di.shadow)||void 0===_i?void 0:_i.blur)}(this.kt,t)?(this.kt=t,this.Sh=null,this.Nh=null,this.Th=null,this.Ah=null,this.Lh=null):this.kt=t},t.prototype.Mt=function(t){return null===this.kt||void 0===this.kt.Is||0===this.kt.Is.length?null:M(t,this.Eh())?this.ph:null},t.prototype.Bh=function(t){return null!==this.kt&&void 0!==this.kt.Is&&0!==this.kt.Is.length&&w(this.kt.Is[0],t)},t.prototype.Dh=function(){return null===this.kt?{wi:0,Mi:0}:this.Fh()},t.prototype.Ph=function(){if(null===this.kt)return{St:0,Tt:0,wi:0,Mi:0};var t=this.Wh();return{St:t.Rh,Tt:t.zh,wi:t.Oh,Mi:t.Vh}},t.prototype.Ih=function(t,i){if(null===this.kt||void 0===this.kt.Is||0===this.kt.Is.length)return!0;var n=this.Wh();if(n.Rh+n.Oh<0||n.Rh>t){var s=new r(new h(0,0),new h(t,i));return this.Eh().every((function(t){return!w(t,s)}))}return!1},t.prototype.qs=function(t,i){E(this.kt).Is=t,this.ph=i||new Jt(Xt.wh)},t.prototype.Hh=function(){return null===this.kt?"":this.jh().Hh},t.prototype.Uh=function(t,i,n){return function(t,i,n){ni||hi();n="[object String]"===Object.prototype.toString.call(n)?parseInt(n):n,t+="";var s=!Number.isInteger(n)||!isFinite(n)||n<=0?t.split(/\r\n|\r|\n|$/):t.split(/[^\S\r\n]*(?:\r\n|\r|\n|$)/);s[s.length-1]||s.pop();if(!Number.isInteger(n)||!isFinite(n)||n<=0)return s;ni.font=i;for(var h=[],r=0;r<s.length;r++){var e=s[r],u=ni.measureText(e).width;if(u<=n)h.push(e);else for(var o=e.split(/([-)\]},.!?:;])|(\s+)/);o.length;){var l=Math.floor(n/u*(o.length+2)/3);if(l<=0||ni.measureText(o.slice(0,3*l-1).join("")).width<=n)for(;ni.measureText(o.slice(0,3*(l+1)-1).join("")).width<=n;)l++;else for(;l>0&&ni.measureText(o.slice(0,3*--l-1).join("")).width>n;);if(l>0)h.push(o.slice(0,3*l-1).join("")),o.splice(0,3*l);else{var a=o[0]+(o[1]||""),f=Math.floor(n/ni.measureText(a).width*a.length);if(ni.measureText(a.substring(0,f)).width<=n)for(;ni.measureText(a.substring(0,f+1)).width<=n;)f++;else for(;f>1&&ni.measureText(a.substring(0,--f)).width>n;);f=Math.max(1,f),h.push(a.substring(0,f)),o[0]=a.substring(f),o[1]=""}if(ni.measureText(o.join("")).width<=n){h.push(o.join(""));break}}}return h}(t,n||this.Hh(),i)},t.prototype._t=function(t,i){var n,s,h,r,e,u,o,l,a,f,c,v,d,_,w,M,b,m,p,y,k,x,C,N,S,T,A,L,E,B,D;if(null!==this.kt&&void 0!==this.kt.Is&&0!==this.kt.Is.length&&!this.Ih(i.Ni,i.Ch)){var F=this.kt.ki,P=i.bt,W=this.Wh(),R=this.qh().scaled(P);t.save(),t.translate(R.x,R.y),t.rotate((null===(n=F.box)||void 0===n?void 0:n.angle)||0),t.translate(-R.x,-R.y);var z=this.jh().U;t.textAlign=W.Yh,t.textBaseline="middle",t.font=this.Hh();var O=Math.round(W.zh*P),V=Math.round(W.Rh*P),I=V+Math.round(W.Oh*P),H=O+Math.round(W.Vh*P);if((null===(h=null===(s=F.box)||void 0===s?void 0:s.background)||void 0===h?void 0:h.color)||(null===(e=null===(r=F.box)||void 0===r?void 0:r.border)||void 0===e?void 0:e.color)||(null===(o=null===(u=F.box)||void 0===u?void 0:u.border)||void 0===o?void 0:o.highlight)&&F.wordWrapWidth){var j=Math.round(((null===(a=null===(l=F.box)||void 0===l?void 0:l.border)||void 0===a?void 0:a.width)||Math.max(z/12,1))*P),U=j/2,q=!1;if(null===(f=F.box)||void 0===f?void 0:f.shadow){var Y=null===(c=F.box)||void 0===c?void 0:c.shadow,$=Y.color,K=Y.blur,Z=Y.offset;t.save(),t.shadowColor=$,t.shadowBlur=K,t.shadowOffsetX=(null==Z?void 0:Z.x)||0,t.shadowOffsetY=(null==Z?void 0:Z.y)||0,q=!0}if(null===(v=F.box.border)||void 0===v?void 0:v.radius){if(null===(d=F.box.background)||void 0===d?void 0:d.color){var X=(null===(w=null===(_=F.box)||void 0===_?void 0:_.border)||void 0===w?void 0:w.radius)*P;ii(t,V,O,I-V,H-O,X),t.fillStyle=null===(b=null===(M=F.box)||void 0===M?void 0:M.background)||void 0===b?void 0:b.color,t.fill(),q&&(t.restore(),q=!1)}if(null===(m=F.box.border)||void 0===m?void 0:m.color){X=(null===(y=null===(p=F.box)||void 0===p?void 0:p.border)||void 0===y?void 0:y.radius)*P+j;ii(t,V-U,O-U,I-V+j,H-O+j,X),t.strokeStyle=F.box.border.color,t.lineWidth=j,q&&(t.restore(),q=!1)}}else if(null===(k=F.box.background)||void 0===k?void 0:k.color)t.fillStyle=F.box.background.color,t.fillRect(V,O,I-V,H-O),q&&(t.restore(),q=!1);else if((null===(C=null===(x=F.box)||void 0===x?void 0:x.border)||void 0===C?void 0:C.color)||(null===(S=null===(N=F.box)||void 0===N?void 0:N.border)||void 0===S?void 0:S.highlight)){var J=void 0;(null===(A=null===(T=F.box)||void 0===T?void 0:T.border)||void 0===A?void 0:A.color)?(t.strokeStyle=null===(E=null===(L=F.box)||void 0===L?void 0:L.border)||void 0===E?void 0:E.color,J=j):(t.strokeStyle=null===(B=F.font)||void 0===B?void 0:B.color,g(t,2),J=Math.max(1,Math.floor(P))),t.lineWidth=J,t.beginPath(),t.moveTo(V-J/2,O-J/2),t.lineTo(V-J/2,H+J/2),t.lineTo(I+J/2,H+J/2),t.lineTo(I+J/2,O-J/2),t.lineTo(V-J/2,O-J/2),t.stroke(),q&&t.restore()}}t.fillStyle=null===(D=F.font)||void 0===D?void 0:D.color;for(var G=this.Kh().$h,Q=.05*z,tt=ci(this.kt),it=(V+Math.round(W.Zh*P))/P,nt=(O+Math.round((W.Xh+Q)*P))/P,st=function(i){wt(t,P,(function(){return t.fillText(i,it,nt)})),nt+=z+tt},ht=0,rt=G;ht<rt.length;ht++){st(rt[ht])}t.restore()}},t.prototype.Wh=function(){var t,i,n,s,h,r,e,u,o,l,a,f,c,v,d,_,w,M,b,m,p;if(null!==this.Nh)return this.Nh;var g=E(this.kt),y=li(g),k=oi(g),x=fi(g)+y,C=ai(g)+k,N=L(g.Is)[0],S=this.Fh(),T=S.wi,A=S.Mi,B=N.y,D=N.x;switch(null===(n=null===(i=null===(t=g.ki)||void 0===t?void 0:t.box)||void 0===i?void 0:i.alignment)||void 0===n?void 0:n.vertical){case"bottom":B-=A+((null===(r=null===(h=null===(s=g.ki)||void 0===s?void 0:s.box)||void 0===h?void 0:h.offset)||void 0===r?void 0:r.y)||0);break;case"middle":B-=A/2;break;case"top":B+=(null===(o=null===(u=null===(e=g.ki)||void 0===e?void 0:e.box)||void 0===u?void 0:u.offset)||void 0===o?void 0:o.y)||0}var F=B+C+vi(g)/2,P="start",W=0;switch(null===(f=null===(a=null===(l=g.ki)||void 0===l?void 0:l.box)||void 0===a?void 0:a.alignment)||void 0===f?void 0:f.horizontal){case"left":D+=(null===(d=null===(v=null===(c=g.ki)||void 0===c?void 0:c.box)||void 0===v?void 0:v.offset)||void 0===d?void 0:d.x)||0;break;case"center":D-=T/2;break;case"right":D-=T+((null===(M=null===(w=null===(_=g.ki)||void 0===_?void 0:_.box)||void 0===w?void 0:w.offset)||void 0===M?void 0:M.x)||0)}switch(L(null===(b=g.ki)||void 0===b?void 0:b.alignment)){case"left":P="start",W=D+x,wi()&&((null===(m=g.ki)||void 0===m?void 0:m.forceTextAlign)?P="left":(W=D+T-x,P="right"));break;case"center":P="center",W=D+T/2;break;case"right":P="end",W=D+T-x,wi()&&(null===(p=g.ki)||void 0===p?void 0:p.forceTextAlign)&&(P="right")}return this.Nh={Rh:D,zh:B,Oh:T,Vh:A,Yh:P,Xh:F-B,Zh:W-D},this.Nh},t.prototype.Jh=function(t){var i,n,s;if(ni||hi(),ni.textBaseline="alphabetic",ni.font=this.Hh(),null!==this.kt&&(null===(i=this.kt.ki)||void 0===i?void 0:i.wordWrapWidth)&&!(null===(n=this.kt.ki)||void 0===n?void 0:n.forceCalculateMaxLineWidth))return(null===(s=this.kt.ki)||void 0===s?void 0:s.wordWrapWidth)*_i(this.kt);for(var h=0,r=0,e=t;r<e.length;r++){var u=e[r];h=Math.max(h,ni.measureText(u).width)}return h},t.prototype.Kh=function(){var t,i,n,s,h,r;if(null===this.Th){var e=E(this.kt),u=this.Uh((null===(t=e.ki)||void 0===t?void 0:t.value)||"",null===(i=e.ki)||void 0===i?void 0:i.wordWrapWidth);if(void 0!==(null===(s=null===(n=e.ki)||void 0===n?void 0:n.box)||void 0===s?void 0:s.maxHeight)){var o=L(null===(r=null===(h=e.ki)||void 0===h?void 0:h.box)||void 0===r?void 0:r.maxHeight),l=vi(e),a=ci(e),f=Math.floor((o+a)/(l+a));u.length>f&&(u=u.slice(0,f))}this.Th={Gh:this.Jh(u),$h:u}}return this.Th},t.prototype.jh=function(){var t,i,n,s,h,r;if(null===this.Ah){var e=E(this.kt),u=vi(e),o=((null===(i=null===(t=e.ki)||void 0===t?void 0:t.font)||void 0===i?void 0:i.bold)?"bold ":"")+((null===(s=null===(n=e.ki)||void 0===n?void 0:n.font)||void 0===s?void 0:s.italic)?"italic ":"")+u+"px "+(null===(r=null===(h=e.ki)||void 0===h?void 0:h.font)||void 0===r?void 0:r.family);this.Ah={Hh:o,U:u}}return this.Ah},t.prototype.Fh=function(){if(null===this.Lh){var t=this.Kh(),i=E(this.kt);this.Lh={wi:ei(i,t.Gh),Mi:ui(i,t.$h.length)}}return this.Lh},t.prototype.Eh=function(){var t,i;if(null!==this.Sh)return this.Sh;if(null===this.kt)return[];var n=this.Wh(),s=n.Rh,r=n.zh,e=n.Oh,u=n.Vh,o=this.qh(),l=(null===(i=null===(t=this.kt.ki)||void 0===t?void 0:t.box)||void 0===i?void 0:i.angle)||0;return this.Sh=[ri(new h(s,r),o,l),ri(new h(s+e,r),o,l),ri(new h(s+e,r+u),o,l),ri(new h(s,r+u),o,l)],this.Sh},t.prototype.qh=function(){var t,i,n,s=this.Wh(),r=s.Rh,e=s.zh,u=s.Oh,o=s.Vh,l=L(null===(n=null===(i=null===(t=this.kt)||void 0===t?void 0:t.ki)||void 0===i?void 0:i.box)||void 0===n?void 0:n.alignment),a=l.horizontal,f=l.vertical,c=0,v=0;switch(a){case"center":c=r+u/2;break;case"left":c=r;break;case"right":c=r+u}switch(f){case"middle":v=e+o/2;break;case"top":v=e;break;case"bottom":v=e+o}return new h(c,v)},t}();function hi(){var t=document.createElement("canvas");t.width=0,t.height=0,ni=E(t.getContext("2d"))}function ri(t,i,n){if(0===n)return t.clone();var s=(t.x-i.x)*Math.cos(n)-(t.y-i.y)*Math.sin(n)+i.x,r=(t.x-i.x)*Math.sin(n)+(t.y-i.y)*Math.cos(n)+i.y;return new h(s,r)}function ei(t,i){return i+2*fi(t)+2*li(t)}function ui(t,i){return vi(t)*i+ci(t)*(i-1)+2*ai(t)+2*oi(t)}function oi(t){var i,n,s,h,r,e;return void 0!==(null===(s=null===(n=null===(i=t.ki)||void 0===i?void 0:i.box)||void 0===n?void 0:n.padding)||void 0===s?void 0:s.y)?(null===(e=null===(r=null===(h=t.ki)||void 0===h?void 0:h.box)||void 0===r?void 0:r.padding)||void 0===e?void 0:e.y)*_i(t):vi(t)/3}function li(t){var i,n,s,h,r,e;return(null===(s=null===(n=null===(i=t.ki)||void 0===i?void 0:i.box)||void 0===n?void 0:n.padding)||void 0===s?void 0:s.x)?(null===(e=null===(r=null===(h=t.ki)||void 0===h?void 0:h.box)||void 0===r?void 0:r.padding)||void 0===e?void 0:e.x)*_i(t):vi(t)/3}function ai(t){var i,n,s,h;return((null===(h=null===(s=null===(n=null===(i=t.ki)||void 0===i?void 0:i.box)||void 0===n?void 0:n.background)||void 0===s?void 0:s.inflation)||void 0===h?void 0:h.y)||0)*_i(t)}function fi(t){var i,n,s,h;return((null===(h=null===(s=null===(n=null===(i=t.ki)||void 0===i?void 0:i.box)||void 0===n?void 0:n.background)||void 0===s?void 0:s.inflation)||void 0===h?void 0:h.x)||0)*_i(t)}function ci(t){var i;return((null===(i=t.ki)||void 0===i?void 0:i.padding)||0)*_i(t)}function vi(t){return Math.ceil(di(t)*_i(t))}function di(t){var i,n;return(null===(n=null===(i=t.ki)||void 0===i?void 0:i.font)||void 0===n?void 0:n.size)||30}function _i(t){var i,n,s=Math.min(1,Math.max(.2,(null===(n=null===(i=t.ki)||void 0===i?void 0:i.box)||void 0===n?void 0:n.scale)||1));if(1===s)return s;var h=di(t);return Math.ceil(s*h)/h}function wi(){return"rtl"===window.document.dir}var Mi=function(){function t(){this.ni=null}return t.prototype.xt=function(t){this.ni=t},t.prototype._t=function(t,i){var n=this;if(null!==this.ni){var s=i.bt,h=Math.max(1,Math.floor(s));t.lineWidth=h;var r=Math.ceil(this.ni.ei*s),e=Math.ceil(this.ni.ri*s);!function(t,i){t.save(),t.lineWidth%2&&t.translate(.5,.5),i(),t.restore()}(t,(function(){var i=E(n.ni);if(i.Qh){t.strokeStyle=i.tr,g(t,i.ir),t.beginPath();for(var u=0,o=i.nr;u<o.length;u++){var l=o[u],a=Math.round(l.sr*s);t.moveTo(a,-h),t.lineTo(a,r+h)}t.stroke()}if(i.hr){t.strokeStyle=i.rr,g(t,i.er),t.beginPath();for(var f=0,c=i.ur;f<c.length;f++){var v=c[f],d=Math.round(v.sr*s);t.moveTo(-h,d),t.lineTo(e+h,d)}t.stroke()}}))}},t}(),bi=function(){function t(t){this.ai=new Mi,this.Li=!0,this.cn=t}return t.prototype.Ot=function(){this.Li=!0},t.prototype.It=function(t,i){if(this.Li){var n=this.cn.ci().nt().grid,s={ei:t,ri:i,hr:n.horzLines.visible,Qh:n.vertLines.visible,rr:n.horzLines.color,tr:n.vertLines.color,er:n.horzLines.style,ir:n.vertLines.style,ur:this.cn.Nn().lr(),nr:this.cn.ci().qt().lr()||[]};this.ai.xt(s),this.Li=!1}return this.ai},t}(),mi=function(){function t(t){this.Ln=new bi(t)}return t.prototype.ar=function(){return this.Ln},t}(),pi=".";function gi(t,i){if(!Z(t))return"n/a";if(!X(i))throw new TypeError("invalid length");if(i<0||i>16)throw new TypeError("invalid length");if(0===i)return t.toString();return("0000000000000000"+t.toString()).slice(-i)}var yi=function(){function t(t,i){if(i||(i=1),Z(t)&&X(t)||(t=100),t<0)throw new TypeError("invalid base");this.Oi=t,this.cr=i,this.vr()}return t.prototype.format=function(t){var i=t<0?"−":"";return t=Math.abs(t),i+this.dr(t)},t.prototype.vr=function(){if(this._r=0,this.Oi>0&&this.cr>0)for(var t=this.Oi;t>1;)t/=10,this._r++},t.prototype.dr=function(t){var i=this.Oi/this.cr,n=Math.floor(t),s="",h=void 0!==this._r?this._r:NaN;if(i>1){var r=+(Math.round(t*i)-n*i).toFixed(this._r);r>=i&&(r-=i,n+=1),s=pi+gi(+r.toFixed(this._r)*this.cr,h)}else n=Math.round(n*i)/i,h>0&&(s=pi+gi(0,h));return n.toFixed(0)+s},t}(),ki=function(t){function i(i){return void 0===i&&(i=100),t.call(this,i)||this}return U(i,t),i.prototype.format=function(i){return"".concat(t.prototype.format.call(this,i),"%")},i}(yi),xi=function(){function t(t,i){this.wr=t,this.Mr=i}return t.prototype.br=function(t){return null!==t&&(this.wr===t.wr&&this.Mr===t.Mr)},t.prototype.mr=function(){return new t(this.wr,this.Mr)},t.prototype.pr=function(){return this.wr},t.prototype.gr=function(){return this.Mr},t.prototype.yr=function(){return this.Mr-this.wr},t.prototype.dt=function(){return this.Mr===this.wr||Number.isNaN(this.Mr)||Number.isNaN(this.wr)},t.prototype.ls=function(i){return null===i?this:new t(Math.min(this.pr(),i.pr()),Math.max(this.gr(),i.gr()))},t.prototype.kr=function(t){if(Z(t)&&0!==this.Mr-this.wr){var i=.5*(this.Mr+this.wr),n=this.Mr-i,s=this.wr-i;n*=t,s*=t,this.Mr=i+n,this.wr=i+s}},t.prototype.Cr=function(t){Z(t)&&(this.Mr+=t,this.wr+=t)},t.prototype.Nr=function(){return{minValue:this.wr,maxValue:this.Mr}},t.Sr=function(i){return null===i?null:new t(i.minValue,i.maxValue)},t}();function Ci(t,i,n){return Math.min(Math.max(t,i),n)}function Ni(t,i,n){return i-t<=n}function Si(t){return t<=0?NaN:Math.log(t)/Math.log(10)}function Ti(t){var i=Math.ceil(t);return i%2!=0?i-1:i}function Ai(t){var i=Math.ceil(t);return i%2==0?i-1:i}var Li={Tr:4,Ar:1e-4};function Ei(t,i){var n=100*(t-i)/i;return i<0?-n:n}function Bi(t,i){var n=Ei(t.pr(),i),s=Ei(t.gr(),i);return new xi(n,s)}function Di(t,i){var n=100*(t-i)/i+100;return i<0?-n:n}function Fi(t,i){var n=Di(t.pr(),i),s=Di(t.gr(),i);return new xi(n,s)}function Pi(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=Si(n+i.Ar)+i.Tr;return t<0?-s:s}function Wi(t,i){var n=Math.abs(t);if(n<1e-15)return 0;var s=Math.pow(10,n-i.Tr)-i.Ar;return t<0?-s:s}function Ri(t,i){if(null===t)return null;var n=Pi(t.pr(),i),s=Pi(t.gr(),i);return new xi(n,s)}function zi(t,i){if(null===t)return null;var n=Wi(t.pr(),i),s=Wi(t.gr(),i);return new xi(n,s)}function Oi(t){if(null===t)return Li;var i=Math.abs(t.gr()-t.pr());if(i>=1||i<1e-15)return Li;var n=Math.ceil(Math.abs(Math.log10(i))),s=Li.Tr+n;return{Tr:s,Ar:1/Math.pow(10,s)}}var Vi,Ii=function(){function t(t,i){if(this.Lr=t,this.Er=i,function(t){if(t<0)return!1;for(var i=t;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Lr))this.Br=[2,2.5,2];else{this.Br=[];for(var n=this.Lr;1!==n;){if(n%2==0)this.Br.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.Br.push(2,2.5),n/=5}if(this.Br.length>100)throw new Error("something wrong with base")}}}return t.prototype.Dr=function(t,i,n){for(var s,h,r,e=0===this.Lr?0:1/this.Lr,u=Math.pow(10,Math.max(0,Math.ceil(Si(t-i)))),o=0,l=this.Er[0];;){var a=Ni(u,e,1e-14)&&u>e+1e-14,f=Ni(u,n*l,1e-14),c=Ni(u,1,1e-14);if(!(a&&f&&c))break;u/=l,l=this.Er[++o%this.Er.length]}if(u<=e+1e-14&&(u=e),u=Math.max(1,u),this.Br.length>0&&(s=u,h=1,r=1e-14,Math.abs(s-h)<r))for(o=0,l=this.Br[0];Ni(u,n*l,1e-14)&&u>e+1e-14;)u/=l,l=this.Br[++o%this.Br.length];return u},t}(),Hi=function(){function t(t,i,n,s){this.Fr=[],this.Oi=t,this.Lr=i,this.Pr=n,this.Wr=s}return t.prototype.Dr=function(t,i){if(t<i)throw new Error("high < low");var n=this.Oi.Mi(),s=(t-i)*this.Rr()/n,h=new Ii(this.Lr,[2,2.5,2]),r=new Ii(this.Lr,[2,2,2.5]),e=new Ii(this.Lr,[2.5,2,2]),u=[];return u.push(h.Dr(t,i,s),r.Dr(t,i,s),e.Dr(t,i,s)),function(t){if(t.length<1)throw Error("array is empty");for(var i=t[0],n=1;n<t.length;++n)t[n]<i&&(i=t[n]);return i}(u)},t.prototype.zr=function(){var t=this.Oi,i=t.Kt();if(null!==i){var n=t.Mi(),s=this.Pr(n-1,i),h=this.Pr(0,i),r=this.Oi.nt().entireTextOnly?this.Or()/2:0,e=r,u=n-1-r,o=Math.max(s,h),l=Math.min(s,h);if(o!==l){for(var a=this.Dr(o,l),f=o%a,c=o>=l?1:-1,v=null,d=0,_=o-(f+=f<0?a:0);_>l;_-=a){var w=this.Wr(_,i,!0);null!==v&&Math.abs(w-v)<this.Rr()||(w<e||w>u||(d<this.Fr.length?(this.Fr[d].sr=w,this.Fr[d].Vr=t.Ir(_)):this.Fr.push({sr:w,Vr:t.Ir(_)}),d++,v=w,t.Hr()&&(a=this.Dr(_*c,l))))}this.Fr.length=d}else this.Fr=[]}else this.Fr=[]},t.prototype.lr=function(){return this.Fr},t.prototype.Or=function(){return this.Oi.U()},t.prototype.Rr=function(){return Math.ceil(2.5*this.Or())},t}();function ji(t){return t.slice().sort((function(t,i){return E(t.on())-E(i.on())}))}!function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"}(Vi||(Vi={}));var Ui,qi=new ki,Yi=new yi(100,1),$i=function(){function t(t,i,n,s){this.jr=0,this.Ur=null,this.qr=null,this.Yr=null,this.$r={Kr:!1,Zr:null},this.Xr=0,this.Jr=0,this.Gr=new $,this.Qr=new $,this.te=[],this.ie=null,this.ne=null,this.se=null,this.he=null,this.re=Yi,this.ee=Oi(null),this.hn=t,this.kn=i,this.ue=n,this.oe=s,this.le=new Hi(this,100,this.ae.bind(this),this.fe.bind(this))}return t.prototype.en=function(){return this.hn},t.prototype.nt=function(){return this.kn},t.prototype.th=function(t){if(K(this.kn,t),this.ce(),void 0!==t.mode&&this.ve({de:t.mode}),void 0!==t.scaleMargins){var i=L(t.scaleMargins.top),n=L(t.scaleMargins.bottom);if(i<0||i>1)throw new Error("Invalid top margin - expect value between 0 and 1, given=".concat(i));if(n<0||n>1||i+n>1)throw new Error("Invalid bottom margin - expect value between 0 and 1, given=".concat(n));if(i+n>1)throw new Error("Invalid margins - sum of margins must be less than 1, given=".concat(i+n));this._e(),this.ne=null}},t.prototype.we=function(){return this.kn.autoScale},t.prototype.Hr=function(){return 1===this.kn.mode},t.prototype.Me=function(){return 2===this.kn.mode},t.prototype.be=function(){return 3===this.kn.mode},t.prototype.de=function(){return{Gn:this.kn.autoScale,me:this.kn.invertScale,de:this.kn.mode}},t.prototype.ve=function(t){var i=this.de(),n=null;void 0!==t.Gn&&(this.kn.autoScale=t.Gn),void 0!==t.de&&(this.kn.mode=t.de,2!==t.de&&3!==t.de||(this.kn.autoScale=!0),this.$r.Kr=!1),1===i.de&&t.de!==i.de&&(!function(t,i){if(null===t)return!1;var n=Wi(t.pr(),i),s=Wi(t.gr(),i);return isFinite(n)&&isFinite(s)}(this.qr,this.ee)?this.kn.autoScale=!0:null!==(n=zi(this.qr,this.ee))&&this.pe(n)),1===t.de&&t.de!==i.de&&null!==(n=Ri(this.qr,this.ee))&&this.pe(n);var s=i.de!==this.kn.mode;s&&(2===i.de||this.Me())&&this.ce(),s&&(3===i.de||this.be())&&this.ce(),void 0!==t.me&&i.me!==t.me&&(this.kn.invertScale=t.me,this.ge()),this.Qr.L(i,this.de())},t.prototype.ye=function(){return this.Qr},t.prototype.U=function(){return this.ue.fontSize},t.prototype.Mi=function(){return this.jr},t.prototype.ke=function(t){this.jr!==t&&(this.jr=t,this._e(),this.ne=null)},t.prototype.xe=function(){if(this.Ur)return this.Ur;var t=this.Mi()-this.Ce()-this.Ne();return this.Ur=t,t},t.prototype.Se=function(){return this.Te(),this.qr},t.prototype.Ae=function(){return this.ee},t.prototype.pe=function(t,i){var n=this.qr;(i||null===n&&null!==t||null!==n&&!n.br(t))&&(this.ne=null,this.qr=t)},t.prototype.dt=function(){return this.Te(),0===this.jr||!this.qr||this.qr.dt()},t.prototype.Le=function(t){return this.me()?t:this.Mi()-1-t},t.prototype.Xt=function(t,i){return this.Me()?t=Ei(t,i):this.be()&&(t=Di(t,i)),this.fe(t,i)},t.prototype.Ee=function(t,i,n){this.Te();for(var s=this.Ne(),h=E(this.Se()),r=h.pr(),e=h.gr(),u=this.xe()-1,o=this.me(),l=u/(e-r),a=void 0===n?0:n.from,f=void 0===n?t.length:n.to,c=this.Be(),v=a;v<f;v++){var d=t[v],_=d.Dt;if(!isNaN(_)){var w=_;null!==c&&(w=c(d.Dt,i));var M=s+l*(w-r),b=o?M:this.jr-1-M;d.Tt=b}}},t.prototype.De=function(t,i,n){this.Te();for(var s=this.Ne(),h=E(this.Se()),r=h.pr(),e=h.gr(),u=this.xe()-1,o=this.me(),l=u/(e-r),a=void 0===n?0:n.from,f=void 0===n?t.length:n.to,c=this.Be(),v=a;v<f;v++){var d=t[v],_=d.Fe,w=d.Pe;if(!isNaN(_)&&!isNaN(w)){var M=_,b=w;null!==c&&(M=c(d.Fe,i),b=c(d.Pe,i));var m=s+l*(M-r),p=o?m:this.jr-1-m;d.We=p,m=s+l*(b-r),p=o?m:this.jr-1-m,d.Re=p}}},t.prototype.ze=function(t,i,n){this.Te();for(var s=this.Ne(),h=E(this.Se()),r=h.pr(),e=h.gr(),u=this.xe()-1,o=this.me(),l=u/(e-r),a=void 0===n?0:n.from,f=void 0===n?t.length:n.to,c=this.Be(),v=a;v<f;v++){var d=t[v],_=d.open,w=d.high,M=d.low,b=d.close;null!==c&&(_=c(d.open,i),w=c(d.high,i),M=c(d.low,i),b=c(d.close,i));var m=s+l*(_-r),p=o?m:this.jr-1-m;d.Oe=p,m=s+l*(w-r),p=o?m:this.jr-1-m,d.Ve=p,m=s+l*(M-r),p=o?m:this.jr-1-m,d.Ie=p,m=s+l*(b-r),p=o?m:this.jr-1-m,d.He=p}},t.prototype.Sn=function(t,i){var n=this.ae(t,i);return this.je(n,i)},t.prototype.je=function(t,i){var n=t;return this.Me()?n=function(t,i){return i<0&&(t=-t),t/100*i+i}(n,i):this.be()&&(n=function(t,i){return t-=100,i<0&&(t=-t),t/100*i+i}(n,i)),n},t.prototype.jt=function(){return this.te},t.prototype.Ue=function(){if(this.ie)return this.ie;for(var t=[],i=0;i<this.te.length;i++){var n=this.te[i];null===n.on()&&n.ln(i+1),t.push(n)}return t=ji(t),this.ie=t,this.ie},t.prototype.qe=function(t){-1===this.te.indexOf(t)&&(this.te.push(t),this.ce(),this.Ye())},t.prototype.$e=function(t){var i=this.te.indexOf(t);if(-1===i)throw new Error("source is not attached to scale");this.te.splice(i,1),0===this.te.length&&(this.ve({Gn:!0}),this.pe(null)),this.ce(),this.Ye()},t.prototype.Kt=function(){for(var t,i=null,n=0,s=this.te;n<s.length;n++){var h=s[n],r=null===(t=h.Kt)||void 0===t?void 0:t.bind(h).call(this);r&&((null===i||r.Ke<i.Ke)&&(i=r))}return null===i?null:i.Gt},t.prototype.me=function(){return this.kn.invertScale},t.prototype.lr=function(){var t=null===this.Kt();if(null!==this.ne&&(t||this.ne.Ze===t))return this.ne.lr;this.le.zr();var i=this.le.lr();return this.ne={lr:i,Ze:t},this.Gr.L(),i},t.prototype.Xe=function(){return this.Gr},t.prototype.Je=function(t){this.Me()||this.be()||null===this.se&&null===this.Yr&&(this.dt()||(this.se=this.jr-t,this.Yr=E(this.Se()).mr()))},t.prototype.Ge=function(t){if(!this.Me()&&!this.be()&&null!==this.se){this.ve({Gn:!1}),(t=this.jr-t)<0&&(t=0);var i=(this.se+.2*(this.jr-1))/(t+.2*(this.jr-1)),n=E(this.Yr).mr();i=Math.max(i,.1),n.kr(i),this.pe(n)}},t.prototype.Qe=function(){this.Me()||this.be()||(this.se=null,this.Yr=null)},t.prototype.tu=function(t){this.we()||null===this.he&&null===this.Yr&&(this.dt()||(this.he=t,this.Yr=E(this.Se()).mr()))},t.prototype.iu=function(t){if(!this.we()&&null!==this.he){var i=E(this.Se()).yr()/(this.xe()-1),n=t-this.he;this.me()&&(n*=-1);var s=n*i,h=E(this.Yr).mr();h.Cr(s),this.pe(h,!0),this.ne=null}},t.prototype.nu=function(){this.we()||null!==this.he&&(this.he=null,this.Yr=null)},t.prototype.su=function(){return this.re||this.ce(),this.re},t.prototype.Ii=function(t,i){switch(this.kn.mode){case 2:return this.su().format(Ei(t,i));case 3:return this.su().format(Di(t,i));default:return this.hu(t)}},t.prototype.Ir=function(t){switch(this.kn.mode){case 2:case 3:return this.su().format(t);default:return this.hu(t)}},t.prototype.ru=function(t){return this.hu(t,E(this.eu()).su())},t.prototype.uu=function(t,i){return t=Ei(t,i),qi.format(t)},t.prototype.ou=function(){return this.te},t.prototype.lu=function(t){this.$r={Zr:t,Kr:!1}},t.prototype.Hn=function(){this.te.forEach((function(t){return t.Hn()}))},t.prototype.ce=function(){this.ne=null;var t=this.eu(),i=100;null!==t&&(i=Math.round(1/t.au())),this.re=Yi,this.Me()?(this.re=qi,i=100):this.be()?(this.re=new yi(100,1),i=100):null!==t&&(this.re=t.su()),this.le=new Hi(this,i,this.ae.bind(this),this.fe.bind(this)),this.le.zr()},t.prototype.Ye=function(){this.ie=null},t.prototype.eu=function(){return this.te[0]||null},t.prototype.Ce=function(){return this.me()?this.kn.scaleMargins.bottom*this.Mi()+this.Jr:this.kn.scaleMargins.top*this.Mi()+this.Xr},t.prototype.Ne=function(){return this.me()?this.kn.scaleMargins.top*this.Mi()+this.Xr:this.kn.scaleMargins.bottom*this.Mi()+this.Jr},t.prototype.Te=function(){this.$r.Kr||(this.$r.Kr=!0,this.fu())},t.prototype._e=function(){this.Ur=null},t.prototype.fe=function(t,i){if(this.Te(),this.dt())return 0;t=this.Hr()&&t?Pi(t,this.ee):t;var n=E(this.Se()),s=this.Ne()+(this.xe()-1)*(t-n.pr())/n.yr();return this.Le(s)},t.prototype.ae=function(t,i){if(this.Te(),this.dt())return 0;var n=this.Le(t),s=E(this.Se()),h=s.pr()+s.yr()*((n-this.Ne())/(this.xe()-1));return this.Hr()?Wi(h,this.ee):h},t.prototype.ge=function(){this.ne=null,this.le.zr()},t.prototype.fu=function(){var t=this.$r.Zr;if(null!==t){for(var i,n,s=null,h=0,r=0,e=0,u=this.ou();e<u.length;e++){var o=u[e];if(o.$t()&&o.Kt){var l=o.Kt();if(null!==l){var a=o.cu(t.vu(),t.du()),f=a&&a.Se();if(null!==f){switch(this.kn.mode){case 1:f=Ri(f,this.ee);break;case 2:f=Bi(f,l.Gt);break;case 3:f=Fi(f,l.Gt)}if(s=null===s?f:s.ls(E(f)),null!==a){var c=a._u();null!==c&&(h=Math.max(h,c.above),r=Math.max(h,c.below))}}}}}if(h===this.Xr&&r===this.Jr||(this.Xr=h,this.Jr=r,this.ne=null,this._e()),null!==s){if(s.pr()===s.gr()){var v=this.eu(),d=5*(null===v||this.Me()||this.be()?1:v.au());this.Hr()&&(s=zi(s,this.ee)),s=new xi(s.pr()-d,s.gr()+d),this.Hr()&&(s=Ri(s,this.ee))}if(this.Hr()){var _=zi(s,this.ee),w=Oi(_);if(i=w,n=this.ee,i.Tr!==n.Tr||i.Ar!==n.Ar){var M=null!==this.Yr?zi(this.Yr,this.ee):null;this.ee=w,s=Ri(_,w),null!==M&&(this.Yr=Ri(M,w))}}this.pe(s)}else null===this.qr&&(this.pe(new xi(-.5,.5)),this.ee=Oi(null));this.$r.Kr=!0}},t.prototype.Be=function(){var t=this;return this.Me()?Ei:this.be()?Di:this.Hr()?function(i){return Pi(i,t.ee)}:null},t.prototype.hu=function(t,i){return void 0===this.oe.priceFormatter?(void 0===i&&(i=this.su()),i.format(t)):this.oe.priceFormatter(t)},t}();!function(t){t.wu="default",t.Mu="crosshair",t.bu="pointer",t.mu="grabbing",t.pu="zoom-in",t.gu="n-resize",t.yu="e-resize",t.ku="nesw-resize",t.xu="nwse-resize"}(Ui||(Ui={}));var Ki=function(){function t(t,i,n){void 0===n&&(n=0),this.te=[],this.Cu=new Map,this.jr=0,this.Nu=0,this.Su=1e3,this.ie=null,this.Tu=new $,this.Au=t,this.yn=i,this.Lu=new mi(this);var s=i.nt();this.Eu=this.Bu("left",s.leftPriceScale),this.Du=0===n?this.Bu("right",s.rightPriceScale):this.Bu("non-primary",s.nonPrimaryPriceScale),this.Eu.ye().k(this.Fu.bind(this,this.Eu),this),this.Du.ye().k(this.Fu.bind(this,this.Du),this),this.Pu(s)}return t.prototype.Pu=function(t){if(t.leftPriceScale&&this.Eu.th(t.leftPriceScale),"right"===this.Du.en()&&t.rightPriceScale&&this.Du.th(t.rightPriceScale),"non-primary"===this.Du.en()&&t.nonPrimaryPriceScale&&this.Du.th(t.nonPrimaryPriceScale),t.localization&&(this.Eu.ce(),this.Du.ce()),t.overlayPriceScales)for(var i=0,n=Array.from(this.Cu.values());i<n.length;i++){var s=E(n[i][0].Jt());s.th(t.overlayPriceScales),t.localization&&s.ce()}},t.prototype.Wu=function(t){switch(t){case"left":return this.Eu;case"right":return this.Du}return this.Cu.has(t)?L(this.Cu.get(t))[0].Jt():null},t.prototype.D=function(){this.ci().Ru().A(this),this.Eu.ye().A(this),this.Du.ye().A(this),this.te.forEach((function(t){t.D&&t.D()})),this.Tu.L()},t.prototype.zu=function(){return this.Su},t.prototype.Ou=function(t){this.Su=t},t.prototype.ci=function(){return this.yn},t.prototype.wi=function(){return this.Nu},t.prototype.Mi=function(){return this.jr},t.prototype.Vu=function(t){this.Nu=t,this.Iu()},t.prototype.ke=function(t){var i=this;this.jr=t,this.Eu.ke(t),this.Du.ke(t),this.te.forEach((function(n){if(i.Hu(n)){var s=n.Jt();null!==s&&s.ke(t)}})),this.Iu()},t.prototype.jt=function(){return this.te},t.prototype.Hu=function(t){var i=t.Jt();return null===i||this.Eu!==i&&this.Du!==i},t.prototype.qe=function(t,i,n){var s=void 0!==n?n:this.Uu().ju+1;this.qu(t,i,s)},t.prototype.$e=function(t){var i=this.te.indexOf(t);A(-1!==i,"removeDataSource: invalid data source"),this.te.splice(i,1);var n=E(t.Jt()).en();if(this.Cu.has(n)){var s=L(this.Cu.get(n)),h=s.indexOf(t);-1!==h&&(s.splice(h,1),0===s.length&&this.Cu.delete(n))}var r=t.Jt();r&&r.jt().indexOf(t)>=0&&r.$e(t),null!==r&&(r.Ye(),this.Yu(r)),this.ie=null},t.prototype.$u=function(t){return t===this.Eu?"left":t===this.Du?"right":"overlay"},t.prototype.Ku=function(){return this.Eu},t.prototype.Gs=function(){return this.Du},t.prototype.Zu=function(t,i){t.Je(i)},t.prototype.Xu=function(t,i){t.Ge(i),this.Iu()},t.prototype.Ju=function(t){t.Qe()},t.prototype.Gu=function(t,i){t.tu(i)},t.prototype.Qu=function(t,i){t.iu(i),this.Iu()},t.prototype.io=function(t){t.nu()},t.prototype.Iu=function(){this.te.forEach((function(t){t.Hn()}))},t.prototype.Nn=function(){var t=null;return this.yn.nt().rightPriceScale.visible&&0!==this.Du.jt().length?t=this.Du:this.yn.nt().leftPriceScale.visible&&0!==this.Eu.jt().length?t=this.Eu:0!==this.te.length&&(t=this.te[0].Jt()),null===t&&(t=this.Du),t},t.prototype.no=function(){var t=null;return this.yn.nt().rightPriceScale.visible?t=this.Du:this.yn.nt().leftPriceScale.visible&&(t=this.Eu),t},t.prototype.Yu=function(t){null!==t&&t.we()&&this.so(t)},t.prototype.ho=function(t){var i=this.Au.bs();t.ve({Gn:!0}),null!==i&&t.lu(i),this.Iu()},t.prototype.ro=function(){this.so(this.Eu),this.so(this.Du)},t.prototype.eo=function(){var t=this;this.Yu(this.Eu),this.Yu(this.Du),this.te.forEach((function(i){t.Hu(i)&&t.Yu(i.Jt())})),this.Iu(),this.yn.uo()},t.prototype.Ue=function(){return null===this.ie&&(this.ie=ji(this.te)),this.ie},t.prototype.oo=function(){return this.Tu},t.prototype.lo=function(){return this.Lu},t.prototype.so=function(t){var i=t.ou();if(i&&i.length>0&&!this.Au.dt()){var n=this.Au.bs();null!==n&&t.lu(n)}t.Hn()},t.prototype.Uu=function(){var t=this.Ue();if(0===t.length)return{ao:0,ju:0};for(var i=0,n=0,s=0;s<t.length;s++){var h=t[s].on();null!==h&&(h<i&&(i=h),h>n&&(n=h))}return{ao:i,ju:n}},t.prototype.qu=function(t,i,n){var s=this.Wu(i);if(null===s&&(s=this.Bu(i,this.yn.nt().overlayPriceScales)),this.te.push(t),!Lt(i)){var h=this.Cu.get(i)||[];h.push(t),this.Cu.set(i,h)}void 0!==t.fo&&"BrokenArea"===t.fo()||s.qe(t),t.an(s),t.ln(n),this.Yu(s),this.ie=null},t.prototype.Fu=function(t,i,n){i.de!==n.de&&this.so(t)},t.prototype.Bu=function(t,i){var n=q({visible:!0,autoScale:!0},Q(i)),s=new $i(t,n,this.yn.nt().layout,this.yn.nt().localization);return s.ke(this.Mi()),s},t}(),Zi=function(t){function i(i,n,s,h){var r=t.call(this,i,n)||this;return r.dh=s,r.co=h,r}return U(i,t),i.prototype.clone=function(){return new i(this.x,this.y,this.dh,this.co)},i}(h),Xi=function(){function t(t){this.kt=void 0!==t?t:null}return t.prototype.xt=function(t){this.kt=t},t.prototype.vo=function(t){this.kt=K(this.kt,t)},t.prototype._t=function(t,i){if(null!==this.kt&&this.kt.$t){for(var n=[],s=[],h=[],r=[],e=i.bt,u=0;u<this.kt.Is.length;++u){var o=this.kt.Is[u],l=this.kt.do[u];o.co?(n.push(o),s.push(l)):(h.push(o),r.push(l))}t.strokeStyle=this.kt.$,n.length&&this._o(t,e,n,s,Qi,Gi),h.length&&this._o(t,e,h,r,nn,tn)}},t.prototype.Mt=function(t){if(null===this.kt)return null;for(var i=0;i<this.kt.Is.length;++i){var n=this.kt.Is[i];if(n.subtract(t).length()<=this.kt.Lt+Qt){var s=void 0!==this.kt.wo?this.kt.wo[i]:Ui.wu,h=n.dh;return new Jt(this.kt.Mo,{bo:h,mo:s})}}return null},t.prototype._o=function(t,i,n,s,h,r){var e=E(this.kt),u=e.po,o=Math.max(1,Math.floor((e.yo||2)*i));e.vs&&(o+=Math.max(1,Math.floor(i/2)));var l=Math.max(1,Math.floor(i)),a=Math.round(e.Lt*i*2);i%2!=l%2&&(a+=1);for(var f=l%2/2,c=0;c<n.length;++c){var v=n[c];if(t.fillStyle=s[c],!Number.isInteger(v.dh)||e.ko!==v.dh){var d=Math.round(v.x*i)+f,_=Math.round(v.y*i)+f;if(h(t,new Zi(d,_,v.dh,v.co),a/2,o),v.subtract(u).length()<=e.Lt+Qt){var w=Math.max(1,Math.floor(e.xo*i));r(t,new Zi(d,_,v.dh,v.co),a/2,w)}}}},t}();function Ji(t,i,n,s){t.lineWidth=s;var h=n+s/2;ii(t,i.x-h,i.y-h,2*h,2*h,(n+s)/2),t.closePath()}function Gi(t,i,n,s){t.globalAlpha=.2,Ji(t,i,n,s),t.stroke(),t.globalAlpha=1}function Qi(t,i,n,s){Ji(t,i,n-s,s),t.fill(),t.stroke()}function tn(t,i,n,s){t.lineWidth=s,t.globalAlpha=.2,t.beginPath(),t.arc(i.x,i.y,n+s/2,0,2*Math.PI,!0),t.closePath(),t.stroke(),t.globalAlpha=1}function nn(t,i,n,s){t.lineWidth=s,t.beginPath(),t.arc(i.x,i.y,n-s/2,0,2*Math.PI,!0),t.closePath(),t.fill(),t.stroke()}var sn=function(){function t(t,i){this.Ps=[],this.Ui=!0,this.Co=null,this.No=null,this.So=[],this.ji=null,this.cs=t,this.Yi=i}return t.prototype.To=function(t,i,n){if(n&&(this.ji&&this.ji.Mt||!this.cs.zs())){var s=this.Yi.Ao(),r=new h(s.bi(),s.mi()),e=new h(s.Dn(),s.Fn()),u=11!==i||n.Lo?9===i?this.Eo(t,e,r,n):6===i?this.Bo(t,e,r,n):10===i&&this.Do():this.Fo(t,e,r);n.Lo||(n.Lo=this.cs.rh()||!this.cs.zs()),(u||this.cs.nh()||this.cs.rh()||!this.cs.zs())&&this.Po()}},t.prototype.It=function(t,i,n){return this.Ui&&this.$i(t,i),this.cs.$t()?this.ji:null},t.prototype.Xt=function(t){var i=this.cs.Jt(),n=this.cs.ps();if(null===i)return null;var s=null!==n?n.Kt():null;return null===s?null:i.Xt(t,s.Gt)},t.prototype.po=function(){var t=this.Yi.Ao();return new h(t.Dn(),t.Fn())},t.prototype.ko=function(){return this.cs.rh()?this.No:null},t.prototype.Wo=function(){return this.cs.nh()||this.cs.vs()||this.cs.rh()||!this.cs.zs()},t.prototype.Ot=function(){this.Ui=!0},t.prototype.Ro=function(t){t.ft(this.zo({Is:this.Ps},0))},t.prototype.Po=function(){var t=this;this.So.forEach((function(i){i.vo({Is:t.Ps,vs:t.cs.vs(),$t:t.Wo(),po:t.po(),ko:t.ko()})})),this.Yi.Vs(this.cs),this.cs.Hn()},t.prototype.zo=function(t,i){var n=this.Oo(i);return n.xt(q(q({},t),{Lt:6,yo:1,$:"#1E53E5",xo:4,vs:this.cs.vs(),$t:this.Wo(),po:this.po(),do:this.Vo(t.Is),ko:this.cs.rh()?this.ko():null,Mo:Xt.bh})),n},t.prototype.Do=function(){if(this.cs.zs()){if(this.cs.rh())return this.Yi.Ho().Io(),this.jo(),this.Co=null,this.No=null,this.cs.eh(!1),!0}else this.cs.Os();return!1},t.prototype.Fo=function(t,i,n){var s;if(!this.cs.zs())return this.cs.oh()&&this.cs.Hs(this.cs.Ks(n)),!1;if(!this.cs.vs())return!1;if(this.cs.rh()){if(t.Uo(null!==this.No?Ui.wu:Ui.mu),null!==this.No)this.cs.Us(this.No,this.cs.Ks(n));else if(this.Co){var h=n.subtract(this.Co);this.Ps.forEach((function(t){t.x=t.x+h.x,t.y=t.y+h.y})),this.Co=n,this.jo()}}else{var r=this.ph(t,i),e=null==r?void 0:r.dh();this.cs.eh(this.cs.nh()||!!r),this.Co=n,this.No=null!==(s=null==e?void 0:e.bo)&&void 0!==s?s:this.No,e&&this.Yi.Ho().qo()}return!1},t.prototype.Eo=function(t,i,n,s){var h,r,e;if(this.cs.zs()){var u=this.ph(t,i),o=this.cs.sh(null!==u&&!s.Lo);return this.cs.nh()&&!s.Lo&&(t.Uo((null===(h=null==u?void 0:u.dh())||void 0===h?void 0:h.mo)||Ui.bu),this.No=null!==(e=null===(r=null==u?void 0:u.dh())||void 0===r?void 0:r.bo)&&void 0!==e?e:null),o}return this.cs.lh()&&this.Yi.Ho().qo(),this.cs.Ys(this.cs.Ks(n)),!1},t.prototype.Bo=function(t,i,n,s){if(this.cs.zs()){var h=this.ph(t,i);return this.cs.hh(null!==h&&!s.Lo)}return this.cs.Hs(this.cs.Ks(n)),!1},t.prototype.jo=function(){var t=this;this.cs.qs(this.Ps.map((function(i){return t.cs.Ks(i)})))},t.prototype.ph=function(t,i){var n;if(!(null===(n=this.ji)||void 0===n?void 0:n.Mt))return null;var s=t.Yo();return this.ji.Mt(i,s)},t.prototype.Vo=function(t){var i=this,n=E(this.Yi.$o(this.cs)).Mi();return t.map((function(t){return i.Yi.ti(t.y/n)}))},t.prototype.$i=function(t,i){if(this.Ui=!1,!this.Yi.qt().dt()&&this.Ko()){this.Ps=[];for(var n=this.cs.Is(),s=0;s<n.length;s++){var h=this.cs.$s(n[s]);if(!h)return;h.dh=s,this.Ps.push(h)}}},t.prototype.Ko=function(){var t=this.cs.Jt();return null!==t&&!t.dt()},t.prototype.Oo=function(t){for(;this.So.length<=t;)this.So.push(new Xi);return this.So[t]},t}(),hn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Zo=new ti,s.Xo=new si,s.ji=null,s}return U(i,t),i.prototype.$i=function(){this.ji=null,this.Ui=!1;var i=this.cs.Jt(),n=this.Yi.qt();if(i&&!i.dt()&&!n.dt()){var s=n.Jo();if(null!==s){var r=this.cs.Is();if(!(r.length<2)){var e=this.cs.nt();if(!(Math.max(r[0].timestamp,r[1].timestamp)<s.from.Ji)||e.line.extend.left||e.line.extend.right){if(t.prototype.$i.call(this),this.Ps.length<2)return;var u=new ut;if(this.Zo.xt({yh:e.line,Is:this.Ps}),u.ft(this.Zo),e.text.value){var o=this.Ps[0],l=this.Ps[1],a=o.x<l.x?o:l,f=a===o?l:o,c=Math.atan((f.y-a.y)/(f.x-a.x)),v=e.text.box.alignment.horizontal,d="left"===v?a.clone():"right"===v?f.clone():new h((o.x+l.x)/2,(o.y+l.y)/2),_=Zt(e.text);_.box=q(q({},_.box),{angle:c}),this.Xo.xt({ki:_,Is:[d]}),u.ft(this.Xo)}this.Ro(u),this.ji=u}}}}},i}(sn),rn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Js="TrendLine",h.ah([new hn(h,i)]),h}return U(i,t),i.prototype.Rs=function(){return 2},i}(Kt),en=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Js="Arrow",i}return U(i,t),i}(rn),un=function(t){function i(i){var n=t.call(this)||this;return n.Go=new Jt(Xt.Mh),n.ph=i||new Jt(Xt.wh),n.kt=null,n}return U(i,t),i.prototype.xt=function(t){this.kt=t},i.prototype.Mt=function(t){if(null===this.kt)return null;var i=this.kt.yh.width||1,n=Math.max(Gt,Math.ceil(i/2)),s=this.kt.Is.length;if(1===s)return function(t,i,n){return(t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)<=n*n}(t,this.kt.Is[0],n)?this.ph:null;for(var h=1;h<s;h++)if(_(this.kt.Is[h-1],this.kt.Is[h],t)._<=n)return this.ph;return this.kt.m&&s>0&&_(this.kt.Is[0],this.kt.Is[s-1],t)._<=n?this.ph:this.kt.m&&M(t,this.kt.Is)?this.Go:null},i.prototype.gt=function(t,i){var n,s;if(null!==this.kt&&this.kt.Is){var h=this.kt.Is.length,r=this.kt.yh.style||0,e=this.kt.yh.join||"round",u=this.kt.yh.cap||"butt",o=this.kt.yh.color||"white",l=this.kt.yh.width||1;if(1===h)return this.Qo(t,this.kt.Is[0],h/2,o);t.beginPath(),t.lineCap=u,t.lineJoin=e,t.lineWidth=l,t.strokeStyle=o,g(t,r),t.moveTo(this.kt.Is[0].x,this.kt.Is[0].y);for(var a=0,f=this.kt.Is;a<f.length;a++){var c=f[a];t.lineTo(c.x,c.y)}if(this.kt.m&&(t.fillStyle=this.kt.m.color,t.fill()),l>0&&t.stroke(),h>1){var v;if("butt"!==u&&(t.lineCap="butt"),1===(null===(n=this.kt.yh.end)||void 0===n?void 0:n.left))T((v=this.tl(this.kt.Is[1],this.kt.Is[0],l,u))[0],v[1],t,l,1);if(1===(null===(s=this.kt.yh.end)||void 0===s?void 0:s.right))T((v=this.tl(this.kt.Is[h-2],this.kt.Is[h-1],l,u))[0],v[1],t,l,1)}}},i.prototype.Qo=function(t,i,n,s){0===n&&(t.beginPath(),t.fillStyle=s,t.arc(i.x,i.y,n,0,2*Math.PI,!0),t.fill(),t.closePath())},i.prototype.tl=function(t,i,n,s){var h=i.subtract(t),r=h.length();if("butt"===s||r<1)return[t,i];var e=r+n/2;return[t,h.scaled(e/r).add(t)]},i}(ot),on=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.il=new un,s.ji=null,s}return U(i,t),i.prototype.$i=function(){if(t.prototype.$i.call(this),this.ji=null,0!==this.Ps.length){for(var i=this.cs.nl(),n=Math.max(1,this.cs.sl()),s=[this.Ps[0]],h=1;h<this.Ps.length;h++){for(var r=this.Ps[h].subtract(this.Ps[h-1]),e=r.length(),u=Math.min(5,Math.floor(e/n)),o=r.normalized().scaled(e/u),l=0;l<u-1;l++)s.push(this.Ps[h-1].add(o.scaled(l)));s.push(this.Ps[h])}var a=this.hl(s,n);this.il.xt({yh:i.line,m:i.background,Is:a});var f=new ut;f.ft(this.il),this.ji=f}},i.prototype.hl=function(t,i){var n=new Array(t.length);if(1===t.length)return t;for(var s=0;s<t.length;s++){for(var r=new h(0,0),e=0;e<i;e++){var u=Math.max(s-e,0),o=Math.min(s+e,t.length-1);r=(r=r.add(t[u])).add(t[o])}n[s]=r.scaled(.5/i)}return n.push(t[t.length-1]),n},i}(sn),ln=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Js="Brush",h.ah([new on(h,i)]),h}return U(i,t),i.prototype.Rs=function(){return-1},i.prototype.sl=function(){return 5},i.prototype.nl=function(){return this.nt()},i.prototype.Hs=function(i){if(!this.Es){if(this.Fs=null,this.Ps.length>0){var n=this.Ps[this.Ps.length-1],s=E(this.$s(n));if(E(this.$s(i)).subtract(s).length()<2)return}return t.prototype.Hs.call(this,i)}},i.prototype.lh=function(){return!1},i.prototype.oh=function(){return!0},i}(Kt),an=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.rl=new ti,s.el=new ti,s.ji=null,s.rl.gh(new Jt(Xt.wh)),s.el.gh(new Jt(Xt.wh)),s}return U(i,t),i.prototype.$i=function(i,n){this.ji=null;var s=this.cs.Jt(),h=this.Yi.qt();if(s&&!s.dt()&&!h.dt()&&!(this.cs.Is().length<1)){t.prototype.$i.call(this);var r=this.cs.nt();if(!(this.Ps.length<1)){var e=this.Ps[0],u=new Zi(e.x,i,0),o=new Zi(e.x,0,1),l=new Zi(0,e.y,0),a=new Zi(n,e.y,1),f={vu:!1,du:!1},c={vu:0,du:0},v=new ut;this.rl.xt({yh:q(q({},Zt(r.line)),{end:c,extend:f}),Is:[u,o]}),this.el.xt({yh:q(q({},Zt(r.line)),{end:c,extend:f}),Is:[l,a]}),v.ft(this.rl),v.ft(this.el),this.Ro(v),this.ji=v}}},i}(sn),fn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Js="CrossLine",h.ah([new an(h,i)]),h}return U(i,t),i.prototype.Rs=function(){return 1},i.prototype.ks=function(){return this.nt().line.color},i.prototype.gs=function(){return this.nt().line.color},i}(Kt),cn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Js="ExtendedLine",i}return U(i,t),i}(rn),vn=function(){function t(t,i){this.Go=i||new Jt(Xt.Mh),this.ph=t||new Jt(Xt.wh),this.kt=null}return t.prototype.xt=function(t){this.kt=t},t.prototype.Mt=function(t,i){if(null===this.kt||this.kt.points.length<2)return null;var n=new h(t.x*i.bt,t.y*i.bt),s=this.ul(i),r=s[0],e=s[1],u=new h(e.x,r.y),o=new h(r.x,e.y),l=this.ol(n,r,u,i);if(null!==l)return l;var a=this.ol(n,o,e,i);if(null!==a)return a;if(_(u,e,n)._<=3)return this.ph;if(_(r,o,n)._<=3)return this.ph;var f=this.ll(n,r,e,i);return this.kt.hitTestBackground&&null!==f?f:null},t.prototype._t=function(t,i){var n,s,r,e,u,o,l,a=(null===(s=null===(n=this.kt)||void 0===n?void 0:n.border)||void 0===s?void 0:s.width)||0,f=null===(e=null===(r=this.kt)||void 0===r?void 0:r.border)||void 0===e?void 0:e.color,c=null===(o=null===(u=this.kt)||void 0===u?void 0:u.background)||void 0===o?void 0:o.color;if(!(null===this.kt||this.kt.points.length<2||a<=0&&!c)){t.save();var v=a?Math.max(1,Math.floor(a*i.bt)):0,d=(null===(l=this.kt.border)||void 0===l?void 0:l.style)||0,_=this.ul(i),w=_[0],M=_[1],b=this.kt.extend||{};!function(t,i,n,s,r,e,u,o,l,a,f){void 0===e&&(e=0);var c=l?0:i.x,v=a?f:n.x;if(void 0!==s&&(t.fillStyle=s,t.fillRect(c,i.y,v-c,n.y-i.y)),void 0!==r&&e>0){t.beginPath(),g(t,u||0);var d=new h(0,0),_=new h(0,0),w=new h(0,0),M=new h(0,0);switch(o){case"outer":w=new h(0,p=.5*e),M=new h(0,p),d=new h(p,-e),_=new h(p,-e);break;case"center":var b=e%2?.5:0,m=e%2?.5:1;w=new h((p=.5*e)-b,-b),M=new h(m+p,-b),d=new h(-b,b+p),_=new h(m,b+p);break;case"inner":var p;w=new h(0,-(p=.5*e)),M=new h(1,-p),d=new h(-p,e),_=new h(1-p,e)}t.lineWidth=e,t.strokeStyle=r,t.moveTo(c-w.x,i.y-w.y),t.lineTo(v+M.x,i.y-M.y),t.moveTo(n.x+_.x,i.y+_.y),t.lineTo(n.x+_.x,n.y-_.y),t.moveTo(c-w.x,n.y+w.y),t.lineTo(v+M.x,n.y+M.y),t.moveTo(i.x-d.x,i.y+d.y),t.lineTo(i.x-d.x,n.y-d.y),t.stroke()}}(t,w,M,c,f,v,d,"center",!!b.left,!!b.right,i.al),t.restore()}},t.prototype.ul=function(t){var i=E(this.kt).points,n=i[0],s=i[1],r=t.bt,e=Math.min(n.x,s.x),u=Math.max(n.x,s.x),o=Math.min(n.y,s.y),l=Math.max(n.y,s.y),a=Math.round(e*r),f=Math.round(u*r),c=Math.round(o*r),v=Math.round(l*r);return[new h(a,c),new h(f,v)]},t.prototype.fl=function(t,i,n){var s,r,e=E(this.kt);if(u(t,i))return null;var o=n.al,l=Math.min(t.x,i.x),a=Math.max(t.x,i.x),f=(null===(s=e.extend)||void 0===s?void 0:s.left)?0:Math.max(l,0),c=(null===(r=e.extend)||void 0===r?void 0:r.right)?o:Math.min(a,o);return f>c||c<=0||f>=o?null:[new h(f,t.y),new h(c,i.y)]},t.prototype.ol=function(t,i,n,s){var h=this.fl(i,n,s);return null!==h&&_(h[0],h[1],t)._<=3?this.ph:null},t.prototype.ll=function(t,i,n,s){var h=this.fl(i,n,s);return null!==h&&w(t,new r(h[0],h[1]))?this.Go:null},t}(),dn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.cl=[],s.vl=[],s.dl=[],s.ji=null,s}return U(i,t),i.prototype.$i=function(){this.ji=null,this.Ui=!1;var i=this.cs.Jt(),n=this.Yi.qt();if(i&&!i.dt()&&!n.dt()){var s=n.Jo();if(null!==s){var h=this.cs.Is();if(!(h.length<2)){var r=this.cs.nt();if(!(Math.max(h[0].timestamp,h[1].timestamp)<s.from.Ji)||r.extend.left||r.extend.right){if(t.prototype.$i.call(this),this.Ps.length<2)return;for(var e=new ut,u=Math.min(this.Ps[0].x,this.Ps[1].x),o=Math.max(this.Ps[0].x,this.Ps[1].x),l=this._l(this.cs.Is()[0].price,this.cs.Is()[1].price,r.levels),a=0,f=-1;a<l.length;a++,f++){this.dl[a]||(this.dl.push(new ti),this.vl.push(new si));var c=[new Zi(u,l[a].xi,0),new Zi(o,l[a].xi,0)];this.dl[a].xt({yh:q(q({},r.line),{extend:r.extend,color:r.levels[a].color}),Is:c}),this.vl[a].xt({ki:{alignment:"right",value:"".concat(r.levels[a].coeff,"(").concat(l[a].Dt,")"),font:{color:r.levels[a].color,size:11,family:nt},box:{alignment:{horizontal:"right",vertical:"middle"}}},Is:c}),e.ft(this.vl[a]),e.ft(this.dl[a]),f<0||(this.cl[f]||this.cl.push(new vn),this.cl[f].xt(q(q({},r.line),{extend:r.extend,background:{color:I(r.levels[a].color,.2)},points:[new Zi(u,l[a-1].xi,0),new Zi(o,l[a].xi,0)]})),e.ft(this.cl[f]))}this.Ro(e),this.ji=e}}}}},i.prototype._l=function(t,i,n){var s,h,r=(null===(h=null===(s=this.cs.ps())||void 0===s?void 0:s.Kt())||void 0===h?void 0:h.Gt)||0,e=this.cs.Jt(),u=i-t;return e&&r?n.map((function(t){var n=i-t.coeff*u;return{xi:e.Xt(n,r),Dt:e.Ii(n,r)}})):[]},i}(sn),_n=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Js="FibRetracement",h.ah([new dn(h,i)]),h}return U(i,t),i.prototype.Rs=function(){return 2},i}(Kt),wn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Js="Highlighter",i}return U(i,t),i.prototype.nl=function(){var t=this.nt();return{visible:t.visible,line:{width:20,cap:"round",join:"round",style:0,color:t.line.color,end:{left:0,right:0}}}},i}(ln),Mn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Zo=new ti,s.Xo=new si,s.ji=null,s.Zo.gh(new Jt(Xt.wh)),s}return U(i,t),i.prototype.$i=function(i,n){this.ji=null;var s=this.cs.Jt(),r=this.Yi.qt();if(s&&!s.dt()&&!r.dt()){var e=this.cs.Is();if(!(e.length<1)){var u=r.Zs(0),o=r.Zs(n),l=this.cs.nt(),a=l.line.extend||{},f=a.left,c=a.right;if(!(!f&&e[0].timestamp>o.Ji||!c&&e[0].timestamp<u.Ji)){if(t.prototype.$i.call(this),this.Ps.length<1)return;var v=this.Ps[0],d=new Zi(f?0:v.x,v.y,0),_=new Zi(c?n:v.x,v.y,1);if(Math.floor(d.x)===Math.floor(_.x)||Math.max(d.x,_.x)<=0||_.x<d.x)return;f&&c&&(v.x=n/2,v.co=!0);var w=new ut;if(this.Zo.xt({yh:q(q({},Zt(l.line)),{end:{vu:0,du:0}}),Is:[d,_]}),w.ft(this.Zo),l.text.value){var M=Math.atan((_.y-d.y)/(_.x-d.x)),b=l.text.box.alignment.horizontal,m="left"===b?d.clone():"right"===b?_.clone():new h((d.x+_.x)/2,(d.y+_.y)/2),p=Zt(l.text);p.box=q(q({},p.box),{angle:M}),this.Xo.xt({ki:p,Is:[m]}),w.ft(this.Xo)}this.Ro(w),this.ji=w}}}},i}(sn),bn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Js="HorizontalLine",h.ah([new Mn(h,i)]),h}return U(i,t),i.prototype.Rs=function(){return 1},i.prototype.fn=function(){return[]},i.prototype.ys=function(){return[]},i.prototype.gs=function(){return this.nt().line.color},i}(Kt),mn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Js="HorizontalRay",i}return U(i,t),i}(bn),pn=function(t){function i(i,n){var s=t.call(this)||this;return s.Go=n||new Jt(Xt.Mh),s.ph=i||new Jt(Xt.wh),s.kt=null,s}return U(i,t),i.prototype.xt=function(t){this.kt=t},i.prototype.Mt=function(t,i){if(null===this.kt||this.kt.points.length<2)return null;var n=this.kt.points,s=n[0],h=n[1],r=this.ol(t,s,h,i);if(null!==r)return r;if(4===this.kt.points.length){var e=this.kt.points,u=e[2],o=e[3],l=this.ol(t,u,o,i);if(null!==l)return l;if(this.kt.showMiddleLine){var a=s.add(u).scaled(.5),f=h.add(o).scaled(.5),c=this.ol(t,a,f,i);if(null!==c)return c}}return this.kt.hitTestBackground?this.ll(t):null},i.prototype.gt=function(t,i){var n,s,h,r,e,u;if(!(null===this.kt||this.kt.points.length<2)){g(t,(null===(n=this.kt.channelLine)||void 0===n?void 0:n.style)||0),t.strokeStyle=(null===(s=this.kt.channelLine)||void 0===s?void 0:s.color)||"transparent",t.lineWidth=(null===(h=this.kt.channelLine)||void 0===h?void 0:h.width)||0,t.lineCap="butt";var o=this.kt.points,l=o[0],a=o[1];if(this.wl(t,l,a,i),4===this.kt.points.length){var f=this.kt.points,c=f[2],v=f[3];if(this.wl(t,c,v,i),this.Ml(t,this.kt.points,i),this.kt.showMiddleLine){g(t,(null===(r=this.kt.middleLine)||void 0===r?void 0:r.style)||0),t.strokeStyle=(null===(e=this.kt.middleLine)||void 0===e?void 0:e.color)||"transparent",t.lineWidth=(null===(u=this.kt.middleLine)||void 0===u?void 0:u.width)||0;var d=l.add(c).scaled(.5),_=a.add(v).scaled(.5);this.wl(t,d,_,i)}}}},i.prototype.wl=function(t,i,n,s){var h=this.fl(i,n,s);null!==h&&C(t,h[0].x,h[0].y,h[1].x,h[1].y)},i.prototype.ol=function(t,i,n,s){var h=this.fl(i,n,s);return null!==h&&_(h[0],h[1],t)._<=3?this.ph:null},i.prototype.fl=function(t,i,n){var s,h,r=E(this.kt);return N(t,i,n.Ni,n.Ch,!!(null===(s=r.extend)||void 0===s?void 0:s.left),!!(null===(h=r.extend)||void 0===h?void 0:h.right))},i.prototype.Ml=function(t,i,n){var s,r,e,o,l,a,f=E(this.kt),c=i[0],v=i[1],_=i[2],w=i[3];if(!u(c,v)&&!u(_,w)&&!(n.Ni<=0||n.Ch<=0||d(c,v,_)._<1e-6||d(c,v,w)._<1e-6)){var M=n.Ni,b=n.Ch,m=[new h(0,0),new h(M,0),new h(M,b),new h(0,b)];if(m=this.bl(m,c,v,w),(null===(s=f.extend)||void 0===s?void 0:s.right)||(m=this.bl(m,v,w,_)),m=this.bl(m,w,_,c),(null===(r=f.extend)||void 0===r?void 0:r.left)||(m=this.bl(m,_,c,v)),null!==m){t.beginPath(),t.moveTo(m[0].x,m[0].y);for(var p=1;p<m.length;p++)t.lineTo(m[p].x,m[p].y);t.fillStyle=(null===(o=null===(e=this.kt)||void 0===e?void 0:e.background)||void 0===o?void 0:o.color)||"transparent",(null===(a=null===(l=this.kt)||void 0===l?void 0:l.background)||void 0===a?void 0:a.color)&&t.fill()}}},i.prototype.ll=function(t){var i,n,s=E(this.kt);if(4!==s.points.length)return null;var h=s.points,r=h[0],e=h[1],u=h[2],o=(e.y-r.y)/(e.x-r.x),l=u.y+o*(t.x-u.x),a=r.y+o*(t.x-r.x),f=Math.max(a,l),c=Math.min(a,l),v=Math.max(r.x,e.x),d=Math.min(r.x,e.x);return!(null===(i=s.extend)||void 0===i?void 0:i.left)&&t.x<d||!(null===(n=s.extend)||void 0===n?void 0:n.right)&&t.x>v?null:t.y>=c&&t.y<=f?this.Go:null},i.prototype.bl=function(t,i,n,s){return null!==t?function(t,i){for(var n=[],s=0;s<t.length;++s){var h=t[s],r=t[(s+1)%t.length],e=o(h,r);if(a(h,i))m(n,h),a(r,i)||null!==(u=b(e,i.h))&&m(n,u);else if(a(r,i)){var u;null!==(u=b(e,i.h))&&m(n,u)}}return n.length>=3?n:null}(t,(h=o(i,n),r=s,new e(h,h.o*r.x+h.l*r.y+h.v>0))):null;var h,r},i}(ot),gn=[Ui.wu,Ui.wu,Ui.wu,Ui.wu,Ui.gu,Ui.gu],yn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.ml=new pn,s.ji=null,s}return U(i,t),i.prototype.$i=function(){t.prototype.$i.call(this),this.ji=null;var i=this.cs.Jt();if(i&&!i.dt()&&0!==this.cs.Is().length&&!(this.Ps.length<=1)){var n=this.Ps[0],s=this.Ps[1],h=null,r=null;if(3===this.Ps.length){var e=this.Ps[2].y-this.Ps[0].y;h=new Zi(n.x,n.y+e,2),r=new Zi(s.x,s.y+e,3)}var u=h&&r?[n,s,h,r]:[n,s],o=this.cs.nt();this.ml.xt(q(q({},Zt(o)),{points:u,hitTestBackground:!1}));var l=new ut;l.ft(this.ml);var a=[];if(this.Ps[0]&&a.push(new Zi(n.x,n.y,0)),this.Ps[1]&&a.push(new Zi(s.x,s.y,1)),h&&r){a.push(new Zi(h.x,h.y,2),new Zi(r.x,r.y,3));var f=h.add(r).scaled(.5);f.dh=4,f.co=!0,a.push(f);var c=a[0].add(a[1]).scaled(.5);c.co=!0,c.dh=5,a.push(c)}var v={Is:a,wo:gn};l.ft(this.zo(v,0)),this.ji=l}},i}(sn),kn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Js="ParallelChannel",h.Ns.push(new Ut(h,3)),h.ah([new yn(h,i)]),h}return U(i,t),i.prototype.Rs=function(){return 3},i.prototype.Hs=function(i){2===this.Ps.length?t.prototype.Hs.call(this,this.pl(i)):t.prototype.Hs.call(this,i)},i.prototype.Is=function(){var i=t.prototype.Is.call(this);return 3!==i.length||this.zs()?i:[i[0],i[1],this.pl(i[2])]},i.prototype.Us=function(i,n){if(!(this.Ps[0].timestamp===this.Ps[1].timestamp&&i>=4)){var s=E(this.$s(this.Ps[0])),h=E(this.$s(this.Ps[1])),r=E(this.$s(n)),e=this.gl()||0,u=E(this.Jt()),o=this.ps(),l=B(null===o?void 0:o.Kt());if(0===i)t.prototype.Us.call(this,i,n),this.Ps[2].price=u.Sn(r.y+e,l.Gt);else if(1===i)t.prototype.Us.call(this,i,n);else if(2===i)t.prototype.Us.call(this,i,n),this.Ps[0].timestamp=n.timestamp,this.Ps[0].price=u.Sn(r.y-e,l.Gt);else if(3===i)this.Ps[1].timestamp=n.timestamp,this.Ps[1].price=u.Sn(r.y-e,l.Gt);else if(4===i){var a=h.subtract(s),f=(r.x-s.x)/a.x,c=r.y-s.addScaled(a,f).y;this.Ps[2].price=u.Sn(s.y+c,l.Gt)}else if(5===i){a=h.subtract(s),f=(r.x-s.x)/a.x,c=r.y-s.addScaled(a,f).y;this.Ps[0].price=u.Sn(s.y+c,l.Gt),this.Ps[1].price=u.Sn(h.y+c,l.Gt)}}},i.prototype.js=function(i){if(i<3)return t.prototype.js.call(this,i);var n=this.$s(this.Ps[0]),s=this.$s(this.Ps[1]),r=this.$s(this.Ps[2]);if(!n||!s||!r)return null;switch(i){case 3:var e=r.y-n.y,u=s.add(new h(0,e));return this.Ks(u);case 4:e=r.y-n.y,u=s.add(new h(0,e));var o=r.add(u).scaled(.5);return this.Ks(o);case 5:var l=n.add(s).scaled(.5);return this.Ks(l)}return null},i.prototype.ds=function(){return this.yl()},i.prototype.ys=function(){return this.yl().slice(0,2)},i.prototype.gl=function(){var t=this.$s(this.Ps[2]),i=this.$s(this.Ps[0]);return t&&i?t.y-i.y:null},i.prototype.yl=function(){var t=this.Is(),i=this.Ps[0]?this.$s(this.Ps[0]):null,n=this.Ps[1]?this.$s(this.Ps[1]):null,s=this.Ps[2]?this.$s(this.Ps[2]):null;if(i&&n&&s){var r=n.y-i.y,e=s.add(new h(0,r));t.push(E(this.Ks(e)))}return t},i.prototype.pl=function(t){if(this.Ps.length<2||this.Ps[1].timestamp===this.Ps[0].timestamp)return t;var i=E(this.$s(t)),n=E(this.$s(this.Ps[1])),s=E(this.$s(this.Ps[0])),r=n.subtract(s),e=(i.x-s.x)/r.x,u=s.addScaled(r,e),o=i.y-u.y,l=s.add(new h(0,o));return E(this.Ks(l))},i}(Kt),xn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.il=new un,s.ji=null,s}return U(i,t),i.prototype.$i=function(){t.prototype.$i.call(this),this.ji=null;var i=this.cs.nt();this.il.xt({yh:Zt(i.line),Is:this.Ps});var n=new ut;n.ft(this.il),this.ji=n,this.Ro(n)},i}(sn),Cn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Js="Path",h.ah([new xn(h,i)]),h}return U(i,t),i.prototype.Rs=function(){return-1},i.prototype.Os=function(){if(this.Ps.length>0){var t=this.Ps[this.Ps.length-1],i=this.Ps[this.Ps.length-2],n=E(this.$s(t)),s=E(this.$s(i));n.subtract(s).length()<10&&(this.Ps.pop(),this.Es=!0,this.Ls=!0,this.Fs=null)}},i}(Kt),Nn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Js="Ray",i}return U(i,t),i}(rn),Sn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.kl=new vn,s.Xo=new si,s.ji=null,s}return U(i,t),i.prototype.$i=function(){this.ji=null,this.Ui=!1;var i=this.cs.Jt(),n=this.Yi.qt();if(i&&!i.dt()&&!n.dt()){var s=n.Jo();if(null!==s){var h=this.cs.Is();if(!(h.length<2)){var r=this.cs.nt();if(!(Math.max(h[0].timestamp,h[1].timestamp)<s.from.Ji)||r.rectangle.extend.left||r.rectangle.extend.right){if(t.prototype.$i.call(this),this.Ps.length<2)return;var e=new ut;this.kl.xt(q(q({},Zt(r.rectangle)),{points:this.Ps,hitTestBackground:!1})),e.ft(this.kl);var u=this.Ps[0],o=this.Ps[1];if(r.text.value){var l=Math.min(u.x,o.x),a=Math.max(u.x,o.x),f=Math.min(u.y,o.y),c=Math.max(u.y,o.y),v=u.clone(),d=r.text.font.size/3,_=0;switch(r.text.box.alignment.vertical){case"middle":v.y=(f+c)/2,_=d;break;case"top":v.y=c;break;case"bottom":v.y=f}switch(r.text.box.alignment.horizontal){case"center":v.x=(l+a)/2;break;case"left":v.x=l;break;case"right":v.x=a}var w=Zt(r.text);w.box=q(q({},w.box),{padding:{y:d,x:_}}),"middle"===r.text.box.alignment.vertical&&(w.wordWrapWidth=a-l-2*_,w.box.maxHeight=c-f),this.Xo.xt({ki:w,Is:[v]}),e.ft(this.Xo)}this.xl(u,o,e),this.ji=e}}}}},i.prototype.xl=function(t,i,n){var s=new Zi(t.x,i.y,2),h=new Zi(i.x,t.y,3),r=new Zi(t.x,.5*(t.y+i.y),4,!0),e=new Zi(i.x,.5*(t.y+i.y),5,!0),u=new Zi(.5*(t.x+i.x),t.y,6,!0),o=new Zi(.5*(t.x+i.x),i.y,7,!0),l=t.x-i.x,a=t.y-i.y,f=Math.sign(l*a),c={Is:[t,i,s,h,r,e,u,o],wo:[f<0?Ui.ku:Ui.xu,f<0?Ui.ku:Ui.xu,f>0?Ui.ku:Ui.xu,f>0?Ui.ku:Ui.xu,Ui.yu,Ui.yu,Ui.gu,Ui.gu]};n.ft(this.zo(c,0))},i}(sn),Tn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Js="Rectangle",h.ah([new Sn(h,i)]),h}return U(i,t),i.prototype.Rs=function(){return 2},i.prototype.Us=function(i,n){switch(i<2&&t.prototype.Us.call(this,i,n),i){case 2:this.Ps[1].price=n.price,this.Ps[0].timestamp=n.timestamp;break;case 3:this.Ps[0].price=n.price,this.Ps[1].timestamp=n.timestamp;break;case 4:this.Ps[0].timestamp=n.timestamp;break;case 5:this.Ps[1].timestamp=n.timestamp;break;case 6:this.Ps[0].price=n.price;break;case 7:this.Ps[1].price=n.price}},i.prototype.js=function(i){return i<2?t.prototype.js.call(this,i):this.Cl(i)},i.prototype.Cl=function(t){var i=this.Is()[0],n=this.Is()[1];return[{Dt:i.price,Ji:i.timestamp},{Dt:n.price,Ji:n.timestamp},{Dt:n.price,Ji:i.timestamp},{Dt:i.price,Ji:n.timestamp},{Dt:(n.price+i.price)/2,Ji:i.timestamp},{Dt:(n.price+i.price)/2,Ji:n.timestamp},{Dt:i.price,Ji:(n.timestamp+i.timestamp)/2},{Dt:n.price,Ji:(n.timestamp+i.timestamp)/2}][t]},i}(Kt),An=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Xo=new si,s.ji=null,s}return U(i,t),i.prototype.$i=function(i,n){this.ji=null;var s=this.cs.Jt(),h=this.Yi.qt();if(s&&!s.dt()&&!h.dt()&&(t.prototype.$i.call(this),!(this.Ps.length<1))){var r=Zt(this.cs.nt().text);r.box.alignment={vertical:"bottom",horizontal:"center"},r.alignment="center";var e=this.Ps[0].clone(),u=new ut;this.Xo.xt({ki:r,Is:[e]}),u.ft(this.Xo),this.Ro(u),this.ji=u}},i}(sn),Ln=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Js="Text",h.ah([new An(h,i)]),h}return U(i,t),i.prototype.Rs=function(){return 1},i}(Kt),En=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.kt=null,i}return U(i,t),i.prototype.xt=function(t){this.kt=t},i.prototype.Mt=function(t){if(null===this.kt||this.kt.points.length<2)return null;var i=this.kt.points,n=i[0],s=i[1];if(_(n,s,t)._<=Gt)return new Jt(Xt.wh);if(3!==this.kt.points.length)return null;var h=this.kt.points[2];return _(s,h,t)._<=Gt||_(h,n,t)._<=Gt?new Jt(Xt.wh):this.kt.hitTestBackground&&function(t,i,n,s){var h=i.add(n).scaled(.5).add(s).scaled(.5);return null===v(i,n,h,t)&&null===v(n,s,h,t)&&null===v(s,i,h,t)}(t,n,s,h)?new Jt(Xt.Mh):null},i.prototype.gt=function(t){var i,n,s,h;if(!(null===this.kt||this.kt.points.length<2)){var r=this.kt.points,e=r[0],u=r[1],o=2===this.kt.points.length?u:this.kt.points[2];t.lineCap="butt",t.lineWidth=(null===(i=this.kt.border)||void 0===i?void 0:i.width)||0,t.strokeStyle=(null===(n=this.kt.border)||void 0===n?void 0:n.color)||"transparent",void 0!==(null===(s=this.kt.border)||void 0===s?void 0:s.style)&&g(t,this.kt.border.style),t.beginPath(),t.fillStyle=(null===(h=this.kt.background)||void 0===h?void 0:h.color)||"transparent",t.moveTo(e.x,e.y),t.lineTo(u.x,u.y),t.lineTo(o.x,o.y),t.lineTo(e.x,e.y),t.fill(),t.stroke()}},i}(ot),Bn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Nl=new En,s.ji=null,s}return U(i,t),i.prototype.$i=function(){var i=this.cs.nt();t.prototype.$i.call(this),this.ji=null,this.Nl.xt(q(q({},i.triangle),{points:this.Ps,hitTestBackground:!1}));var n=new ut;n.ft(this.Nl),this.Ro(n),this.ji=n},i}(sn),Dn=function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Js="Triangle",h.ah([new Bn(h,i)]),h}return U(i,t),i.prototype.Rs=function(){return 3},i}(Kt),Fn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.Zo=new ti,s.Xo=new si,s.ji=null,s.Zo.gh(new Jt(Xt.wh)),s}return U(i,t),i.prototype.$i=function(i,n){this.ji=null;var s=this.cs.Jt(),r=this.Yi.qt();if(s&&!s.dt()&&!r.dt()){var e=this.cs.Is();if(!(e.length<1)){var u=r.Zs(0),o=r.Zs(n),l=this.cs.nt();if(!(e[0].timestamp>o.Ji||e[0].timestamp<u.Ji)){if(t.prototype.$i.call(this),this.Ps.length<1)return;var a=this.Ps[0],f=new Zi(a.x,i,0),c=new Zi(a.x,0,1);a.y=i/2,a.co=!0;var v=new ut;if(this.Zo.xt({yh:q(q({},Zt(l.line)),{end:{vu:0,du:0},extend:{vu:!1,du:!1}}),Is:[f,c]}),v.ft(this.Zo),l.text.value){var d=Math.atan((c.y-f.y)/(c.x-f.x)),_=l.text.box.alignment.horizontal,w="left"===_?f.clone():"right"===_?c.clone():new h((f.x+c.x)/2,(f.y+c.y)/2),M=Zt(l.text);M.box=q(q({},M.box),{angle:d}),this.Xo.xt({ki:M,Is:[w]}),v.ft(this.Xo)}this.Ro(v),this.ji=v}}}},i}(sn),Pn={FibRetracement:_n,ParallelChannel:kn,HorizontalLine:bn,VerticalLine:function(t){function i(i,n,s){void 0===s&&(s=[]);var h=t.call(this,i,n,s)||this;return h.Js="VerticalLine",h.ah([new Fn(h,i)]),h}return U(i,t),i.prototype.Rs=function(){return 1},i.prototype.Vn=function(){return[]},i.prototype.ds=function(){return[]},i.prototype.ks=function(){return this.nt().line.color},i}(Kt),Highlighter:wn,CrossLine:fn,TrendLine:rn,Rectangle:Tn,Triangle:Dn,Brush:ln,Path:Cn,Text:Ln,Ray:Nn,Arrow:en,ExtendedLine:cn,HorizontalRay:mn},Wn=function(){function t(t){this.Sl=null,this.Tl=null,this.Al=null,this.Yi=t}return t.prototype.Ll=function(t,i){this.Tl=i||{},this.Al=t,this.Yi.jt().forEach((function(t){t instanceof Kt&&(t.hh(!1),t.sh(!1),t.eh(!1))})),this.Yi.uo()},t.prototype.El=function(){return null!==this.Al},t.prototype.To=function(t,i,n){var s;if(this.Al&&this.Tl&&(n.Lo=!0,6===i)){var h=(null===(s=t.Xs().jt()[0].Jt())||void 0===s?void 0:s.en())||t.Xs().ci().Bl(),r=K(Q(It[this.Al]),this.Tl||{});this.Sl=new Pn[this.Al](this.Yi,r,[]),t.Xs().qe(this.Sl,h),this.Al=null,this.Tl=null}},t}(),Rn=function(){function t(t){this.Dl=t}return t.prototype.format=function(t){var i="";return t<0&&(i="-",t=-t),t<995?i+this.Fl(t):t<999995?i+this.Fl(t/1e3)+"K":t<999999995?(t=1e3*Math.round(t/1e3),i+this.Fl(t/1e6)+"M"):(t=1e6*Math.round(t/1e6),i+this.Fl(t/1e9)+"B")},t.prototype.Fl=function(t){var i=Math.pow(10,this.Dl);return((t=Math.round(t*i)/i)>=1e-15&&t<1?t.toFixed(this.Dl).replace(/\.?0+$/,""):String(t)).replace(/(\.[1-9]*)0+$/,(function(t,i){return i}))},t}();function zn(t,i,n,s){if(0!==i.length)for(var h={},r=s.from;r<s.to;++r){var e=i[r].$;if(!h[e||"undefiend"]){Object.keys(h).length&&(t.stroke(),t.closePath(),t.beginPath());var u=i[r].St,o=i[r].Tt;t.moveTo(u,o),t.strokeStyle=null!=e?e:t.strokeStyle,h[e||"undefiend"]=!0;for(var l=r+1;l<s.to;++l){var a=i[l];if(i[l-1].$===e){if(1===n){var f=i[l-1].Tt,c=a.St;t.lineTo(c,f)}else if(2===n){var v=i[l-1].St,d=a.Tt;t.lineTo(v,d)}t.lineTo(a.St,a.Tt)}else t.moveTo(a.St,a.Tt)}}}}var On=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.kt=null,i}return U(i,t),i.prototype.xt=function(t){this.kt=t},i.prototype.gt=function(t){if(null!==this.kt&&0!==this.kt.Nt.length&&null!==this.kt.Ct){if(t.lineCap="butt",t.lineJoin="round",t.lineWidth=this.kt.ui,g(t,this.kt.oi),t.lineWidth=1,t.beginPath(),1===this.kt.Nt.length){var i=this.kt.Nt[0],n=this.kt.Pl/2;t.moveTo(i.St-n,this.kt.Wl),t.lineTo(i.St-n,i.Tt),t.lineTo(i.St+n,i.Tt),t.lineTo(i.St+n,this.kt.Wl)}else t.moveTo(this.kt.Nt[this.kt.Ct.from].St,this.kt.Wl),t.lineTo(this.kt.Nt[this.kt.Ct.from].St,this.kt.Nt[this.kt.Ct.from].Tt),zn(t,this.kt.Nt,this.kt.Rl,this.kt.Ct),this.kt.Ct.to>this.kt.Ct.from&&(t.lineTo(this.kt.Nt[this.kt.Ct.to-1].St,this.kt.Wl),t.lineTo(this.kt.Nt[this.kt.Ct.from].St,this.kt.Wl));t.closePath(),t.fillStyle=this.zl(t),t.fill()}},i}(ot),Vn=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return U(i,t),i.prototype.zl=function(t){var i=this.kt,n=t.createLinearGradient(0,0,0,i.Ol);return n.addColorStop(0,i.Vl),n.addColorStop(1,i.Il),n},i}(On),In=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.kt=null,i}return U(i,t),i.prototype.xt=function(t){this.kt=t},i.prototype.gt=function(t){if(null!==this.kt&&0!==this.kt.Nt.length&&null!==this.kt.Ct)if(t.lineCap="butt",t.lineWidth=this.kt.ui,g(t,this.kt.oi),t.strokeStyle=this.Hl(t),t.lineJoin="round",t.beginPath(),1===this.kt.Nt.length){var i=this.kt.Nt[0];t.moveTo(i.St-this.kt.Pl/2,i.Tt),t.lineTo(i.St+this.kt.Pl/2,i.Tt),void 0!==i.$&&(t.strokeStyle=i.$)}else zn(t,this.kt.Nt,this.kt.Rl,this.kt.Ct)},i.prototype.jl=function(t,i){t.beginPath(),zn(t,i.Nt,i.Rl,i.Ct),t.stroke()},i}(ot),Hn=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return U(i,t),i.prototype.jl=function(t,i){var n,s,h=i.Nt,r=i.Ct,e=i.Rl,u=i.Et;if(0!==h.length&&null!==r){t.beginPath();var o=h[r.from];t.moveTo(o.St,o.Tt);var l=null!==(n=o.$)&&void 0!==n?n:u;t.strokeStyle=l;for(var a=function(i){t.stroke(),t.beginPath(),t.strokeStyle=i,l=i},f=r.from+1;f<r.to;++f){var c=h[f],v=h[f-1],d=null!==(s=c.$)&&void 0!==s?s:u;1===e&&(t.lineTo(c.St,v.Tt),d!==l&&(a(d),t.moveTo(c.St,v.Tt))),t.lineTo(c.St,c.Tt),1!==e&&d!==l&&(a(d),t.moveTo(c.St,c.Tt))}t.stroke()}},i.prototype.Hl=function(){return this.kt.Et},i}(In);function jn(t,i,n,s,h){void 0===s&&(s=0),void 0===h&&(h=t.length);for(var r=h-s;0<r;){var e=r>>1,u=s+e;n(t[u],i)?(s=u+1,r-=e+1):r=e}return s}function Un(t,i,n,s,h){void 0===s&&(s=0),void 0===h&&(h=t.length);for(var r=h-s;0<r;){var e=r>>1,u=s+e;n(i,t[u])?r=e:(s=u+1,r-=e+1)}return s}function qn(t,i){return t.Bt<i}function Yn(t,i){return t<i.Bt}function $n(t,i,n){var s=i.vu(),h=i.du(),r=jn(t,s,qn),e=Un(t,h,Yn);if(!n)return{from:r,to:e};var u=r,o=e;return r>0&&r<t.length&&t[r].Bt>=s&&(u=r-1),e>0&&e<t.length&&t[e-1].Bt<=h&&(o=e+1),{from:u,to:o}}var Kn=function(){function t(t,i,n){this.Ui=!0,this.Ul=!0,this.ql=!0,this.Yl=[],this.$l=null,this.Kl=t,this.Yi=i,this.Zl=n}return t.prototype.Ot=function(t){this.Ui=!0,"data"===t&&(this.Ul=!0),"options"===t&&(this.ql=!0)},t.prototype.Xl=function(){this.Ul&&(this.Jl(),this.Ul=!1),this.Ui&&(this.Gl(),this.Ui=!1),this.ql&&(this.Ql(),this.ql=!1)},t.prototype.ta=function(){this.$l=null},t.prototype.Gl=function(){var t=this.Kl.Jt(),i=this.Yi.qt();if(this.ta(),!i.dt()&&!t.dt()){var n=i.bs();if(null!==n&&0!==this.Kl.Yn().ia()){var s=this.Kl.Kt();null!==s&&(this.$l=$n(this.Yl,n,this.Zl),this.na(t,i,s.Gt))}}},t}(),Zn=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return U(i,t),i.prototype.na=function(t,i,n){i.sa(this.Yl,it(this.$l)),t.Ee(this.Yl,n,it(this.$l))},i.prototype.ha=function(t,i){return{Bt:t,Dt:i,St:NaN,Tt:NaN}},i.prototype.Ql=function(){},i.prototype.Jl=function(){var t=this,i=this.Kl.ra();this.Yl=this.Kl.Yn().ea().map((function(n){var s=n.Gt[3];return t.ua(n.oa,s,i)}))},i}(Kn),Xn=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.ai=new ut,s.la=new Vn,s.aa=new Hn,s.ai.ot([s.la,s.aa]),s}return U(i,t),i.prototype.It=function(t,i){if(!this.Kl.$t())return null;var n=this.Kl.nt();return this.Xl(),this.la.xt({Rl:n.lineType,Nt:this.Yl,oi:n.lineStyle,ui:n.lineWidth,Vl:n.topColor,Il:n.bottomColor,Wl:t,Ol:t,Ct:this.$l,Pl:this.Yi.qt().fa()}),this.aa.xt({Rl:n.lineType,Nt:this.Yl,Et:n.lineColor,oi:n.lineStyle,ui:n.lineWidth,Ct:this.$l,Pl:this.Yi.qt().fa()}),this.ai},i.prototype.ua=function(t,i){return this.ha(t,i)},i}(Zn),Jn=function(){function t(){this.ni=null,this.ca=0,this.va=0}return t.prototype.xt=function(t){this.ni=t},t.prototype._t=function(t,i){if(null!==this.ni&&0!==this.ni.Yn.length&&null!==this.ni.Ct){var n=i.bt;if(this.ca=this.da(n),this.ca>=2)Math.max(1,Math.floor(n))%2!=this.ca%2&&this.ca--;this.va=this.ni._a?Math.min(this.ca,Math.floor(n)):this.ca;for(var s=null,h=this.va<=this.ca&&this.ni.fa>=Math.floor(1.5*n),r=this.ni.Ct.from;r<this.ni.Ct.to;++r){var e=this.ni.Yn[r];s!==e.$&&(t.fillStyle=e.$,s=e.$);var u=Math.floor(.5*this.va),o=Math.round(e.St*n),l=o-u,a=this.va,f=l+a-1,c=Math.min(e.Ve,e.Ie),v=Math.max(e.Ve,e.Ie),d=Math.round(c*n)-u,_=Math.round(v*n)+u,w=Math.max(_-d,this.va);t.fillRect(l,d,a,w);var M=Math.ceil(1.5*this.ca);if(h){if(this.ni.wa){var b=o-M,m=Math.max(d,Math.round(e.Oe*n)-u),p=m+a-1;p>d+w-1&&(m=(p=d+w-1)-a+1),t.fillRect(b,m,l-b,p-m+1)}var g=o+M,y=Math.max(d,Math.round(e.He*n)-u),k=y+a-1;k>d+w-1&&(y=(k=d+w-1)-a+1),t.fillRect(f+1,y,g-f,k-y+1)}}}},t.prototype.da=function(t){var i=Math.floor(t);return Math.max(i,Math.floor(function(t,i){return Math.floor(.3*t*i)}(E(this.ni).fa,t)))},t}(),Gn=function(t){function i(i,n){return t.call(this,i,n,!1)||this}return U(i,t),i.prototype.na=function(t,i,n){i.sa(this.Yl,it(this.$l)),t.ze(this.Yl,n,it(this.$l))},i.prototype.Ma=function(t,i,n){return{Bt:t,open:i.Gt[0],high:i.Gt[1],low:i.Gt[2],close:i.Gt[3],St:NaN,Oe:NaN,Ve:NaN,Ie:NaN,He:NaN}},i.prototype.Jl=function(){var t=this,i=this.Kl.ra();this.Yl=this.Kl.Yn().ea().map((function(n){return t.ua(n.oa,n,i)}))},i}(Kn),Qn=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ai=new Jn,i}return U(i,t),i.prototype.It=function(t,i){if(!this.Kl.$t())return null;var n=this.Kl.nt();this.Xl();var s={Yn:this.Yl,fa:this.Yi.qt().fa(),wa:n.openVisible,_a:n.thinBars,Ct:this.$l};return this.ai.xt(s),this.ai},i.prototype.Ql=function(){var t=this;this.Yl.forEach((function(i){i.$=t.Kl.ra().ma(i.Bt).ba}))},i.prototype.ua=function(t,i,n){return q(q({},this.Ma(t,i,n)),{$:n.ma(t).ba})},i}(Gn),ts=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return U(i,t),i.prototype.zl=function(t){var i=this.kt,n=t.createLinearGradient(0,0,0,i.Ol),s=Ci(i.Wl/i.Ol,0,1);return n.addColorStop(0,i.pa),n.addColorStop(s,i.ga),n.addColorStop(s,i.ya),n.addColorStop(1,i.ka),n},i}(On),is=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return U(i,t),i.prototype.Hl=function(t){var i=this.kt,n=t.createLinearGradient(0,0,0,i.Ol),s=Ci(i.Wl/i.Ol,0,1);return n.addColorStop(0,i.Vl),n.addColorStop(s,i.Vl),n.addColorStop(s,i.Il),n.addColorStop(1,i.Il),n},i}(In),ns=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.xa=new ts,s.Ca=new is,s.Ft=new ut,s.Ft.ot([s.xa,s.Ca]),s}return U(i,t),i.prototype.It=function(t,i){if(!this.Kl.$t())return null;var n=this.Kl.Kt();if(null===n)return null;var s=this.Kl.nt();this.Xl();var h=this.Kl.Jt().Xt(s.baseValue.price,n.Gt),r=this.Yi.qt().fa();return this.xa.xt({Nt:this.Yl,pa:s.topFillColor1,ga:s.topFillColor2,ya:s.bottomFillColor1,ka:s.bottomFillColor2,ui:s.lineWidth,oi:s.lineStyle,Rl:s.lineType,Wl:h,Ol:t,Ct:this.$l,Pl:r}),this.Ca.xt({Nt:this.Yl,Vl:s.topLineColor,Il:s.bottomLineColor,ui:s.lineWidth,oi:s.lineStyle,Rl:s.lineType,Wl:h,Ol:t,Ct:this.$l,Pl:r}),this.Ft},i.prototype.ua=function(t,i){return this.ha(t,i)},i}(Zn),ss=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.Na={},i.kt=null,i}return U(i,t),i.prototype.xt=function(t){this.kt=t},i.prototype.gt=function(t){if(null!==this.kt&&0!==this.kt.Nt.length&&null!==this.kt.Ct){this.kt.Sa&&(t.globalCompositeOperation=this.kt.Sa);for(var i=[],n=this.kt.Ct?this.kt.Ct.from:0,s=this.kt.Ct?this.kt.Ct.to:0,h=null,r=null,e=n;e<s;++e){var u=this.kt.Nt[e];null!==h&&(u.Bt-h>1||u.$!==r)&&(i.push([n,u.Bt-h>1?e-1:e]),n=e),h=u.Bt,r=u.$}i.push([n,s?s-1:0]),t.strokeStyle=this.kt.Ta,t.lineWidth=this.kt.yo,t.fillStyle=this.kt.$;for(e=0;e<i.length;++e){var o=i[e][0],l=i[e][1];if(void 0!==this.kt.Nt[o].Vr&&(t.fillStyle=this.kt.Ta,t.fillText(this.kt.Nt[o].Vr,this.kt.Nt[o].St,this.kt.Nt[o].We-4),t.fillStyle=this.kt.$),void 0!==this.kt.Nt[o].$&&(t.fillStyle=this.kt.Nt[o].$),t.beginPath(),t.moveTo(this.kt.Nt[o].St,this.kt.Nt[o].We),this.kt.Nt[0].Aa&&this.kt.Nt[o].We===this.kt.Nt[o].Re&&1===this.kt.Nt.length)t.lineTo(this.kt.Nt[l].La,this.kt.Nt[l].We),t.lineTo(this.kt.Nt[l].La,this.kt.Nt[l].Re),this.kt.yo&&t.stroke();else{for(var a=o;a<=l;a++)t.lineTo(this.kt.Nt[a].St,this.kt.Nt[a].We);this.kt.Nt[0].Aa&&(t.lineTo(this.kt.Nt[l].La,this.kt.Nt[l].We),t.lineTo(this.kt.Nt[l].La,this.kt.Nt[l].Re));for(a=l;a>=o;--a)t.lineTo(this.kt.Nt[a].St,this.kt.Nt[a].Re);t.closePath(),this.kt.$&&t.fill(),this.kt.yo&&t.stroke()}}}},i}(ot),hs=function(t){function i(i,n){return t.call(this,i,n,!0)||this}return U(i,t),i.prototype.na=function(t,i,n){i.sa(this.Yl,it(this.$l)),t.De(this.Yl,n,it(this.$l))},i.prototype.Ql=function(){},i.prototype.Gl=function(){var t=this.Kl.Jt(),i=this.Yi.qt();if(this.ta(),!i.dt()&&!t.dt()){var n=i.bs();if(null!==n&&0!==this.Kl.Yn().ia()){var s=this.Kl.Kt();null!==s&&(this.$l=$n(this.Yl,n,this.Zl),this.na(t,i,s.Gt))}}},i.prototype.Jl=function(){this.Yl=this.Kl.Yn().ea().map((function(t){var i=t.Gt[1],n=t.Gt[2];return{Bt:t.oa,Fe:i,Pe:n,St:NaN,We:NaN,Re:NaN}}))},i}(Kn),rs=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.ai=new ut,s.Ea=new ss,s.ai.ot([s.Ea]),s}return U(i,t),i.prototype.Ba=function(t){this.Ea.Na=t},i.prototype.It=function(t,i){if(!this.Kl.$t())return null;var n=this.Kl.nt();this.Xl();var s={Nt:this.Yl,$:n.color,Ta:n.strokeColor,yo:n.strokeWidth,Sa:n.compositeOperation,wi:i,Ct:this.$l,Pl:this.Yi.qt().fa()};return this.Ea.xt(s),this.ai},i.prototype.na=function(t,i,n){i.Da(this.Yl,this.Ea.Na,it(this.$l)),t.De(this.Yl,n,it(this.$l))},i.prototype.Jl=function(){this.Yl=this.Kl.Yn().ea().map((function(t){var i=t.Gt[1],n=t.Gt[2],s={Bt:t.oa,Fe:i,Pe:n,St:NaN,La:NaN,We:NaN,Re:NaN};return void 0!==t.$&&(s.$=t.$),void 0!==t.en&&(s.en=t.en),void 0!==t.Vr&&(s.Vr=t.Vr),void 0!==t.Aa&&(s.Aa=t.Aa),s}))},i}(hs),es=function(){function t(){this.ni=null,this.ca=0}return t.prototype.xt=function(t){this.ni=t},t.prototype._t=function(t,i){if(null!==this.ni&&0!==this.ni.Yn.length&&null!==this.ni.Ct){var n=i.bt;if(this.ca=function(t,i){if(t>=2.5&&t<=4)return Math.floor(3*i);var n=1-.2*Math.atan(Math.max(4,t)-4)/(.5*Math.PI),s=Math.floor(t*n*i),h=Math.floor(t*i),r=Math.min(s,h);return Math.max(Math.floor(i),r)}(this.ni.fa,n),this.ca>=2)Math.floor(n)%2!=this.ca%2&&this.ca--;var s=this.ni.Yn;this.ni.Fa&&this.Pa(t,s,this.ni.Ct,n),this.ni.Wa&&this.Ra(t,s,this.ni.Ct,this.ni.fa,n);var h=this.za(n);(!this.ni.Wa||this.ca>2*h)&&this.Oa(t,s,this.ni.Ct,n)}},t.prototype.Pa=function(t,i,n,s){if(null!==this.ni){var h="",r=Math.min(Math.floor(s),Math.floor(this.ni.fa*s));r=Math.max(Math.floor(s),Math.min(r,this.ca));for(var e=Math.floor(.5*r),u=null,o=n.from;o<n.to;o++){var l=i[o];l.Va!==h&&(t.fillStyle=l.Va,h=l.Va);var a=Math.round(Math.min(l.Oe,l.He)*s),f=Math.round(Math.max(l.Oe,l.He)*s),c=Math.round(l.Ve*s),v=Math.round(l.Ie*s),d=Math.round(s*l.St)-e,_=d+r-1;null!==u&&(d=Math.max(u+1,d),d=Math.min(d,_));var w=_-d+1;t.fillRect(d,c,w,a-c),t.fillRect(d,f+1,w,v-f),u=_}}},t.prototype.za=function(t){var i=Math.floor(1*t);this.ca<=2*i&&(i=Math.floor(.5*(this.ca-1)));var n=Math.max(Math.floor(t),i);return this.ca<=2*n?Math.max(Math.floor(t),Math.floor(1*t)):n},t.prototype.Ra=function(t,i,n,s,h){if(null!==this.ni)for(var r="",e=this.za(h),u=null,o=n.from;o<n.to;o++){var l=i[o];l.Qt!==r&&(t.fillStyle=l.Qt,r=l.Qt);var a=Math.round(l.St*h)-Math.floor(.5*this.ca),f=a+this.ca-1,c=Math.round(Math.min(l.Oe,l.He)*h),v=Math.round(Math.max(l.Oe,l.He)*h);if(null!==u&&(a=Math.max(u+1,a),a=Math.min(a,f)),this.ni.fa*h>2*e)_t(t,a,c,f-a+1,v-c+1,e);else{var d=f-a+1;t.fillRect(a,c,d,v-c+1)}u=f}},t.prototype.Oa=function(t,i,n,s){if(null!==this.ni)for(var h="",r=this.za(s),e=n.from;e<n.to;e++){var u=i[e],o=Math.round(Math.min(u.Oe,u.He)*s),l=Math.round(Math.max(u.Oe,u.He)*s),a=Math.round(u.St*s)-Math.floor(.5*this.ca),f=a+this.ca-1;if(u.$!==h){var c=u.$;t.fillStyle=c,h=c}this.ni.Wa&&(a+=r,o+=r,f-=r,l-=r),o>l||t.fillRect(a,o,f-a+1,l-o+1)}},t}(),us=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ai=new es,i}return U(i,t),i.prototype.It=function(t,i){if(!this.Kl.$t())return null;var n=this.Kl.nt();this.Xl();var s={Yn:this.Yl,fa:this.Yi.qt().fa(),Fa:n.wickVisible,Wa:n.borderVisible,Ct:this.$l};return this.ai.xt(s),this.ai},i.prototype.Ql=function(){var t=this;this.Yl.forEach((function(i){var n=t.Kl.ra().ma(i.Bt);i.$=n.ba,i.Va=n.Ia,i.Qt=n.Ha}))},i.prototype.ua=function(t,i,n){var s=n.ma(t);return q(q({},this.Ma(t,i,n)),{$:s.ba,Va:s.Ia,Qt:s.Ha})},i}(Gn),os=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.kt=null,i}return U(i,t),i.prototype.xt=function(t){this.kt=t},i.prototype.gt=function(t){if(null!==this.kt&&0!==this.kt.Nt.length&&null!==this.kt.Ct){for(var i=1,n=[],s=-2,h=this.kt.Ct.from+1;h<this.kt.Ct.to;++h){var r=this.kt.Nt[h],e=r.Fe-r.Pe,u=e>0?1:-1;h===this.kt.Ct.from+1&&(i=e),-2!==s&&s*u==-1&&n.push(h),s=u}n.push(this.kt.Ct.to);var o,l=this.kt.Ct.from,a=[0,0],f=[0,0];for(h=0;h<n.length;++h){o=n[h],t.beginPath(),0===h?t.moveTo(this.kt.Nt[l].St,this.kt.Nt[l].We):t.moveTo(a[0],a[1]);for(var c=l;c<o;c++)t.lineTo(this.kt.Nt[c].St,this.kt.Nt[c].We);h!==n.length-1&&(f=this.ja(o),t.lineTo(f[0],f[1]));for(c=o-1;c>=l;--c)t.lineTo(this.kt.Nt[c].St,this.kt.Nt[c].Re);0!==h&&t.lineTo(a[0],a[1]),t.closePath(),i*Math.pow(-1,h)>0?t.fillStyle=this.kt.Ua:t.fillStyle=this.kt.qa,t.fill(),l=o,a=f}}},i.prototype.ja=function(t){if(null===this.kt||0===this.kt.Nt.length||null===this.kt.Ct)throw new Error("Empty data");return i.Ya(this.kt.Nt[t-1].St,this.kt.Nt[t-1].We,this.kt.Nt[t].St,this.kt.Nt[t].We,this.kt.Nt[t-1].Re,this.kt.Nt[t].Re)},i.Ya=function(t,i,n,s,h,r){var e=s-i,u=t-n,o=e*t+u*i,l=r-h,a=t-n,f=l*t+a*h,c=e*a-l*u;if(0===c)throw new Error("Lines are parallel");return[(a*o-u*f)/c,(e*f-l*o)/c]},i}(ot),ls=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.ai=new ut,s.$a=new os,s.Ka=new Hn,s.Za=new Hn,s.ai.ot([s.$a,s.Ka,s.Za]),s}return U(i,t),i.prototype.It=function(t,i){if(!this.Kl.$t())return null;var n=this.Kl.nt();this.Xl();for(var s={Nt:this.Yl,Ua:n.positiveColor,qa:n.negativeColor,Ol:t,Ct:this.$l,Pl:this.Yi.qt().fa()},h=[],r=0;r<this.Yl.length;r++){var e={Bt:this.Yl[r].Bt,Dt:this.Yl[r].Fe,St:this.Yl[r].St,Tt:this.Yl[r].We};h.push(e)}var u={Nt:h,Et:n.higherLineColor,oi:n.higherLineStyle,Rl:n.higherLineType,ui:n.higherLineWidth,Ct:this.$l,Pl:this.Yi.qt().fa()},o=[];for(r=0;r<this.Yl.length;r++){e={Bt:this.Yl[r].Bt,Dt:this.Yl[r].Pe,St:this.Yl[r].St,Tt:this.Yl[r].Re};o.push(e)}var l={Nt:o,Et:n.lowerLineColor,oi:n.lowerLineStyle,Rl:n.lowerLineType,ui:n.lowerLineWidth,Ct:this.$l,Pl:this.Yi.qt().fa()};return this.$a.xt(s),this.Ka.xt(u),this.Za.xt(l),this.ai},i}(hs),as=function(){function t(){this.ni=null,this.Xa=[]}return t.prototype.xt=function(t){this.ni=t,this.Xa=[]},t.prototype._t=function(t,i){if(null!==this.ni&&0!==this.ni.Nt.length&&null!==this.ni.Ct){var n=i.bt;this.Xa.length||this.Ja(n);for(var s=Math.max(1,Math.floor(n)),h=Math.round(this.ni.Ga*n)-Math.floor(s/2),r=h+s,e=this.ni.Ct.from;e<this.ni.Ct.to;e++){var u=this.ni.Nt[e],o=this.Xa[e-this.ni.Ct.from],l=Math.round(u.Tt*n);t.fillStyle=u.$;var a=void 0,f=void 0;l<=h?(a=l,f=r):(a=h,f=l-Math.floor(s/2)+s),t.fillRect(o.vu,a,o.du-o.vu+1,f-a)}}},t.prototype.Ja=function(t){if(null!==this.ni&&0!==this.ni.Nt.length&&null!==this.ni.Ct){var i=Math.ceil(this.ni.fa*t)<=1?0:Math.max(1,Math.floor(t)),n=Math.round(this.ni.fa*t)-i;this.Xa=new Array(this.ni.Ct.to-this.ni.Ct.from);for(var s=this.ni.Ct.from;s<this.ni.Ct.to;s++){var h,r=this.ni.Nt[s],e=Math.round(r.St*t),u=void 0,o=void 0;if(n%2)u=e-(h=(n-1)/2),o=e+h;else u=e-(h=n/2),o=e+h-1;this.Xa[s-this.ni.Ct.from]={vu:u,du:o,Qa:e,tf:r.St*t,Bt:r.Bt}}for(s=this.ni.Ct.from+1;s<this.ni.Ct.to;s++){var l=this.Xa[s-this.ni.Ct.from],a=this.Xa[s-this.ni.Ct.from-1];l.Bt===a.Bt+1&&(l.vu-a.du!==i+1&&(a.Qa>a.tf?a.du=l.vu-i-1:l.vu=a.du+i+1))}var f=Math.ceil(this.ni.fa*t);for(s=this.ni.Ct.from;s<this.ni.Ct.to;s++){(l=this.Xa[s-this.ni.Ct.from]).du<l.vu&&(l.du=l.vu);var c=l.du-l.vu+1;f=Math.min(c,f)}if(i>0&&f<4)for(s=this.ni.Ct.from;s<this.ni.Ct.to;s++){(c=(l=this.Xa[s-this.ni.Ct.from]).du-l.vu+1)>f&&(l.Qa>l.tf?l.du-=1:l.vu+=1)}}else this.Xa=[]},t}();function fs(t){return{Nt:[],fa:t,Ga:NaN,Ct:null}}function cs(t,i,n){return{Bt:t,Dt:i,St:NaN,Tt:NaN,$:n}}var vs=function(t){function i(i,n){var s=t.call(this,i,n,!1)||this;return s.Ft=new ut,s.if=fs(0),s.ai=new as,s}return U(i,t),i.prototype.It=function(t,i){return this.Kl.$t()?(this.Xl(),this.Ft):null},i.prototype.Jl=function(){var t=this.Yi.qt().fa();this.if=fs(t);for(var i=0,n=0,s=this.Kl.nt().color,h=0,r=this.Kl.Yn().ea();h<r.length;h++){var e=r[h],u=e.Gt[3],o=void 0!==e.$?e.$:s,l=cs(e.oa,u,o);++i<this.if.Nt.length?this.if.Nt[i]=l:this.if.Nt.push(l),this.Yl[n++]={Bt:e.oa,St:0}}this.ai.xt(this.if),this.Ft.ot([this.ai])},i.prototype.Ql=function(){},i.prototype.ta=function(){t.prototype.ta.call(this),this.if.Ct=null},i.prototype.na=function(t,i,n){if(null!==this.$l){var s=i.fa(),h=E(i.bs()),r=t.Xt(this.Kl.nt().base,n);i.sa(this.if.Nt),t.Ee(this.if.Nt,n),this.if.Ga=r,this.if.Ct=$n(this.if.Nt,h,!1),this.if.fa=s,this.ai.xt(this.if)}},i}(Kn),ds=function(t){function i(i,n){var s=t.call(this,i,n)||this;return s.aa=new Hn,s}return U(i,t),i.prototype.It=function(t,i){if(!this.Kl.$t())return null;var n=this.Kl.nt();this.Xl();var s={Nt:this.Yl,Et:n.color,oi:n.lineStyle,Rl:n.lineType,ui:n.lineWidth,Ct:this.$l,Pl:this.Yi.qt().fa()};return this.aa.xt(s),this.aa},i.prototype.Ql=function(){var t=this;this.Yl.forEach((function(i){i.$=t.Kl.ra().ma(i.Bt).ba}))},i.prototype.ua=function(t,i,n){var s=this.ha(t,i);return s.$=n.ma(t).ba,s},i}(Zn),_s=function(){function t(){this.nf=null,this.V=null}return t.prototype.sf=function(t,i){this.nf=t,this.V=i},t.prototype._t=function(t,i){null!==this.V&&null!==this.nf&&this.nf._t&&this.nf._t(t,this.V,i)},t}(),ws=function(){function t(t,i,n){this.hf=t,this.rf=i,this.it=n,this.ai=new _s}return t.prototype.It=function(t,i){var n=this.it.$o(this.rf);if(null===n)return null;var s=n.Hu(this.rf)?n.no():this.rf.Jt();if(null===s)return null;var h=n.$u(s);if("overlay"===h)return null;var r=this.it.ef();return r.tt=h,this.ai.sf(this.hf.Ri(),r),this.ai},t}(),Ms=function(){function t(){this.ni=null}return t.prototype.xt=function(t){this.ni=t},t.prototype._t=function(t,i){if(null!==this.ni&&!1!==this.ni.$t){var n=i.bt,s=Math.round(this.ni.Tt*n);if(!(s<0||s>Math.ceil(this.ni.Mi*n))){var h=0;void 0!==this.ni.St&&(h=Math.round(this.ni.St*n));var r=Math.ceil(this.ni.wi*n);t.lineCap="butt",t.strokeStyle=this.ni.$,t.lineWidth=Math.floor(this.ni.ui*n),g(t,this.ni.oi),k(t,s,h,r)}}},t}(),bs=function(){function t(t){this.uf={wi:0,Mi:0,Tt:0,$:"rgba(0, 0, 0, 0)",ui:1,oi:0,$t:!1},this.Zo=new Ms,this.Li=!0,this.Kl=t,this.Yi=t.ci(),this.Zo.xt(this.uf)}return t.prototype.Ot=function(){this.Li=!0},t.prototype.It=function(t,i){return this.Kl.$t()?(this.Li&&(this.$i(t,i),this.Li=!1),this.Zo):null},t}(),ms=function(t){function i(i){return t.call(this,i)||this}return U(i,t),i.prototype.$i=function(t,i){this.uf.$t=!1;var n=this.Kl.Jt(),s=n.de().de;if(2===s||3===s){var h=this.Kl.nt();if(h.baseLineVisible&&this.Kl.$t()){var r=this.Kl.Kt();null!==r&&(this.uf.$t=!0,this.uf.Tt=n.Xt(r.Gt,r.Gt),this.uf.wi=i,this.uf.Mi=t,this.uf.$=h.baseLineColor,this.uf.ui=h.baseLineWidth,this.uf.oi=h.baseLineStyle)}}},i}(bs),ps=function(){function t(){this.ni=null}return t.prototype.xt=function(t){this.ni=t},t.prototype.dh=function(){return this.ni},t.prototype._t=function(t,i){var n=this.ni;if(null!==n){t.save();var s=i.bt,h=Math.max(1,Math.floor(s)),r=h%2/2,e=Math.round(n.tf.x*s)+r,u=n.tf.y*s;t.fillStyle=n.lf,t.beginPath();var o=Math.max(2,1.5*n.af)*s;t.arc(e,u,o,0,2*Math.PI,!1),t.fill(),t.fillStyle=n.ff,t.beginPath(),t.arc(e,u,n.Lt*s,0,2*Math.PI,!1),t.fill(),t.lineWidth=h,t.strokeStyle=n.Ta,t.beginPath(),t.arc(e,u,n.Lt*s+h/2,0,2*Math.PI,!1),t.stroke(),t.restore()}},t}(),gs=[{cf:0,La:.25,vf:4,df:10,_f:.25,wf:0,Mf:.4,bf:.8},{cf:.25,La:.525,vf:10,df:14,_f:0,wf:0,Mf:.8,bf:0},{cf:.525,La:1,vf:14,df:14,_f:0,wf:0,Mf:0,bf:0}];function ys(t,i,n,s){return I(t,n+(s-n)*i)}function ks(t,i){for(var n,s=t%2600/2600,h=0,r=gs;h<r.length;h++){var e=r[h];if(s>=e.cf&&s<=e.La){n=e;break}}A(void 0!==n,"Last price animation internal logic error");var u,o,l,a=(s-n.cf)/(n.La-n.cf);return{ff:ys(i,a,n._f,n.wf),Ta:ys(i,a,n.Mf,n.bf),Lt:(u=a,o=n.vf,l=n.df,o+(l-o)*u)}}var xs=function(){function t(t){this.ai=new ps,this.Li=!0,this.mf=!0,this.pf=performance.now(),this.gf=this.pf-1,this.yf=t}return t.prototype.kf=function(){this.gf=this.pf-1,this.Ot()},t.prototype.xf=function(){if(this.Ot(),2===this.yf.nt().lastPriceAnimation){var t=performance.now(),i=this.gf-t;if(i>0)return void(i<650&&(this.gf+=2600));this.pf=t,this.gf=t+2600}},t.prototype.Ot=function(){this.Li=!0},t.prototype.Cf=function(){this.mf=!0},t.prototype.$t=function(){return 0!==this.yf.nt().lastPriceAnimation},t.prototype.Nf=function(){switch(this.yf.nt().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.gf}},t.prototype.It=function(t,i){return this.Li?(this.Ht(t,i),this.Li=!1,this.mf=!1):this.mf&&(this.Sf(),this.mf=!1),this.ai},t.prototype.Ht=function(t,i){this.ai.xt(null);var n=this.yf.ci().qt(),s=n.bs(),r=this.yf.Kt();if(null!==s&&null!==r){var e=this.yf.Tf(!0);if(!e.Af&&s.Lf(e.oa)){var u=new h(n.ii(e.oa),this.yf.Jt().Xt(e.Dt,r.Gt)),o=e.$,l=this.yf.nt().lineWidth,a=ks(this.Ef(),o);this.ai.xt({lf:o,af:l,ff:a.ff,Ta:a.Ta,Lt:a.Lt,tf:u})}}},t.prototype.Sf=function(){var t=this.ai.dh();if(null!==t){var i=ks(this.Ef(),t.lf);t.ff=i.ff,t.Ta=i.Ta,t.Lt=i.Lt}},t.prototype.Ef=function(){return this.Nf()?performance.now()-this.pf:2599},t}();function Cs(t,i){return Ai(Math.min(Math.max(t,12),30)*i)}function Ns(t,i){switch(t){case"arrowDown":case"arrowUp":case"triangle":return Cs(i,1);case"circle":return Cs(i,.8);case"square":return Cs(i,.7)}}function Ss(t){return Ti(Cs(t,1))}function Ts(t){return Math.max(Cs(t,.1),3)}function As(t,i,n,s,h){var r=(Ns("arrowUp",h)-1)/2,e=(Ai(h/2)-1)/2;i.beginPath(),t?(i.moveTo(n-r,s),i.lineTo(n,s-r),i.lineTo(n+r,s),i.lineTo(n+e,s),i.lineTo(n+e,s+r),i.lineTo(n-e,s+r),i.lineTo(n-e,s)):(i.moveTo(n-r,s),i.lineTo(n,s+r),i.lineTo(n+r,s),i.lineTo(n+e,s),i.lineTo(n+e,s-r),i.lineTo(n-e,s-r),i.lineTo(n-e,s)),i.fill(),i.stroke()}var Ls=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.ni=null,i.Bf=new rt,i.st=-1,i.ht="",i.Df="",i}return U(i,t),i.prototype.xt=function(t){this.ni=t},i.prototype.sf=function(t,i){this.st===t&&this.ht===i||(this.st=t,this.ht=i,this.Df=st(t,i),this.Bf.R())},i.prototype.gt=function(t){if(null!==this.ni&&null!==this.ni.Ct){t.textBaseline="middle",t.font=this.Df;for(var i=this.ni.Ct.from;i<this.ni.Ct.to;i++){var n=this.ni.Nt[i];void 0!==n.ki&&(n.ki.wi=this.Bf.O(t,n.ki.Ff),n.ki.Mi=this.st),Es(n,t)}}},i}(ot);function Es(t,i){var n,s,h=t.Pf||("bottom"===t.Wf?180:"right"===t.Wf?90:"left"===t.Wf?-90:0);i.strokeStyle=(null===(n=t.Rf)||void 0===n?void 0:n.color)||"transparent",i.lineWidth=(null===(s=t.Rf)||void 0===s?void 0:s.width)||1,i.fillStyle=t.$,void 0!==t.ki&&function(t,i,n,s){t.fillText(i,n,s)}(i,t.ki.Ff,t.St-t.ki.wi/2,t.ki.Tt),h&&(i.save(),i.translate(t.St,t.Tt),i.rotate(h*(Math.PI/180)),i.translate(-t.St,-t.Tt)),function(t,i){if(0===t.ia)return;switch(t.zf){case"triangle":return void function(t,i,n,s){var h=s/2;t.beginPath(),t.moveTo(i,n-h),t.lineTo(i+h,n+h),t.lineTo(i-h,n+h),t.closePath(),t.fill(),t.stroke()}(i,t.St,t.Tt,t.ia);case"arrowDown":return void As(!1,i,t.St,t.Tt,t.ia);case"arrowUp":return void As(!0,i,t.St,t.Tt,t.ia);case"circle":return void function(t,i,n,s){var h=(Ns("circle",s)-1)/2;t.beginPath(),t.arc(i,n,h,0,2*Math.PI,!1),t.fill()}(i,t.St,t.Tt,t.ia);case"square":return void function(t,i,n,s){var h=Ns("square",s),r=(h-1)/2,e=i-r,u=n-r;t.fillRect(e,u,h,h)}(i,t.St,t.Tt,t.ia)}t.zf}(t,i),h&&i.restore()}function Bs(t,i,n,s,h,r,e,u,o){var l=Z(n)?n:n.close,a=Z(n)?n:n.high,f=Z(n)?n:n.low,c=Z(i.size)?Math.max(i.size,0):1,v=Ss(u.fa())*c,d=v/2;switch(t.ia=v,i.position){case"price":var _=i.price||l,w=i.anchor||"center",M="top"===w?1:"bottom"===w?-1:0,b="left"===w?1:"right"===w?-1:0;return t.Tt=e.Xt(_,o)+d*M,t.St=t.St+d*b,void(void 0!==t.ki&&(t.ki.Tt=t.Tt+(d+r+.6*h)*M||1));case"inBar":return t.Tt=e.Xt(l,o),void(void 0!==t.ki&&(t.ki.Tt=t.Tt+d+r+.6*h));case"aboveBar":return t.Tt=e.Xt(a,o)-d-s.Of,void 0!==t.ki&&(t.ki.Tt=t.Tt-d-.6*h,s.Of+=1.2*h),void(s.Of+=v+r);case"belowBar":return t.Tt=e.Xt(f,o)+d+s.Vf,void 0!==t.ki&&(t.ki.Tt=t.Tt+d+r+.6*h,s.Vf+=1.2*h),void(s.Vf+=v+r)}i.position}var Ds=function(){function t(t,i){this.Li=!0,this.If=!0,this.Hf=!0,this.jf=null,this.ai=new Ls,this.yf=t,this.yn=i,this.ni={Nt:[],Ct:null}}return t.prototype.Ot=function(t){this.Li=!0,this.Hf=!0,"data"===t&&(this.If=!0)},t.prototype.It=function(t,i,n){if(!this.yf.$t())return null;this.Li&&this.Xl();var s=this.yn.nt().layout;return this.ai.sf(s.fontSize,s.fontFamily),this.ai.xt(this.ni),this.ai},t.prototype.Uf=function(){if(this.Hf){if(this.yf.qf().length>0){var t=this.yn.qt().fa(),i=Ts(t),n=1.5*Ss(t)+2*i;this.jf={above:n,below:n}}else this.jf=null;this.Hf=!1}return this.jf},t.prototype.Xl=function(){var t=this.yf.Jt(),i=this.yn.qt(),n=this.yf.qf();this.If&&(this.ni.Nt=n.map((function(t){return{Bt:t.time,St:0,Tt:0,ia:0,Rf:t.stroke,zf:t.shape,Wf:t.anchor,$:t.color,Pf:t.rotation,Yf:t.Yf,$f:t.id,ki:void 0}})),this.If=!1);var s=this.yn.nt().layout;this.ni.Ct=null;var h=i.bs();if(null!==h){var r=this.yf.Kt();if(null!==r&&0!==this.ni.Nt.length){var e=NaN,u=Ts(i.fa()),o={Of:u,Vf:u};this.ni.Ct=$n(this.ni.Nt,h,!0);for(var l=this.ni.Ct.from;l<this.ni.Ct.to;l++){var a=n[l];a.time!==e&&(o.Of=u,o.Vf=u,e=a.time);var f=this.ni.Nt[l];f.St=i.ii(a.time),void 0!==a.text&&a.text.length>0&&(f.ki={Ff:a.text,Tt:0,wi:0,Mi:0});var c=this.yf.Kf(a.time);null!==c&&Bs(f,a,c,o,s.fontSize,u,t,i,r.Gt)}this.Li=!1}}},t}(),Fs=function(t){function i(i){return t.call(this,i)||this}return U(i,t),i.prototype.$i=function(t,i){var n=this.uf;n.$t=!1;var s=this.Kl.nt();if(s.priceLineVisible&&this.Kl.$t()){var h=this.Kl.Tf(0===s.priceLineSource);h.Af||(n.$t=!0,n.Tt=h.xi,n.$=this.Kl.Zf(h.$),n.wi=i,n.Mi=t,n.ui=s.priceLineWidth,n.oi=s.priceLineStyle)}},i}(bs),Ps=function(t){function i(i){var n=t.call(this)||this;return n.fi=i,n}return U(i,t),i.prototype.zi=function(t,i,n){t.$t=!1,i.$t=!1;var s=this.fi;if(s.$t()){var h=s.nt(),r=h.lastValueVisible,e=""!==s.Xf(),u=0===h.seriesLastValueMode,o=s.Tf(!1);if(!o.Af){r&&(t.ki=this.Jf(o,r,u),t.$t=0!==t.ki.length),(e||u)&&(i.ki=this.Gf(o,r,e,u),i.$t=i.ki.length>0);var l=s.Zf(o.$),a=H(l);n.m=a.m,n.$=a.p,n.xi=o.xi,i.Qt=s.ci().ti(o.xi/s.Jt().Mi()),t.Qt=l}}},i.prototype.Gf=function(t,i,n,s){var h="",r=this.fi.Xf();return n&&0!==r.length&&(h+="".concat(r," ")),i&&s&&(h+=this.fi.Jt().Me()?t.Qf:t.tc),h.trim()},i.prototype.Jf=function(t,i,n){return i?n?this.fi.Jt().Me()?t.tc:t.Qf:t.ki:""},i}(pt),Ws=function(){function t(t,i){this.qr=t,this.ic=i||null}return t.prototype.Se=function(){return this.qr},t.prototype._u=function(){return this.ic},t.prototype.Nr=function(){return null===this.qr?null:{priceRange:this.qr.Nr(),margins:this.ic||void 0}},t.Sr=function(i){return null===i?null:new t(xi.Sr(i.priceRange),i.margins)},t}(),Rs=function(t){function i(i,n){var s=t.call(this,i)||this;return s.nc=n,s}return U(i,t),i.prototype.$i=function(t,i){var n=this.nc.nt(),s=this.uf;if(s.$t=!1,this.Kl.$t()&&n.visible&&n.lineVisible){var h,r=this.nc.sc();if(null!==r)void 0!==n.index&&(h=this.Yi.qt().ii(n.index)),s.$t=!0,s.Tt=r,s.St=h,s.$=n.color,s.wi=i,s.Mi=t,s.ui=n.lineWidth,s.oi=n.lineStyle}},i}(bs),zs=function(t){function i(i,n){var s=t.call(this)||this;return s.yf=i,s.nc=n,s}return U(i,t),i.prototype.zi=function(t,i,n){t.$t=!1,i.$t=!1;var s=this.nc.nt(),h=s.axisLabelVisible,r=""!==s.title,e=this.yf;if(h&&s.visible&&e.$t()){var u=this.nc.sc();if(null!==u){r&&(i.ki=s.title,i.$t=!0),i.Qt=e.ci().ti(u/e.Jt().Mi()),t.ki=e.Jt().ru(s.price),t.$t=!0;var o=H(s.color);n.m=o.m,n.$=o.p,n.xi=u}}},i}(pt),Os=function(){function t(t,i){this.yf=t,this.kn=i,this.hc=new Rs(t,this),this.rc=new zs(t,this),this.ec=new ws(this.rc,t,t.ci())}return t.prototype.th=function(t){K(this.kn,t),this.Ot(),this.yf.ci().uo()},t.prototype.nt=function(){return this.kn},t.prototype.On=function(){return[this.hc,this.ec]},t.prototype.uc=function(){return this.rc},t.prototype.Ot=function(){this.hc.Ot(),this.rc.Ot()},t.prototype.sc=function(){var t=this.yf,i=t.Jt();if(t.ci().qt().dt()||i.dt())return null;var n=t.Kt();return null===n?null:i.Xt(this.kn.price,n.Gt)},t}(),Vs=function(t){function i(i){var n=t.call(this)||this;return n.yn=i,n}return U(i,t),i.prototype.ci=function(){return this.yn},i}(Tt),Is={ba:"",Ha:"",Ia:""},Hs=function(){function t(t){this.yf=t}return t.prototype.ma=function(t,i){var n=this.yf.fo(),s=this.yf.nt();switch(n){case"Line":return this.oc(s,t,i);case"Area":return this.lc(s);case"CloudArea":return this.ac(s);case"BrokenArea":return this.fc(s);case"Baseline":return this.cc(s,t,i);case"Bar":return this.vc(s,t,i);case"Candlestick":return this.dc(s,t,i);case"Histogram":return this._c(s,t,i)}throw new Error("Unknown chart style")},t.prototype.vc=function(t,i,n){var s=q({},Is),h=t.upColor,r=t.downColor,e=h,u=r,o=E(this.wc(i,n)),l=B(o.Gt[0])<=B(o.Gt[3]);return void 0!==o.$?(s.ba=o.$,s.Ha=o.$):(s.ba=l?h:r,s.Ha=l?e:u),s},t.prototype.dc=function(t,i,n){var s,h,r,e=q({},Is),u=t.upColor,o=t.downColor,l=t.borderUpColor,a=t.borderDownColor,f=t.wickUpColor,c=t.wickDownColor,v=E(this.wc(i,n)),d=B(v.Gt[0])<=B(v.Gt[3]);return e.ba=null!==(s=v.$)&&void 0!==s?s:d?u:o,e.Ha=null!==(h=v.Qt)&&void 0!==h?h:d?l:a,e.Ia=null!==(r=v.Va)&&void 0!==r?r:d?f:c,e},t.prototype.lc=function(t){return q(q({},Is),{ba:t.lineColor})},t.prototype.cc=function(t,i,n){var s=E(this.wc(i,n)).Gt[3]>=t.baseValue.price;return q(q({},Is),{ba:s?t.topLineColor:t.bottomLineColor})},t.prototype.ac=function(t){return q(q({},Is),{ba:t.higherLineColor})},t.prototype.fc=function(t){return q(q({},Is),{ba:t.color})},t.prototype.oc=function(t,i,n){var s,h=E(this.wc(i,n));return q(q({},Is),{ba:null!==(s=h.$)&&void 0!==s?s:t.color})},t.prototype._c=function(t,i,n){var s=q({},Is),h=E(this.wc(i,n));return s.ba=void 0!==h.$?h.$:t.color,s},t.prototype.wc=function(t,i){return void 0!==i?i.Gt:this.yf.Yn().Mc(t)},t}(),js=function(){function t(){this.bc=[],this.mc=new Map,this.gc=new Map}return t.prototype.yc=function(){return this.ia()>0?this.bc[this.bc.length-1]:null},t.prototype.kc=function(){return this.ia()>0?this.xc(0):null},t.prototype.qn=function(){return this.ia()>0?this.xc(this.bc.length-1):null},t.prototype.ia=function(){return this.bc.length},t.prototype.dt=function(){return 0===this.ia()},t.prototype.Lf=function(t){return null!==this.Cc(t,0)},t.prototype.Mc=function(t){return this.Nc(t)},t.prototype.Nc=function(t,i){void 0===i&&(i=0);var n=this.Cc(t,i);return null===n?null:q(q({},this.Sc(n)),{oa:this.xc(n)})},t.prototype.ea=function(){return this.bc},t.prototype.Tc=function(t,i,n){if(this.dt())return null;for(var s=null,h=0,r=n;h<r.length;h++){var e=r[h];s=Us(s,this.Ac(t,i,e))}return s},t.prototype.xt=function(t){this.gc.clear(),this.mc.clear(),this.bc=t},t.prototype.xc=function(t){return this.bc[t].oa},t.prototype.Sc=function(t){return this.bc[t]},t.prototype.Cc=function(t,i){var n=this.Lc(t);if(null===n&&0!==i)switch(i){case-1:return this.Ec(t);case 1:return this.Bc(t);default:throw new TypeError("Unknown search mode")}return n},t.prototype.Ec=function(t){var i=this.Dc(t);return i>0&&(i-=1),i!==this.bc.length&&this.xc(i)<t?i:null},t.prototype.Bc=function(t){var i=this.Fc(t);return i!==this.bc.length&&t<this.xc(i)?i:null},t.prototype.Lc=function(t){var i=this.Dc(t);return i===this.bc.length||t<this.bc[i].oa?null:i},t.prototype.Dc=function(t){return jn(this.bc,t,(function(t,i){return t.oa<i}))},t.prototype.Fc=function(t){return Un(this.bc,t,(function(t,i){return i.oa>t}))},t.prototype.Pc=function(t,i,n){for(var s=null,h=t;h<i;h++){var r=this.bc[h].Gt[n];Number.isNaN(r)||(null===s?s={t:r,i:r}:(r<s.t&&(s.t=r),r>s.i&&(s.i=r)))}return s},t.prototype.Ac=function(t,i,n){if(this.dt())return null;var s=null,h=E(this.kc()),r=E(this.qn()),e=Math.max(t,h),u=Math.min(i,r),o=30*Math.ceil(e/30),l=Math.max(o,30*Math.floor(u/30)),a=this.Dc(e),f=this.Fc(Math.min(u,o,i));s=Us(s,this.Pc(a,f,n));var c=this.mc.get(n);void 0===c&&(c=new Map,this.mc.set(n,c));for(var v=Math.max(o+1,e);v<l;v+=30){var d=Math.floor(v/30),_=c.get(d);if(void 0===_){var w=this.Dc(30*d),M=this.Fc(30*(d+1)-1);_=this.Pc(w,M,n),c.set(d,_)}s=Us(s,_)}a=this.Dc(l),f=this.Fc(u);return s=Us(s,this.Pc(a,f,n))},t}();function Us(t,i){return null===t?i:null===i?t:{t:Math.min(t.t,i.t),i:Math.max(t.i,i.i)}}var qs=function(t){function i(i,n,s){var h=t.call(this,i)||this;h.ni=new js,h.hc=new Fs(h),h.Wc=[],h.Rc=new ms(h),h.zc=null,h.Oc=null,h.Vc=[],h.Ic=[],h.Hc=null,h.kn=n,h.jc=s;var r=new Ps(h);return h.wn=[r],h.Uc=new ws(r,h,i),"Area"!==s&&"Line"!==s&&"Baseline"!==s||(h.zc=new xs(h)),h.qc(),h.Yc(),h}return U(i,t),i.prototype.D=function(){null!==this.Hc&&clearTimeout(this.Hc)},i.prototype.Zf=function(t){return this.kn.priceLineColor||t},i.prototype.Tf=function(t){var i={Af:!0},n=this.Jt();if(this.ci().qt().dt()||n.dt()||this.ni.dt())return i;var s,h,r=this.ci().qt().bs(),e=this.Kt();if(null===r||null===e)return i;if(t){var u=this.ni.yc();if(null===u)return i;s=u,h=u.oa}else{var o=this.ni.Nc(r.du(),-1);if(null===o)return i;if(null===(s=this.ni.Mc(o.oa)))return i;h=o.oa}var l=s.Gt[3],a=this.ra().ma(h,{Gt:s}),f=n.Xt(l,e.Gt);return{Af:!1,Dt:l,ki:n.Ii(l,e.Gt),Qf:n.ru(l),tc:n.uu(l,e.Gt),$:a.ba,xi:f,oa:h}},i.prototype.ra=function(){return null!==this.Oc||(this.Oc=new Hs(this)),this.Oc},i.prototype.nt=function(){return this.kn},i.prototype.th=function(t){var i,n=t.priceScaleId;void 0!==n&&n!==this.kn.priceScaleId&&this.ci().$c(this,n);var s=null!==(i=this.kn.pane)&&void 0!==i?i:0;K(this.kn,t),null!==this.sn&&void 0!==t.scaleMargins&&this.sn.th({scaleMargins:t.scaleMargins}),void 0!==t.priceFormat&&(this.qc(),this.ci().Kc()),t.pane&&s!==t.pane&&this.ci().Zc(this,s,t.pane),this.ci().Vs(this),this.ci().Xc(),this.Ln.Ot("options")},i.prototype.xt=function(t,i){this.ni.xt(t),this.Jc(),this.Ln.Ot("data"),this.xn.Ot("data"),null!==this.zc&&(i&&i.Gc?this.zc.xf():0===t.length&&this.zc.kf());var n=this.ci().$o(this);this.ci().Qc(n),this.ci().Vs(this),this.ci().Xc(),this.ci().uo()},i.prototype.tv=function(t){this.Vc=t.map((function(t){return q({},t)})),this.Jc();var i=this.ci().$o(this);this.xn.Ot("data"),this.ci().Qc(i),this.ci().Vs(this),this.ci().Xc(),this.ci().uo()},i.prototype.qf=function(){return this.Ic},i.prototype.iv=function(t){var i=new Os(this,t);return this.Wc.push(i),this.ci().Vs(this),i},i.prototype.nv=function(t){var i=this.Wc.indexOf(t);-1!==i&&this.Wc.splice(i,1),this.ci().Vs(this)},i.prototype.sv=function(t,i){var n=this.Jt(),s=n.Se();n.Hr()&&(s=zi(s,n.Ae()));var h=1e-4;s&&(h=16/n.Mi()*(Math.abs(s.yr())/t));for(var r=0;r<this.Wc.length;r++){var e=this.Wc[r],u=this.Wc[r].nt(),o=u.price,l=u.index;if((void 0===i||void 0===l||i>=l)&&Math.abs(Math.abs(o-t)/t)<Math.abs(h))return e}return null},i.prototype.hv=function(){this.Wc.splice(0,this.Wc.length)},i.prototype.fo=function(){return this.jc},i.prototype.Kt=function(){var t=this.rv();return null===t?null:{Gt:t.Gt[3],Ke:t.Bt}},i.prototype.rv=function(){var t=this.ci().qt().bs();if(null===t)return null;var i=t.vu();return this.ni.Nc(i,1)},i.prototype.Yn=function(){return this.ni},i.prototype.Kf=function(t){var i=this.ni.Mc(t);return null===i?null:"Bar"===this.jc||"Candlestick"===this.jc?{open:i.Gt[0],high:i.Gt[1],low:i.Gt[2],close:i.Gt[3]}:i.Gt[3]},i.prototype.ev=function(t){var i=this,n=this.zc;return null!==n&&n.$t()?(null===this.Hc&&n.Nf()&&(this.Hc=setTimeout((function(){i.Hc=null,i.ci().uv()}),0)),n.Cf(),[n]):[]},i.prototype.On=function(){var t=[];this.ov()||t.push(this.Rc);for(var i=0,n=this.Wc;i<n.length;i++){var s=n[i];t.push.apply(t,s.On())}return t.push(this.Ln,this.hc,this.Uc,this.xn),t},i.prototype.Vn=function(t,i){if(i!==this.sn&&!this.ov())return[];for(var n=Y([],this.wn,!0),s=0,h=this.Wc;s<h.length;s++){var r=h[s];n.push(r.uc())}return n},i.prototype.cu=function(t,i){var n=this;if(void 0!==this.kn.autoscaleInfoProvider){var s=this.kn.autoscaleInfoProvider((function(){var s=n.lv(t,i);return null===s?null:s.Nr()}));return Ws.Sr(s)}return this.lv(t,i)},i.prototype.au=function(){return this.kn.priceFormat.minMove},i.prototype.su=function(){return this.re},i.prototype.Hn=function(){var t;this.Ln.Ot(),this.xn.Ot();for(var i=0,n=this.wn;i<n.length;i++){n[i].Ot()}for(var s=0,h=this.Wc;s<h.length;s++){h[s].Ot()}this.hc.Ot(),this.Rc.Ot(),null===(t=this.zc)||void 0===t||t.Ot()},i.prototype.Jt=function(){return E(t.prototype.Jt.call(this))},i.prototype.Yt=function(t){if(!(("Line"===this.jc||"Area"===this.jc||"Baseline"===this.jc)&&this.kn.crosshairMarkerVisible))return null;var i=this.ni.Mc(t);return null===i?null:{Dt:i.Gt[3],Lt:this.av(),Qt:this.fv(),Zt:this.cv(t)}},i.prototype.Xf=function(){return this.kn.title},i.prototype.$t=function(){return this.kn.visible},i.prototype.Ba=function(t){this.Ln.Ba(t)},i.prototype.ov=function(){return!Lt(this.Jt().en())},i.prototype.lv=function(t,i){if(!X(t)||!X(i)||this.ni.dt())return null;var n="Line"===this.jc||"Area"===this.jc||"Baseline"===this.jc||"Histogram"===this.jc?[3]:[2,1],s=this.ni.Tc(t,i,n),h=null!==s?new xi(s.t,s.i):null;if("Histogram"===this.fo()){var r=this.kn.base,e=new xi(r,r);h=null!==h?h.ls(e):e}return new Ws(h,this.xn.Uf())},i.prototype.av=function(){switch(this.jc){case"Line":case"Area":case"Baseline":return this.kn.crosshairMarkerRadius}return 0},i.prototype.fv=function(){switch(this.jc){case"Line":case"Area":case"Baseline":var t=this.kn.crosshairMarkerBorderColor;if(0!==t.length)return t}return null},i.prototype.cv=function(t){switch(this.jc){case"Line":case"Area":case"Baseline":var i=this.kn.crosshairMarkerBackgroundColor;if(0!==i.length)return i}return this.ra().ma(t).ba},i.prototype.qc=function(){switch(this.kn.priceFormat.type){case"custom":this.re={format:this.kn.priceFormat.formatter};break;case"volume":this.re=new Rn(this.kn.priceFormat.precision);break;case"percent":this.re=new ki(this.kn.priceFormat.precision);break;default:var t=Math.pow(10,this.kn.priceFormat.precision);this.re=new yi(t,this.kn.priceFormat.minMove*t)}null!==this.sn&&this.sn.ce()},i.prototype.Jc=function(){var t=this,i=this.ci().qt();if(i.dt()||0===this.ni.ia())this.Ic=[];else{var n=E(this.ni.kc());this.Ic=this.Vc.map((function(s,h){var r=E(i.vv(s.time,!0)),e=r<n?1:-1;return{time:E(t.ni.Nc(r,e)).oa,position:s.position,rotation:s.rotation,shape:s.shape,color:s.color,stroke:s.stroke,anchor:s.anchor,price:s.price,id:s.id,Yf:h,text:s.text,size:s.size}}))}},i.prototype.Yc=function(){switch(this.xn=new Ds(this,this.ci()),this.jc){case"Bar":this.Ln=new Qn(this,this.ci());break;case"Candlestick":this.Ln=new us(this,this.ci());break;case"Line":this.Ln=new ds(this,this.ci());break;case"Area":this.Ln=new Xn(this,this.ci());break;case"CloudArea":this.Ln=new ls(this,this.ci());break;case"BrokenArea":this.Ln=new rs(this,this.ci());break;case"Baseline":this.Ln=new ns(this,this.ci());break;case"Histogram":this.Ln=new vs(this,this.ci());break;default:throw Error("Unknown chart style assigned: "+this.jc)}},i}(Vs),Ys=function(){function t(t){this.dv=!1,this._v=t}return t.prototype.qo=function(){this.dv=!0},t.prototype.Io=function(){this.dv=!1},t.prototype.tt=function(t,i,n){if(!this.dv)return t;var s=t,h=n.Nn(),r=h.Kt();if(null===r)return s;var e=h.Xt(t,r),u=n.jt().filter((function(t){return t instanceof qs})).reduce((function(t,s){if(n.Hu(s)||!s.$t())return t;var h=s.Jt(),r=s.Yn();if(h.dt()||!r.Lf(i))return t;var e=r.Mc(i);if(null===e)return t;var u=B(s.Kt());return t.push(h.Xt(e.Gt[3],u.Gt),h.Xt(e.Gt[2],u.Gt),h.Xt(e.Gt[1],u.Gt),h.Xt(e.Gt[0],u.Gt)),t}),[]);if(0===u.length)return s;u.sort((function(t,i){return Math.abs(t-e)-Math.abs(i-e)}));var o=u[0];return Math.abs(o-e)<this._v&&(s=h.Sn(o,r)),s},t}(),$s=function(t){return t.getUTCFullYear()};function Ks(t,i,n){return i.replace(/yyyy/g,function(t){return gi($s(t),4)}(t)).replace(/yy/g,function(t){return gi($s(t)%100,2)}(t)).replace(/MMMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"long"})}(t,n)).replace(/MMM/g,function(t,i){return new Date(t.getUTCFullYear(),t.getUTCMonth(),1).toLocaleString(i,{month:"short"})}(t,n)).replace(/MM/g,function(t){return gi(function(t){return t.getUTCMonth()+1}(t),2)}(t)).replace(/dd/g,function(t){return gi(function(t){return t.getUTCDate()}(t),2)}(t))}var Zs=function(){function t(t,i){void 0===t&&(t="yyyy-MM-dd"),void 0===i&&(i="default"),this.wv=t,this.Mv=i}return t.prototype.bv=function(t){return Ks(t,this.wv,this.Mv)},t}(),Xs=function(){function t(t){this.mv=t||"%h:%m:%s"}return t.prototype.bv=function(t){return this.mv.replace("%h",gi(t.getUTCHours(),2)).replace("%m",gi(t.getUTCMinutes(),2)).replace("%s",gi(t.getUTCSeconds(),2))},t}(),Js={pv:"yyyy-MM-dd",gv:"%h:%m:%s",yv:" ",kv:"default"},Gs=function(){function t(t){void 0===t&&(t={});var i=q(q({},Js),t);this.xv=new Zs(i.pv,i.kv),this.Cv=new Xs(i.gv),this.Nv=i.yv}return t.prototype.bv=function(t){return"".concat(this.xv.bv(t)).concat(this.Nv).concat(this.Cv.bv(t))},t}();var Qs=function(){function t(t,i){void 0===i&&(i=50),this.Sv=0,this.Tv=1,this.Av=1,this.F=new Map,this.Lv=new Map,this.Ev=t,this.Bv=i}return t.prototype.bv=function(t){var i=void 0===t.Dv?new Date(1e3*t.Ji).getTime():new Date(Date.UTC(t.Dv.year,t.Dv.month-1,t.Dv.day)).getTime(),n=this.F.get(i);if(void 0!==n)return n.Fv;if(this.Sv===this.Bv){var s=this.Lv.get(this.Av);this.Lv.delete(this.Av),this.F.delete(L(s)),this.Av++,this.Sv--}var h=this.Ev(t);return this.F.set(i,{Fv:h,Pv:this.Tv}),this.Lv.set(this.Tv,i),this.Sv++,this.Tv++,h},t}(),th=function(){function t(t,i){A(t<=i,"right should be >= left"),this.Wv=t,this.Rv=i}return t.prototype.vu=function(){return this.Wv},t.prototype.du=function(){return this.Rv},t.prototype.Mc=function(t){return this.Wv+(this.Rv-this.Wv)*t},t.prototype.zv=function(){return this.Rv-this.Wv+1},t.prototype.Lf=function(t){return this.Wv<=t&&t<=this.Rv},t.prototype.br=function(t){return this.Wv===t.vu()&&this.Rv===t.du()},t}();function ih(t,i){return null===t||null===i?t===i:t.br(i)}var nh,sh,hh=function(){function t(){this.Ov=new Map,this.F=null}return t.prototype.Vv=function(t,i){this.Iv(i),this.F=null;for(var n=i;n<t.length;++n){var s=t[n],h=this.Ov.get(s.Hv);void 0===h&&(h=[],this.Ov.set(s.Hv,h)),h.push({oa:n,Bt:s.Bt,jv:s.Hv})}},t.prototype.Uv=function(t,i){var n=Math.ceil(i/t);return null!==this.F&&this.F.qv===n||(this.F={lr:this.Yv(n),qv:n}),this.F.lr},t.prototype.Iv=function(t){if(0!==t){var i=[];this.Ov.forEach((function(n,s){t<=n[0].oa?i.push(s):n.splice(jn(n,t,(function(i){return i.oa<t})),1/0)}));for(var n=0,s=i;n<s.length;n++){var h=s[n];this.Ov.delete(h)}}else this.Ov.clear()},t.prototype.Yv=function(t){for(var i=[],n=0,s=Array.from(this.Ov.keys()).sort((function(t,i){return i-t}));n<s.length;n++){var h=s[n];if(this.Ov.get(h)){var r=i;i=[];for(var e=r.length,u=0,o=L(this.Ov.get(h)),l=o.length,a=1/0,f=-1/0,c=0;c<l;c++){for(var v=o[c],d=v.oa;u<e;){var _=r[u],w=_.oa;if(!(w<d)){a=w;break}u++,i.push(_),f=w,a=1/0}a-d>=t&&d-f>=t&&(i.push(v),f=d)}for(;u<e;u++)i.push(r[u])}}return i},t}(),rh=function(){function t(t){this.$v=t}return t.prototype.Kv=function(){return null===this.$v?null:new th(Math.floor(this.$v.vu()),Math.ceil(this.$v.du()))},t.prototype.Zv=function(){return this.$v},t.Xv=function(){return new t(null)},t}();!function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(nh||(nh={})),function(t){t[t.Normal=0]="Normal",t[t.Euclidean=1]="Euclidean"}(sh||(sh={}));var eh=function(){function t(t,i,n){this.Nu=0,this.Jv=null,this.Gv=[],this.he=null,this.se=null,this.Qv=new hh,this.td=new Map,this.nd=rh.Xv(),this.sd=rh.Xv(),this.hd=!0,this.rd=new $,this.ed=new $,this.ud=new $,this.od=null,this.ld=null,this.ad=[],this.kn=i,this.oe=n,this.fd=i.rightOffset,this.vd=i.barSpacing,this.yn=t,this.dd()}return t.prototype.nt=function(){return this.kn},t.prototype._d=function(t){K(this.oe,t),this.wd(),this.dd()},t.prototype.th=function(t,i){var n;K(this.kn,t),this.kn.fixLeftEdge&&this.Md(),this.kn.fixRightEdge&&this.bd(),void 0!==t.barSpacing&&this.yn.es(t.barSpacing),void 0!==t.rightOffset&&this.yn.us(t.rightOffset),void 0!==t.minBarSpacing&&this.yn.es(null!==(n=t.barSpacing)&&void 0!==n?n:this.vd),this.wd(),this.dd(),this.ud.L()},t.prototype.Tn=function(t){var i;return(null===(i=this.Gv[t])||void 0===i?void 0:i.Bt)||null},t.prototype.nn=function(t){var i,n,s,h,r=Math.floor(t),e=Math.ceil(t),u=null===(i=this.Gv[r])||void 0===i?void 0:i.Bt.Ji,o=null===(n=this.Gv[e])||void 0===n?void 0:n.Bt.Ji,l=null===(s=this.Gv[0])||void 0===s?void 0:s.Bt.Ji,a=null===(h=this.Gv[this.Gv.length-1])||void 0===h?void 0:h.Bt.Ji,f=0;return f=this.Gv.length>=2?this.Gv[1].Bt.Ji-this.Gv[0].Bt.Ji:0-this.Gv[0].Bt.Ji,t>=this.Gv.length-1?a+f*(t-this.Gv.length+1):t<0?l-f*-t:u&&o?u+(o-u)*(t-r):null},t.prototype.vv=function(t,i){if(this.Gv.length<1)return null;if(t.Ji>this.Gv[this.Gv.length-1].Bt.Ji)return i?this.Gv.length-1:null;var n=jn(this.Gv,t.Ji,(function(t,i){return t.Bt.Ji<i}));return t.Ji<this.Gv[n].Bt.Ji?i?n:null:n},t.prototype.md=function(t,i){var n=this.vv(t,i);if(null===n)return null;var s=Math.max(n-1,0),h=this.Gv[s].Bt.Ji,r=this.Gv[n].Bt.Ji;return s+(1-(r-t.Ji)/(r-h))},t.prototype.dt=function(){return 0===this.Nu||0===this.Gv.length||null===this.Jv},t.prototype.bs=function(){return this.pd(),this.nd.Kv()},t.prototype.gd=function(){return this.pd(),this.nd.Zv()},t.prototype.Jo=function(){var t=this.bs();if(null===t)return null;var i={from:t.vu(),to:t.du()};return this.yd(i)},t.prototype.yd=function(t){var i=Math.round(t.from),n=Math.round(t.to),s=E(this.kd()),h=E(this.xd());return{from:E(this.Tn(Math.max(s,i))),to:E(this.Tn(Math.min(h,n)))}},t.prototype.Cd=function(t){return{from:E(this.md(t.from,!0)),to:E(this.md(t.to,!0))}},t.prototype.wi=function(){return this.Nu},t.prototype.Vu=function(t){if(isFinite(t)&&!(t<=0)&&this.Nu!==t){if(this.kn.lockVisibleTimeRangeOnResize&&this.Nu){var i=this.vd*t/this.Nu;this.vd=i}if(this.kn.fixLeftEdge){var n=this.bs();if(null!==n)if(n.vu()<=0){var s=this.Nu-t;this.fd-=Math.round(s/this.vd)+1}}this.Nu=t,this.hd=!0,this.Nd(),this.Sd()}},t.prototype.ii=function(t){if(this.dt())return 0;if(1===this.kn.mode){var i=this.Tn(t);return i?this.Xi(i):0}if(!X(t))return 0;var n=this.Td()+this.fd-t;return this.Nu-(n+.5)*this.vd-1},t.prototype.sa=function(t,i){var n;if(1===this.kn.mode)for(var s=this.sd.Zv(),h=(null==s?void 0:s.vu())||0,r=(null==s?void 0:s.du())||0,e=0;e<t.length;e++){var u=(null===(n=this.Tn(t[e].Bt))||void 0===n?void 0:n.Ji)||0;t[e].St=this.Nu*((u-h)/(r-h))}else{var o=this.Td(),l=void 0===i?0:i.from,a=void 0===i?t.length:i.to;for(e=l;e<a;e++){var f=t[e].Bt,c=o+this.fd-f,v=this.Nu-(c+.5)*this.vd-1;t[e].St=v}}},t.prototype.Xi=function(t){if(1===this.kn.mode){var i=this.sd.Zv(),n=(null==i?void 0:i.vu())||0,s=(null==i?void 0:i.du())||0,h=t.Ji;return this.Nu*((h-n)/(s-n))}var r=this.vv(t,!0),e=this.Gv[r].Bt.Ji,u=this.ii(r);if(e===t.Ji)return u;if(0===r||r===this.Gv.length-1){var o=this.Gv[1].Bt.Ji-this.Gv[0].Bt.Ji;return u+(t.Ji-e)/o*this.fa()}return u},t.prototype.Da=function(t,i,n){for(var s=this.Td(),h=void 0===n?0:n.from,r=void 0===n?t.length:n.to,e=h;e<r;e++){var u=t[e].Bt,o=s+this.fd-u,l=this.Nu-(o+.5)*this.vd-1;t[e].St=l,void 0!==t[e].en&&i[t[e].en]?(o=s+this.fd-i[t[e].en],l=this.Nu-(o+.5)*this.vd-1,t[e].La=l):t[e].La=this.Nu}},t.prototype.Ad=function(t){return Math.ceil(this.Ld(t))},t.prototype.Zs=function(t){var i=0-this.Gv[0].Bt.Ji;this.Gv.length>=2&&(i=this.Gv[1].Bt.Ji-this.Gv[0].Bt.Ji);var n=this.Ad(t);if(n>=this.Gv.length){var s=i*(n-this.Gv.length+1);return{Ji:this.Gv[this.Gv.length-1].Bt.Ji+s}}if(n<0){s=i*-n;return{Ji:this.Gv[0].Bt.Ji-s}}return this.Gv[n].Bt},t.prototype.us=function(t){this.hd=!0,this.fd=t,this.Sd(),this.yn.Ed(),this.yn.uo()},t.prototype.fa=function(){return this.vd},t.prototype.es=function(t){this.Bd(t),this.Sd(),this.yn.Ed(),this.yn.uo()},t.prototype.Dd=function(){return this.fd},t.prototype.lr=function(){if(this.dt())return null;if(null!==this.ld)return this.ld;for(var t=this.vd,i=(this.yn.nt().layout.fontSize+4)*(1===this.kn.mode?12:5),n=Math.round(i/t),s=E(this.bs()),h=Math.max(s.vu(),s.vu()-n),r=Math.max(s.du(),s.du()-n),e=this.Qv.Uv(t,i),u=this.kd()+n,o=this.xd()-n,l=this.Fd(),a=this.kn.fixLeftEdge||l,f=this.kn.fixRightEdge||l,c=0,v=0,d=e;v<d.length;v++){var _=d[v],w=1===this.kn.mode?this.md(_.Bt,!0):_.oa;if(h<=w&&w<=r){var M=void 0;c<this.ad.length?((M=this.ad[c]).Vr=this.Pd(_.Bt,_.jv),M.jv=_.jv,M.sr=1===this.kn.mode?this.Xi(_.Bt):this.ii(w)):(M={Wd:!1,Vr:this.Pd(_.Bt,_.jv),jv:_.jv,sr:1===this.kn.mode?this.Xi(_.Bt):this.ii(w)},this.ad.push(M)),this.vd>i/2&&!l?M.Wd=!1:M.Wd=a&&_.oa<=u||f&&_.oa>=o,c++}}return this.ad.length=c,this.ld=this.ad,this.ad},t.prototype.Rd=function(){this.hd=!0,this.es(this.kn.barSpacing),this.us(this.kn.rightOffset)},t.prototype.zd=function(t){this.hd=!0,this.Jv=t,this.Sd(),this.Md()},t.prototype.Od=function(t,i){var n=this.Ld(t),s=this.fa(),h=s+i*(s/10);this.es(h),this.kn.rightBarStaysOnScroll||this.us(this.Dd()+(n-this.Ld(t)))},t.prototype.Je=function(t){this.he&&this.nu(),null===this.se&&null===this.od&&(this.dt()||(this.se=t,this.Vd()))},t.prototype.Ge=function(t){if(null!==this.od){var i=Ci(this.Nu-t,0,this.Nu),n=Ci(this.Nu-E(this.se),0,this.Nu);0!==i&&0!==n&&this.es(this.od.fa*i/n)}},t.prototype.Qe=function(){null!==this.se&&(this.se=null,this.Id())},t.prototype.tu=function(t){null===this.he&&null===this.od&&(this.dt()||(this.he=t,this.Vd()))},t.prototype.iu=function(t){if(null!==this.he){var i=(this.he-t)/this.fa();this.fd=E(this.od).Dd+i,this.hd=!0,this.Sd()}},t.prototype.nu=function(){null!==this.he&&(this.he=null,this.Id())},t.prototype.Hd=function(){this.jd(this.kn.rightOffset)},t.prototype.jd=function(t,i){var n=this;if(void 0===i&&(i=400),!isFinite(t))throw new RangeError("offset is required and must be finite number");if(!isFinite(i)||i<=0)throw new RangeError("animationDuration (optional) must be finite positive number");var s=this.fd,h=performance.now(),r=function(){var e=(performance.now()-h)/i,u=e>=1,o=u?t:s+(t-s)*e;n.us(o),u||setTimeout(r,20)};r()},t.prototype.Ot=function(t,i){if(this.hd=!0,this.Gv=t,1===this.kn.mode){for(var n=t[t.length-1].Bt.Ji,s=t[0].Bt.Ji,h=(n-s)/t.length,r=Math.pow(10,Math.floor(Math.log10(h))),e=Math.floor(s/r)*r,u=Math.ceil(n/r)*r,o=[],l=e;l<u;l+=r)o.push({Bt:{Ji:l},Hv:50});this.Qv.Vv(o,0)}else this.Qv.Vv(t,i);this.Sd()},t.prototype.Ud=function(){return this.rd},t.prototype.qd=function(){return this.ed},t.prototype.Yd=function(){return this.ud},t.prototype.Td=function(){return this.Jv||0},t.prototype.$d=function(t){if(1===this.kn.mode){var i=this.nn(t.vu()),n=this.nn(t.du());if(!i||!n)return;var s=this.Gv[this.Gv.length-1].Bt.Ji,h=this.Gv[0].Bt.Ji,r=(s-h)/this.Gv.length,e=(n-h)/r,u=(i-h)/r,o=e-this.Td(),l=e-u+1,a=this.Nu/l;this.Bd(a),this.fd=o}else{var f=t.zv();this.Bd(this.Nu/f),this.fd=t.du()-this.Td()}this.Sd(),this.hd=!0,this.yn.Ed(),this.yn.uo()},t.prototype.Kd=function(){var t=this.kd(),i=this.xd();null!==t&&null!==i&&this.$d(new th(t,i+this.kn.rightOffset))},t.prototype.Zd=function(t){var i=new th(t.from,t.to);this.$d(i)},t.prototype.Gi=function(t){return void 0!==this.oe.timeFormatter?this.oe.timeFormatter(t.Dv||t.Ji):this.Xd.bv(new Date(1e3*t.Ji))},t.prototype.Fd=function(){var t=this.yn.nt(),i=t.handleScroll,n=t.handleScale;return!(i.horzTouchDrag||i.mouseWheel||i.pressedMouseMove||i.vertTouchDrag||n.axisDoubleClickReset||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)},t.prototype.kd=function(){return 0===this.Gv.length?null:0},t.prototype.xd=function(){return 0===this.Gv.length?null:this.Gv.length-1},t.prototype.Jd=function(t){return(this.Nu-1-t)/this.vd},t.prototype.Ld=function(t){var i=this.sd.Zv();if(1===this.kn.mode&&i){var n=i.Mc(t/this.Nu);return this.md({Ji:n},!0)||0}var s=this.Jd(t),h=this.Td()+this.fd-s;return Math.round(1e6*h)/1e6},t.prototype.Bd=function(t){var i=this.vd;this.vd=t,this.Nd(),i!==this.vd&&(this.hd=!0,this.Gd())},t.prototype.pd=function(){var t=this;if(this.hd)if(this.hd=!1,this.dt())this.Qd(rh.Xv());else{var i,n,s=this.Td(),h=this.Nu/this.vd,r=this.fd+s,e=r-h+1;if(1===this.kn.mode&&this.Gv.length){var u=this.Gv[this.Gv.length-1].Bt.Ji,o=this.Gv[0].Bt.Ji,l=(u-o)/this.Gv.length,a=o+e*l,f=o+r*l;this.sd=new rh(new th(a,f)),e=a<o?(a-o)/l:this.Gv.findIndex((function(i,n){return t.Gv[n+1].Bt.Ji>=a})),r=f>u?this.Gv.length-1+(f-u)/l:(i=this.Gv,n=function(t){return t.Bt.Ji<=f},i.reduce((function(t,i,s){return n(i,s)?s:t}),0))}var c=new th(e,r);this.Qd(new rh(c))}},t.prototype.Nd=function(){var t=this.t_();if(this.vd<t&&(this.vd=t,this.hd=!0),0!==this.Nu){var i=.5*this.Nu;this.vd>i&&(this.vd=i,this.hd=!0)}},t.prototype.t_=function(){return this.kn.fixLeftEdge&&this.kn.fixRightEdge&&0!==this.Gv.length?this.Nu/this.Gv.length:this.kn.minBarSpacing},t.prototype.Sd=function(){var t=this.i_();this.fd>t&&(this.fd=t,this.hd=!0);var i=this.n_();null!==i&&this.fd<i&&(this.fd=i,this.hd=!0)},t.prototype.n_=function(){var t=this.kd(),i=this.Jv;return null===t||null===i?null:t-i-1+(this.kn.fixLeftEdge?this.Nu/this.vd:Math.min(2,this.Gv.length))},t.prototype.i_=function(){return this.kn.fixRightEdge?0:this.Nu/this.vd-Math.min(2,this.Gv.length)},t.prototype.Vd=function(){this.od={fa:this.fa(),Dd:this.Dd()}},t.prototype.Id=function(){this.od=null},t.prototype.Pd=function(t,i){var n=this,s=this.td.get(i);return void 0===s&&(s=new Qs((function(t){return n.s_(t,i)})),this.td.set(i,s)),s.bv(t)},t.prototype.s_=function(t,i){var n,s=function(t,i,n){switch(t){case 0:case 10:return i?n?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return i?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(i,this.kn.timeVisible,this.kn.secondsVisible);return void 0!==this.kn.tickMarkFormatter?this.kn.tickMarkFormatter(null!==(n=t.Dv)&&void 0!==n?n:t.Ji,s,this.oe.locale):function(t,i,n){var s={};switch(i){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}var h=void 0===t.Dv?new Date(1e3*t.Ji):new Date(Date.UTC(t.Dv.year,t.Dv.month-1,t.Dv.day));return new Date(h.getUTCFullYear(),h.getUTCMonth(),h.getUTCDate(),h.getUTCHours(),h.getUTCMinutes(),h.getUTCSeconds(),h.getUTCMilliseconds()).toLocaleString(n,s)}(t,s,this.oe.locale)},t.prototype.Qd=function(t){var i=this.nd;this.nd=t,ih(i.Kv(),this.nd.Kv())||this.rd.L(),ih(i.Zv(),this.nd.Zv())||this.ed.L(),this.Gd()},t.prototype.Gd=function(){this.ld=null},t.prototype.wd=function(){this.Gd(),this.td.clear()},t.prototype.dd=function(){var t=this.oe.dateFormat;this.kn.timeVisible?this.Xd=new Gs({pv:t,gv:this.kn.secondsVisible?"%h:%m:%s":"%h:%m",yv:"   ",kv:this.oe.locale}):this.Xd=new Zs(t,this.oe.locale)},t.prototype.Md=function(){if(this.kn.fixLeftEdge){var t=this.kd();if(null!==t){var i=this.bs();if(null!==i){var n=i.vu()-t;if(n<0){var s=this.fd-n-1;this.us(s)}this.Nd()}}}},t.prototype.bd=function(){this.Sd(),this.Nd()},t}();var uh,oh=function(t){function i(i){var n=t.call(this)||this;return n.h_=new Map,n.ni=i,n}return U(i,t),i.prototype.gt=function(t){},i.prototype.yt=function(t){if(this.ni.$t){t.save();for(var i=0,n=0,s=this.ni.$h;n<s.length;n++){if(0!==(o=s[n]).ki.length){t.font=o.q;var h=this.r_(t,o.ki);h>this.ni.wi?o.Od=this.ni.wi/h:o.Od=1,i+=o.e_*o.Od}}var r=0;switch(this.ni.u_){case"top":r=0;break;case"center":r=Math.max((this.ni.Mi-i)/2,0);break;case"bottom":r=Math.max(this.ni.Mi-i,0)}t.fillStyle=this.ni.$;for(var e=0,u=this.ni.$h;e<u.length;e++){var o=u[e];t.save();var l=0;switch(this.ni.o_){case"left":t.textAlign="left",l=o.e_/2;break;case"center":t.textAlign="center",l=this.ni.wi/2;break;case"right":t.textAlign="right",l=this.ni.wi-1-o.e_/2}t.translate(l,r),t.textBaseline="top",t.font=o.q,t.scale(o.Od,o.Od),t.fillText(o.ki,0,o.l_),t.restore(),r+=o.e_*o.Od}t.restore()}},i.prototype.r_=function(t,i){var n=this.a_(t.font),s=n.get(i);return void 0===s&&(s=t.measureText(i).width,n.set(i,s)),s},i.prototype.a_=function(t){var i=this.h_.get(t);return void 0===i&&(i=new Map,this.h_.set(t,i)),i},i}(ot),lh=function(){function t(t){this.Li=!0,this.li={$t:!1,$:"",Mi:0,wi:0,$h:[],u_:"center",o_:"center"},this.ai=new oh(this.li),this.fi=t}return t.prototype.Ot=function(){this.Li=!0},t.prototype.It=function(t,i){return this.Li&&(this.Ht(t,i),this.Li=!1),this.ai},t.prototype.Ht=function(t,i){var n=this.fi.nt(),s=this.li;s.$t=n.visible,s.$t&&(s.$=n.color,s.wi=i,s.Mi=t,s.o_=n.horzAlign,s.u_=n.vertAlign,s.$h=[{ki:n.text,q:st(n.fontSize,n.fontFamily,n.fontStyle),e_:1.2*n.fontSize,l_:0,Od:0}])},t}(),ah=function(t){function i(i,n){var s=t.call(this)||this;return s.kn=n,s.Ln=new lh(s),s}return U(i,t),i.prototype.Vn=function(){return[]},i.prototype.On=function(){return[this.Ln]},i.prototype.nt=function(){return this.kn},i.prototype.Hn=function(){this.Ln.Ot()},i}(Tt);!function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"}(uh||(uh={}));var fh,ch,vh,dh,_h,wh,Mh=function(){function t(t,i){this.f_=[],this.c_=new Map,this.v_=[],this.Nu=0,this.d_=null,this.__=null,this.w_=new $,this.M_=new $,this.b_=!1,this.m_=null,this.p_=t,this.kn=i,this.g_=new et(this),this.Au=new eh(this,i.timeScale,this.kn.localization),this.zt=new At(this,i.crosshair),this.y_=new ah(this,i.watermark),this.k_=new Ys(i.crosshair.magnetThreshold),this.x_=new Wn(this),this.C_(),this.f_[0].Ou(2e3),this.N_=this.S_(0),this.T_=this.S_(1)}return t.prototype.Kc=function(){this.A_(new Et(3))},t.prototype.uo=function(){this.A_(new Et(2))},t.prototype.uv=function(){this.A_(new Et(1))},t.prototype.Vs=function(t){var i=this.L_(t);this.A_(i)},t.prototype.E_=function(){return this.__},t.prototype.jt=function(){for(var t=[],i=0,n=this.f_;i<n.length;i++)for(var s=0,h=n[i].jt();s<h.length;s++){var r=h[s];t.push(r)}return t},t.prototype.B_=function(t){var i=this.__;this.__=t,null!==i&&this.Vs(i.D_),null!==t&&this.Vs(t.D_)},t.prototype.nt=function(){return this.kn},t.prototype.th=function(t){K(this.kn,t),this.f_.forEach((function(i){return i.Pu(t)})),void 0!==t.timeScale&&this.Au.th(t.timeScale),void 0!==t.localization&&this.Au._d(t.localization),(t.leftPriceScale||t.rightPriceScale)&&this.w_.L(),this.N_=this.S_(0),this.T_=this.S_(1),this.Kc()},t.prototype.F_=function(t,i){if("left"!==t)if("right"!==t){var n=this.P_(t);null!==n&&(n.Jt.th(i),this.w_.L())}else this.th({rightPriceScale:i});else this.th({leftPriceScale:i})},t.prototype.P_=function(t){for(var i=0,n=this.f_;i<n.length;i++){var s=n[i],h=s.Wu(t);if(null!==h)return{vi:s,Jt:h}}return null},t.prototype.qt=function(){return this.Au},t.prototype.Qs=function(){return this.f_},t.prototype.W_=function(){return this.y_},t.prototype.R_=function(){return this.x_},t.prototype.Ao=function(){return this.zt},t.prototype.Ho=function(){return this.k_},t.prototype.z_=function(){return this.M_},t.prototype.O_=function(t,i){t.ke(i),this.Ed()},t.prototype.Vu=function(t){this.Nu=t,this.Au.Vu(this.Nu),this.f_.forEach((function(i){return i.Vu(t)})),this.Ed()},t.prototype.C_=function(t){if(void 0!==t)if(t>this.f_.length)for(var i=this.f_.length;i<t;i++)this.C_(i);else if(t<this.f_.length)return this.f_[t];var n=void 0===t?this.f_.length-1+1:t,s=new Ki(this.Au,this,n);void 0!==t?this.f_.splice(t,0,s):this.f_.push(s),this.V_();var h=new Et(3);return h.Xn(n,{Jn:0,Gn:!0}),this.A_(h),s},t.prototype.I_=function(t){var i=this;if(0!==t){if(this.f_[t].Ue().forEach((function(t){t instanceof qs&&i.H_(t)})),this.b_=!0,t!==this.f_.length-1)for(var n=function(t){s.f_[t].Ue().forEach((function(i){i instanceof qs&&i.th({pane:t-1})}))},s=this,h=t+1;h<this.f_.length;h++)n(h);this.f_.splice(t,1),this.b_=!1,this.V_();var r=new Et(3);this.A_(r)}},t.prototype.j_=function(t,i){var n=this.f_[t],s=this.f_[i];this.b_=!0,n.Ue().forEach((function(t){t instanceof qs&&t.th({pane:i})})),s.Ue().forEach((function(i){i instanceof qs&&i.th({pane:t})})),this.f_[t]=s,this.f_[i]=n,this.b_=!1,this.V_(),this.A_(new Et(3))},t.prototype.Zu=function(t,i,n){t.Zu(i,n)},t.prototype.Xu=function(t,i,n){t.Xu(i,n),this.Xc(),this.A_(this.U_(t,2))},t.prototype.Ju=function(t,i){t.Ju(i),this.A_(this.U_(t,2))},t.prototype.Gu=function(t,i,n){i.we()||t.Gu(i,n)},t.prototype.Qu=function(t,i,n){i.we()||(t.Qu(i,n),this.Xc(),this.A_(this.U_(t,2)))},t.prototype.io=function(t,i){i.we()||(t.io(i),this.A_(this.U_(t,2)))},t.prototype.ho=function(t,i){t.ho(i),this.A_(this.U_(t,2))},t.prototype.q_=function(t){this.Au.Je(t)},t.prototype.Y_=function(t,i){var n=this.qt();if(!n.dt()&&0!==i){var s=n.wi();t=Math.max(1,Math.min(t,s)),n.Od(t,i),this.Ed()}},t.prototype.K_=function(t){this.Z_(0),this.X_(t),this.J_()},t.prototype.G_=function(t){this.Au.Ge(t),this.Ed()},t.prototype.Q_=function(){this.Au.Qe(),this.uo()},t.prototype.Z_=function(t){this.d_=t,this.Au.tu(t)},t.prototype.X_=function(t){var i=!1;return null!==this.d_&&Math.abs(t-this.d_)>20&&(this.d_=null,i=!0),this.Au.iu(t),this.Ed(),i},t.prototype.J_=function(){this.Au.nu(),this.uo(),this.d_=null},t.prototype.Vt=function(){return this.v_},t.prototype.tw=function(t,i,n){this.zt.En(t,i);var s=NaN,r=this.Au.Ad(t),e=this.Au.bs();null!==e&&(r=Math.min(Math.max(e.vu(),r),e.du()));var u=n.Nn(),o=u.Kt();null!==o&&(s=u.Sn(i,o)),s=this.k_.tt(s,r,n),this.zt.Pn(r,s,n),this.uv();var l=new h(t,i);l.iw=this.nw(n),this.M_.L(this.zt.Ut(),l)},t.prototype.sw=function(){this.Ao().Rn(),this.uv(),this.M_.L(null,null)},t.prototype.Xc=function(){var t=this.zt.vi();if(null!==t){var i=this.zt.Dn(),n=this.zt.Fn();this.tw(i,n,t)}this.zt.Hn()},t.prototype.hw=function(t,i,n){var s=this.Au.Tn(0);void 0!==i&&void 0!==n&&this.Au.Ot(i,n);var h=this.Au.Tn(0),r=this.Au.Td(),e=this.Au.bs();if(null!==e&&null!==s&&null!==h){var u=e.Lf(r),o=s.Ji>h.Ji,l=null!==t&&t>r&&!o,a=u&&this.Au.nt().shiftVisibleRangeOnNewBar;if(l&&!a){var f=t-r;this.Au.us(this.Au.Dd()-f)}}this.Au.zd(t)},t.prototype.Qc=function(t){null!==t&&t.eo()},t.prototype.$o=function(t){var i=this.f_.find((function(i){return i.Ue().includes(t)}));return void 0===i?null:i},t.prototype.Ed=function(){this.y_.Hn(),this.f_.forEach((function(t){return t.eo()})),this.Xc()},t.prototype.D=function(){this.f_.forEach((function(t){return t.D()})),this.f_.length=0,this.kn.localization.priceFormatter=void 0,this.kn.localization.timeFormatter=void 0},t.prototype.rw=function(){return this.g_},t.prototype.ef=function(){return this.g_.nt()},t.prototype.Ru=function(){return this.w_},t.prototype.ew=function(t,i){var n=i.pane||0;this.f_.length-1<=n&&this.C_(n);var s=this.f_[n],h=this.uw(i,t,s);return this.v_.push(h),1===this.v_.length?this.Kc():this.uo(),h},t.prototype.H_=function(t){var i=this.$o(t),n=this.v_.indexOf(t);A(-1!==n,"Series not found"),this.v_.splice(n,1),E(i).$e(t),t.D&&t.D()},t.prototype.ow=function(t,i,n){var s=new Pn[t](this,i,n);return this.f_[0].qe(s,this.Bl()),s},t.prototype.$c=function(t,i){var n=E(this.$o(t));n.$e(t);var s=this.P_(i);if(null===s){var h=t.on();n.qe(t,i,h)}else{h=s.vi===n?t.on():void 0;s.vi.qe(t,i,h)}},t.prototype.Kd=function(){var t=new Et(2);t.ns(),this.A_(t)},t.prototype.lw=function(t){var i=new Et(2);i.hs(t),this.A_(i)},t.prototype.rs=function(){var t=new Et(2);t.rs(),this.A_(t)},t.prototype.es=function(t){var i=new Et(2);i.es(t),this.A_(i)},t.prototype.us=function(t){var i=new Et(2);i.us(t),this.A_(i)},t.prototype.Bl=function(){return this.kn.rightPriceScale.visible?"right":"left"},t.prototype.Zc=function(t,i,n){if(n!==i&&!this.b_){t.nt().pane!==n&&t.th({pane:n});var s=this.$o(t);null==s||s.$e(t);var h=this.C_(n);this.aw(t,h)}},t.prototype.fw=function(){return this.T_},t.prototype.cw=function(){return this.N_},t.prototype.ti=function(t){var i=this.T_,n=this.N_;if(i===n)return i;if(t=Math.max(0,Math.min(100,Math.round(100*t))),null===this.m_||this.m_.Vl!==n||this.m_.Il!==i)this.m_={Vl:n,Il:i,dw:new Map};else{var s=this.m_.dw.get(t);if(void 0!==s)return s}var h=function(t,i,n){var s=V(t),h=s[0],r=s[1],e=s[2],u=s[3],o=V(i),l=o[0],a=o[1],f=o[2],c=o[3],v=[F(h+n*(l-h)),F(r+n*(a-r)),F(e+n*(f-e)),P(u+n*(c-u))];return"rgba(".concat(v[0],", ").concat(v[1],", ").concat(v[2],", ").concat(v[3],")")}(n,i,t/100);return this.m_.dw.set(t,h),h},t.prototype.nw=function(t){var i;return null!==(i=this.c_.get(t))&&void 0!==i?i:0},t.prototype.U_=function(t,i){var n=new Et(i);if(null!==t){var s=this.f_.indexOf(t);n.Xn(s,{Jn:i})}return n},t.prototype.L_=function(t,i){return void 0===i&&(i=2),this.U_(this.$o(t),i)},t.prototype.A_=function(t){this.p_&&this.p_(t),this.f_.forEach((function(t){return t.lo().ar().Ot()}))},t.prototype.uw=function(t,i,n){var s=new qs(this,t,i);return this.aw(s,n),s},t.prototype.aw=function(t,i){var n=t.nt().priceScaleId,s=void 0!==n?n:this.Bl();i.qe(t,s),Lt(s)||t.th(t.nt())},t.prototype.S_=function(t){var i=this.kn.layout;return"gradient"===i.background.type?0===t?i.background.topColor:i.background.bottomColor:i.background.color},t.prototype.V_=function(){this.c_.clear();for(var t=0;t<this.f_.length;t++)this.c_.set(this.f_[t],t)},t}();function bh(t){void 0!==t.borderColor&&(t.borderUpColor=t.borderColor,t.borderDownColor=t.borderColor),void 0!==t.wickColor&&(t.wickUpColor=t.wickColor,t.wickDownColor=t.wickColor)}function mh(t){return!Z(t)&&!J(t)}function ph(t){return Z(t)}!function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"}(fh||(fh={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(ch||(ch={})),function(t){t.Top="top",t.Middle="middle",t.Bottom="bottom"}(vh||(vh={})),function(t){t.Left="left",t.Center="center",t.Right="right"}(dh||(dh={})),function(t){t.Start="start",t.Center="center",t.End="end",t.Left="left",t.Right="right"}(_h||(_h={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(wh||(wh={}));var gh=function(){function t(t,i){this.ri=t,this.ei=i}return t.prototype.br=function(t){return this.ri===t.ri&&this.ei===t.ei},t}();function yh(t){return t.ownerDocument&&t.ownerDocument.defaultView&&t.ownerDocument.defaultView.devicePixelRatio||1}function kh(t){var i=E(t.getContext("2d"));return i.setTransform(1,0,0,1,0,0),i}function xh(t,i){var n=t.createElement("canvas"),s=yh(n);return n.style.width="".concat(i.ri,"px"),n.style.height="".concat(i.ei,"px"),n.width=i.ri*s,n.height=i.ei*s,n}function Ch(i,n){var s=E(i.ownerDocument).createElement("canvas");i.appendChild(s);var h=t(s,{allowDownsampling:!1});return h.resizeCanvas({width:n.ri,height:n.ei}),h}var Nh="undefined"!=typeof window;function Sh(){return!!Nh&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function Th(){return!!Nh&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Ah(t){Nh&&void 0!==window.chrome&&t.addEventListener("mousedown",(function(t){if(1===t.button)return t.preventDefault(),!1}))}var Lh=function(){function t(t,i,n){var s=this;this._w=0,this.ww=null,this.Mw={St:Number.NEGATIVE_INFINITY,Tt:Number.POSITIVE_INFINITY},this.bw=0,this.mw=null,this.pw={St:Number.NEGATIVE_INFINITY,Tt:Number.POSITIVE_INFINITY},this.gw=null,this.yw=!1,this.kw=null,this.xw=null,this.Cw=!1,this.Nw=!1,this.Sw=!1,this.Tw=null,this.Aw=null,this.Lw=null,this.Ew=null,this.Bw=null,this.Dw=null,this.Fw=null,this.Pw=0,this.Ww=!1,this.Rw=!1,this.zw=!1,this.Ow=0,this.Vw=null,this.Iw=!Th(),this.Hw=function(t){s.jw(t)},this.Uw=function(t){if(s.qw(t)){var i=s.Yw(t);if(++s.bw,s.mw&&s.bw>1)s.Kw(Dh(t),s.pw).$w<30&&!s.Sw&&s.Zw(i,s.Jw.Xw),s.Gw()}else{i=s.Yw(t);if(++s._w,s.ww&&s._w>1)s.Kw(Dh(t),s.Mw).$w<5&&!s.Nw&&s.Qw(i,s.Jw.tM),s.iM()}},this.nM=t,this.Jw=i,this.kn=n,this.sM()}return t.prototype.D=function(){null!==this.Tw&&(this.Tw(),this.Tw=null),null!==this.Aw&&(this.Aw(),this.Aw=null),null!==this.Ew&&(this.Ew(),this.Ew=null),null!==this.Bw&&(this.Bw(),this.Bw=null),null!==this.Dw&&(this.Dw(),this.Dw=null),null!==this.Lw&&(this.Lw(),this.Lw=null),this.hM(),this.iM()},t.prototype.rM=function(t){var i=this;this.Ew&&this.Ew();var n=this.eM.bind(this);if(this.Ew=function(){i.nM.removeEventListener("mousemove",n)},this.nM.addEventListener("mousemove",n),!this.qw(t)){var s=this.Yw(t);this.Qw(s,this.Jw.uM),this.Iw=!0}},t.prototype.iM=function(){null!==this.ww&&clearTimeout(this.ww),this._w=0,this.ww=null,this.Mw={St:Number.NEGATIVE_INFINITY,Tt:Number.POSITIVE_INFINITY}},t.prototype.Gw=function(){null!==this.mw&&clearTimeout(this.mw),this.bw=0,this.mw=null,this.pw={St:Number.NEGATIVE_INFINITY,Tt:Number.POSITIVE_INFINITY}},t.prototype.eM=function(t){if(!this.zw&&null===this.xw&&!this.qw(t)){var i=this.Yw(t);this.Qw(i,this.Jw.oM),this.Iw=!0}},t.prototype.lM=function(t){var i=Ph(t.changedTouches,E(this.Vw));if(null!==i&&(this.Ow=Fh(t),null===this.Fw&&!this.Rw)){this.Ww=!0;var n=this.Kw(Dh(i),E(this.xw)),s=n.aM,h=n.fM,r=n.$w;if(this.Cw||!(r<5)){if(!this.Cw){var e=.5*s,u=h>=e&&!this.kn.cM(),o=e>h&&!this.kn.vM();u||o||(this.Rw=!0),this.Cw=!0,this.Sw=!0,this.hM(),this.Gw()}if(!this.Rw){var l=this.Yw(t,i);this.Zw(l,this.Jw.dM),Bh(t)}}}},t.prototype._M=function(t){if(0===t.button&&(this.Kw(Dh(t),E(this.kw)).$w>=5&&(this.Nw=!0,this.iM()),this.Nw)){var i=this.Yw(t);this.Qw(i,this.Jw.wM)}},t.prototype.Kw=function(t,i){var n=Math.abs(i.St-t.St),s=Math.abs(i.Tt-t.Tt);return{aM:n,fM:s,$w:n+s}},t.prototype.MM=function(t){var i=Ph(t.changedTouches,E(this.Vw));if(null===i&&0===t.touches.length&&(i=t.changedTouches[0]),null!==i){this.Vw=null,this.Ow=Fh(t),this.hM(),this.xw=null,this.Dw&&(this.Dw(),this.Dw=null);var n=this.Yw(t,i);if(this.Zw(n,this.Jw.bM),++this.bw,this.mw&&this.bw>1)this.Kw(Dh(i),this.pw).$w<30&&!this.Sw&&this.Zw(n,this.Jw.Xw),this.Gw();else this.Sw||(this.Zw(n,this.Jw.mM),this.Jw.mM&&Bh(t));0===this.bw&&Bh(t),0===t.touches.length&&this.yw&&(this.yw=!1,Bh(t))}},t.prototype.jw=function(t){if(0===t.button){var i=this.Yw(t);if(this.kw=null,this.zw=!1,this.Bw&&(this.Bw(),this.Bw=null),Sh())this.nM.ownerDocument.documentElement.removeEventListener("mouseleave",this.Hw);if(!this.qw(t))if(this.Qw(i,this.Jw.pM),++this._w,this.ww&&this._w>1)this.Kw(Dh(t),this.Mw).$w<5&&!this.Nw&&this.Qw(i,this.Jw.tM),this.iM();else this.Nw||this.Qw(i,this.Jw.gM)}},t.prototype.hM=function(){null!==this.gw&&(clearTimeout(this.gw),this.gw=null)},t.prototype.yM=function(t){if(null===this.Vw){var i=t.changedTouches[0];this.Vw=i.identifier,this.Ow=Fh(t);var n=this.nM.ownerDocument.documentElement;this.Sw=!1,this.Cw=!1,this.Rw=!1,this.xw=Dh(i),this.Dw&&(this.Dw(),this.Dw=null);var s=this.lM.bind(this),h=this.MM.bind(this);this.Dw=function(){n.removeEventListener("touchmove",s),n.removeEventListener("touchend",h)},n.addEventListener("touchmove",s,{passive:!1}),n.addEventListener("touchend",h,{passive:!1}),this.hM(),this.gw=setTimeout(this.kM.bind(this,t),240);var r=this.Yw(t,i);this.Zw(r,this.Jw.xM),this.mw||(this.bw=0,this.mw=setTimeout(this.Gw.bind(this),500),this.pw=Dh(i))}},t.prototype.CM=function(t){if(0===t.button){var i=this.nM.ownerDocument.documentElement;Sh()&&i.addEventListener("mouseleave",this.Hw),this.Nw=!1,this.kw=Dh(t),this.Bw&&(this.Bw(),this.Bw=null);var n=this._M.bind(this),s=this.jw.bind(this);if(this.Bw=function(){i.removeEventListener("mousemove",n),i.removeEventListener("mouseup",s)},i.addEventListener("mousemove",n),i.addEventListener("mouseup",s),this.zw=!0,!this.qw(t)){var h=this.Yw(t);this.Qw(h,this.Jw.NM),this.ww||(this._w=0,this.ww=setTimeout(this.iM.bind(this),500),this.Mw=Dh(t))}}},t.prototype.sM=function(){var t=this;this.nM.addEventListener("mouseenter",this.rM.bind(this)),this.nM.addEventListener("touchcancel",this.hM.bind(this));var i=this.nM.ownerDocument,n=function(i){t.Jw.SM&&(i.target&&t.nM.contains(i.target)||t.Jw.SM())};this.Aw=function(){i.removeEventListener("touchstart",n)},this.Tw=function(){i.removeEventListener("mousedown",n)},i.addEventListener("mousedown",n),i.addEventListener("touchstart",n,{passive:!0}),Th()&&(this.Lw=function(){t.nM.removeEventListener("dblclick",t.Uw)},this.nM.addEventListener("dblclick",this.Uw)),this.nM.addEventListener("mouseleave",this.TM.bind(this)),this.nM.addEventListener("touchstart",this.yM.bind(this),{passive:!0}),Ah(this.nM),this.nM.addEventListener("mousedown",this.CM.bind(this)),this.AM(),this.nM.addEventListener("touchmove",(function(){}),{passive:!1})},t.prototype.AM=function(){var t=this;void 0===this.Jw.LM&&void 0===this.Jw.EM&&void 0===this.Jw.BM||(this.nM.addEventListener("touchstart",(function(i){return t.DM(i.touches)}),{passive:!0}),this.nM.addEventListener("touchmove",(function(i){if(2===i.touches.length&&null!==t.Fw&&void 0!==t.Jw.EM){var n=Eh(i.touches[0],i.touches[1])/t.Pw;t.Jw.EM(t.Fw,n),Bh(i)}}),{passive:!1}),this.nM.addEventListener("touchend",(function(i){t.DM(i.touches)})))},t.prototype.DM=function(t){1===t.length&&(this.Ww=!1),2!==t.length||this.Ww||this.yw?this.FM():this.PM(t)},t.prototype.PM=function(t){var i=this.nM.getBoundingClientRect()||{left:0,top:0};this.Fw={St:(t[0].clientX-i.left+(t[1].clientX-i.left))/2,Tt:(t[0].clientY-i.top+(t[1].clientY-i.top))/2},this.Pw=Eh(t[0],t[1]),void 0!==this.Jw.LM&&this.Jw.LM(),this.hM()},t.prototype.FM=function(){null!==this.Fw&&(this.Fw=null,void 0!==this.Jw.BM&&this.Jw.BM())},t.prototype.TM=function(t){if(this.Ew&&this.Ew(),!this.qw(t)&&this.Iw){var i=this.Yw(t);this.Qw(i,this.Jw.WM),this.Iw=!Th()}},t.prototype.kM=function(t){var i=Ph(t.touches,E(this.Vw));if(null!==i){var n=this.Yw(t,i);this.Zw(n,this.Jw.RM),this.Sw=!0,this.yw=!0}},t.prototype.qw=function(t){return t.sourceCapabilities&&void 0!==t.sourceCapabilities.firesTouchEvents?t.sourceCapabilities.firesTouchEvents:Fh(t)<this.Ow+500},t.prototype.Zw=function(t,i){i&&i.call(this.Jw,t)},t.prototype.Qw=function(t,i){i&&i.call(this.Jw,t)},t.prototype.Yw=function(t,i){var n=i||t,s=this.nM.getBoundingClientRect()||{left:0,top:0};return{zM:n.clientX,OM:n.clientY,VM:n.pageX,IM:n.pageY,HM:n.screenX,jM:n.screenY,UM:n.clientX-s.left,qM:n.clientY-s.top,YM:t.ctrlKey,$M:t.altKey,KM:t.shiftKey,ZM:t.metaKey,XM:!t.type.startsWith("mouse")&&"contextmenu"!==t.type&&"click"!==t.type,JM:t.type,GM:n.target,QM:t.view,tb:function(){"touchstart"!==t.type&&Bh(t)}}},t}();function Eh(t,i){var n=t.clientX-i.clientX,s=t.clientY-i.clientY;return Math.sqrt(n*n+s*s)}function Bh(t){t.cancelable&&t.preventDefault()}function Dh(t){return{St:t.pageX,Tt:t.pageY}}function Fh(t){return t.timeStamp||performance.now()}function Ph(t,i){for(var n=0;n<t.length;++n)if(t[n].identifier===i)return t[n];return null}var Wh=function(){function t(t,i,n,s){if(this.ib=0,this.nb=0,this.sb=0,this.hb=0,this.rb=0,this.eb=0,this.ub=0,this.ob=!1,this.lb=t,this.ab=t.fb()[i],this.cb=t.fb()[n],this.vb=document.createElement("tr"),this.vb.style.height="1px",this._b=document.createElement("td"),this._b.style.position="relative",this._b.style.padding="0",this._b.style.margin="0",this._b.style.height="1.5px",this._b.setAttribute("colspan","3"),this.wb(),this.vb.appendChild(this._b),s)this.Mb=null,this.bb=null;else{this.Mb=document.createElement("div"),this.Mb.style.position="absolute",this.Mb.style.zIndex="50",this.Mb.style.top="-3.75px",this.Mb.style.height="9px",this.Mb.style.width="100%",this.Mb.style.cursor="row-resize",this.Mb.style.backgroundColor="#0092ea",this.Mb.style.opacity="0",this._b.appendChild(this.Mb);var h={uM:this.mb.bind(this),WM:this.pb.bind(this),NM:this.gb.bind(this),xM:this.gb.bind(this),wM:this.yb.bind(this),dM:this.yb.bind(this),pM:this.kb.bind(this),bM:this.kb.bind(this)};this.bb=new Lh(this.Mb,h,{cM:function(){return!1},vM:function(){return!0}})}}return t.prototype.D=function(){null!==this.bb&&this.bb.D()},t.prototype.xb=function(){return this.vb},t.prototype.Cb=function(){return new gh(this.ab.Cb().ri,1)},t.prototype.Nb=function(){var t=this.Cb(),i=xh(document,t),n=kh(i);return n.fillStyle=this.lb.nt().timeScale.borderColor,n.fillRect(0,0,t.ri,t.ei),i},t.prototype.Ot=function(){this.wb()},t.prototype.wb=function(){this._b.style.background=this.lb.nt().timeScale.borderColor},t.prototype.mb=function(t){null!==this.Mb&&(this.Mb.style.opacity="0.15",this._b.style.background="#0092ea")},t.prototype.pb=function(t){null===this.Mb||this.ob||(this.Mb.style.opacity="0",this.wb())},t.prototype.gb=function(t){this.ib=t.IM,this.nb=0,this.sb=this.ab.Cb().ei+this.cb.Cb().ei,this.hb=this.ab.zu()+this.cb.zu(),this.rb=30,this.eb=this.sb-this.rb,this.ub=this.hb/this.sb,this.ob=!0},t.prototype.yb=function(t){this.nb=t.IM-this.ib;var i=this.ab.Cb().ei,n=Ci(i+this.nb,this.rb,this.eb)*this.ub,s=this.hb-n;this.ab.Ou(n),this.cb.Ou(s),this.lb.Sb(),this.ab.Cb().ei!==i&&(this.ib=t.IM),this.lb.ci().Kc()},t.prototype.kb=function(t){this.ib=0,this.nb=0,this.sb=0,this.hb=0,this.rb=0,this.eb=0,this.ub=0,this.ob=!1,this.pb(t)},t}();function Rh(t,i){return t.Tb-i.Tb}function zh(t,i,n){var s=(t.Tb-i.Tb)/(t.Bt-i.Bt);return Math.sign(s)*Math.min(Math.abs(s),n)}var Oh=function(){function t(t,i,n,s){this.Ab=null,this.Lb=null,this.Eb=null,this.Bb=null,this.Db=null,this.Fb=0,this.Pb=0,this.Wb=!1,this.Rb=t,this.zb=i,this.Ob=n,this.cr=s}return t.prototype.Vb=function(t,i){if(null!==this.Ab){if(this.Ab.Bt===i)return void(this.Ab.Tb=t);if(Math.abs(this.Ab.Tb-t)<this.cr)return}this.Bb=this.Eb,this.Eb=this.Lb,this.Lb=this.Ab,this.Ab={Bt:i,Tb:t}},t.prototype.cf=function(t,i){if(null!==this.Ab&&null!==this.Lb&&!(i-this.Ab.Bt>50)){var n=0,s=zh(this.Ab,this.Lb,this.zb),h=Rh(this.Ab,this.Lb),r=[s],e=[h];if(n+=h,null!==this.Eb){var u=zh(this.Lb,this.Eb,this.zb);if(Math.sign(u)===Math.sign(s)){var o=Rh(this.Lb,this.Eb);if(r.push(u),e.push(o),n+=o,null!==this.Bb){var l=zh(this.Eb,this.Bb,this.zb);if(Math.sign(l)===Math.sign(s)){var a=Rh(this.Eb,this.Bb);r.push(l),e.push(a),n+=a}}}}for(var f,c,v,d=0,_=0;_<r.length;++_)d+=e[_]/n*r[_];if(!(Math.abs(d)<this.Rb))this.Db={Tb:t,Bt:i},this.Pb=d,this.Fb=(f=Math.abs(d),c=this.Ob,v=Math.log(c),Math.log(1*v/-f)/v)}},t.prototype.Ib=function(t){var i=E(this.Db),n=t-i.Bt;return i.Tb+this.Pb*(Math.pow(this.Ob,n)-1)/Math.log(this.Ob)},t.prototype.zs=function(t){return null===this.Db||this.Hb(t)===this.Fb},t.prototype.jb=function(){return this.Wb},t.prototype.Ub=function(){this.Wb=!0},t.prototype.Hb=function(t){var i=t-E(this.Db).Bt;return Math.min(i,this.Fb)},t}(),Vh=function(){function t(t,i,n,s){this.Bf=new rt(200),this.st=0,this.qb="",this.Df="",this.W=[],this.Yb=new Map,this.st=t,this.qb=i,this.Df=st(t,n,s)}return t.prototype.D=function(){this.Bf.R(),this.W=[],this.Yb.clear()},t.prototype.$b=function(t,i,n,s,h){var r=this.Kb(t,i);if("left"!==h){var e=yh(t.canvas);n-=Math.floor(r.Zb*e)}s-=Math.floor(r.Mi/2),t.drawImage(r.Xb,n,s,r.wi,r.Mi)},t.prototype.Kb=function(t,i){var n,s=this;if(this.Yb.has(i))n=L(this.Yb.get(i));else{if(this.W.length>=200){var h=L(this.W.shift());this.Yb.delete(h)}var r=yh(t.canvas),e=Math.ceil(this.st/4.5),u=Math.round(this.st/10),o=Math.ceil(this.Bf.O(t,i)),l=Ti(Math.round(o+2*e)),a=Ti(this.st+2*e),f=xh(document,new gh(l,a));n={ki:i,Zb:Math.round(Math.max(1,o)),wi:Math.ceil(l*r),Mi:Math.ceil(a*r),Xb:f},0!==o&&(this.W.push(n.ki),this.Yb.set(n.ki,n)),wt(t=kh(n.Xb),r,(function(){t.font=s.Df,t.fillStyle=s.qb,t.fillText(i,0,a-e-u)}))}return n},t}(),Ih=function(){function t(t,i,n,s){var h=this;this.Oi=null,this.Jb=null,this.Gb=!1,this.Qb=new rt(50),this.tm=new Vh(11,"#000"),this.qb=null,this.Df=null,this.im=0,this.nm=!1,this.sm=function(){h.hm(h.g_.nt()),h.nm||h.cn.rm().ci().uo()},this.um=function(){h.nm||h.cn.rm().ci().uo()},this.cn=t,this.kn=i,this.g_=n,this.om="left"===s,this._b=document.createElement("div"),this._b.style.height="100%",this._b.style.overflow="hidden",this._b.style.width="25px",this._b.style.left="0",this._b.style.position="relative",this.lm=Ch(this._b,new gh(16,16)),this.lm.subscribeCanvasConfigured(this.sm);var r=this.lm.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.am=Ch(this._b,new gh(16,16)),this.am.subscribeCanvasConfigured(this.um);var e=this.am.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0";var u={NM:this.gb.bind(this),xM:this.gb.bind(this),wM:this.yb.bind(this),dM:this.yb.bind(this),SM:this.fm.bind(this),pM:this.kb.bind(this),bM:this.kb.bind(this),tM:this.vm.bind(this),Xw:this.vm.bind(this),uM:this.dm.bind(this),WM:this.pb.bind(this)};this.bb=new Lh(this.am.canvas,u,{cM:function(){return!1},vM:function(){return!0}})}return t.prototype.D=function(){this.bb.D(),this.am.unsubscribeCanvasConfigured(this.um),this.am.destroy(),this.lm.unsubscribeCanvasConfigured(this.sm),this.lm.destroy(),null!==this.Oi&&this.Oi.Xe().A(this),this.Oi=null,this.tm.D()},t.prototype.xb=function(){return this._b},t.prototype._m=function(){var t;return!!(null===(t=this.Oi)||void 0===t?void 0:t.nt().floating)},t.prototype.Et=function(){return E(this.Oi).nt().borderColor},t.prototype.wm=function(){return this.kn.textColor},t.prototype.U=function(){return this.kn.fontSize},t.prototype.Mm=function(){return st(this.U(),this.kn.fontFamily)},t.prototype.bm=function(){var t,i=this.g_.nt();i.tt=this.om?"right":"left";var n=this.qb!==i.$,s=this.Df!==i.q;return(n||s)&&(this.hm(i),this.qb=i.$),s&&(this.Qb.R(),this.Df=i.q),(null===(t=this.Oi)||void 0===t?void 0:t.nt().floating)?(this.om?(this._b.style.bottom="0",this._b.style.zIndex="2",this._b.style.position="absolute"):this._b.style.left="-100%",this._b.style.pointerEvents="none"):(this._b.style.left="initial",this._b.style.bottom="initial",this._b.style.zIndex="initial",this._b.style.position="relative",this._b.style.pointerEvents="initial"),i},t.prototype.pm=function(){if(null===this.Oi)return 0;var t=34,i=this.bm(),n=kh(this.lm.canvas),s=this.Oi.lr();n.font=this.Mm(),s.length>0&&(t=Math.max(this.Qb.O(n,s[0].Vr),this.Qb.O(n,s[s.length-1].Vr)));for(var h=this.te().filter((function(t){return t instanceof pt})),r=h.length;r--;){var e=this.Qb.O(n,h[r].ki());e>t&&(t=e)}var u=this.Oi.Kt();if(null!==u&&null!==this.Jb){var o=this.Oi.Sn(1,u),l=this.Oi.Sn(this.Jb.ei-2,u);t=Math.max(t,this.Qb.O(n,this.Oi.Ii(Math.floor(Math.min(o,l))+.11111111111111,u)),this.Qb.O(n,this.Oi.Ii(Math.ceil(Math.max(o,l))-.11111111111111,u)))}var a=t||34,f=Math.ceil(i.I+i.H+i.Z+i.X+a);return f+=f%2},t.prototype.gm=function(t){if(t.ri<0||t.ei<0)throw new Error("Try to set invalid size to PriceAxisWidget "+JSON.stringify(t));null!==this.Jb&&this.Jb.br(t)||(this.Jb=t,this.nm=!0,this.lm.resizeCanvas({width:t.ri,height:t.ei}),this.am.resizeCanvas({width:t.ri,height:t.ei}),this.nm=!1,this._b.style.width=t.ri+"px",this._b.style.height=t.ei+"px",this._b.style.minWidth=t.ri+"px")},t.prototype.ym=function(){return E(this.Jb).ri},t.prototype.an=function(t){this.Oi!==t&&(null!==this.Oi&&this.Oi.Xe().A(this),this.Oi=t,t.Xe().k(this.Gr.bind(this),this))},t.prototype.Jt=function(){return this.Oi},t.prototype.R=function(){var t=this.cn.Xs();this.cn.rm().ci().ho(t,E(this.Jt()))},t.prototype.km=function(t){if(null!==this.Jb){if(1!==t){var i=kh(this.lm.canvas),n=this.cn.Yo(this.lm);this.xm(),this.Cm(i,n),this.Ra(i,n),this.Nm(i,n,!0),this.Sm(i,n),this.Nm(i,n)}var s=kh(this.am.canvas),h=this.cn.Yo(this.am),r=this.Jb.ri,e=this.Jb.ei;wt(s,h.bt,(function(){s.clearRect(0,0,r,e)})),this.Tm(s,h)}},t.prototype.Nb=function(){return this.lm.canvas},t.prototype.Ot=function(){var t;null===(t=this.Oi)||void 0===t||t.lr()},t.prototype.gb=function(t){if(null!==this.Oi&&!this.Oi.dt()&&this.cn.rm().nt().handleScale.axisPressedMouseMove.price){var i=this.cn.rm().ci(),n=this.cn.Xs();this.Gb=!0,i.Zu(n,this.Oi,t.qM)}},t.prototype.yb=function(t){if(null!==this.Oi&&this.cn.rm().nt().handleScale.axisPressedMouseMove.price){var i=this.cn.rm().ci(),n=this.cn.Xs(),s=this.Oi;i.Xu(n,s,t.qM)}},t.prototype.fm=function(){if(null!==this.Oi&&this.cn.rm().nt().handleScale.axisPressedMouseMove.price){var t=this.cn.rm().ci(),i=this.cn.Xs(),n=this.Oi;this.Gb&&(this.Gb=!1,t.Ju(i,n))}},t.prototype.kb=function(t){if(null!==this.Oi&&this.cn.rm().nt().handleScale.axisPressedMouseMove.price){var i=this.cn.rm().ci(),n=this.cn.Xs();this.Gb=!1,i.Ju(n,this.Oi)}},t.prototype.vm=function(t){this.cn.rm().nt().handleScale.axisDoubleClickReset&&this.R()},t.prototype.dm=function(t){null!==this.Oi&&(!this.cn.rm().ci().nt().handleScale.axisPressedMouseMove.price||this.Oi.Me()||this.Oi.be()||this.Am(1))},t.prototype.pb=function(t){this.Am(0)},t.prototype.te=function(){var t=this,i=[],n=null===this.Oi?void 0:this.Oi;return function(s){for(var h=0;h<s.length;++h)for(var r=s[h].Vn(t.cn.Xs(),n),e=0;e<r.length;e++)i.push(r[e])}(this.cn.Xs().Ue()),i},t.prototype.Cm=function(t,i){var n=this;if(null!==this.Jb){var s=this.Jb.ri,h=this.Jb.ei;wt(t,i.bt,(function(){var i=n.cn.Xs().ci(),r=i.cw(),e=i.fw();r===e?Mt(t,0,0,s,h,r):bt(t,0,0,s,h,r,e)}))}},t.prototype.Ra=function(t,i){if(null!==this.Jb&&null!==this.Oi&&this.Oi.nt().borderVisible){t.save(),t.fillStyle=this.Et();var n,s=i.bt,h=Math.max(1,Math.floor(this.bm().I*s));n=this.om?Math.floor(this.Jb.ri*s)-h:0,t.fillRect(n,0,h,Math.ceil(this.Jb.ei*s)),t.restore()}},t.prototype.Sm=function(t,i){if(null!==this.Jb&&null!==this.Oi){var n=i.bt,s=this.Oi.lr();t.save(),t.strokeStyle=this.Et(),t.font=this.Mm(),t.fillStyle=this.Et();var h=this.bm(),r=this.Oi.nt().borderVisible&&this.Oi.nt().drawTicks,e=this.om?Math.floor((this.Jb.ri-h.H)*n-h.I*n):Math.floor(h.I*n),u=this.om?Math.round(e-h.Z*n):Math.round(e+h.H*n+h.Z*n),o=this.om?"right":"left",l=Math.max(1,Math.floor(n)),a=Math.floor(.5*n);if(r){var f=Math.round(h.H*n);t.beginPath();for(var c=0,v=s;c<v.length;c++){var d=v[c];t.rect(e,Math.round(d.sr*n)-a,f,l)}t.fill()}t.fillStyle=this.wm();for(var _=0,w=s;_<w.length;_++){d=w[_];this.tm.$b(t,d.Vr,u,Math.round(d.sr*n),o)}t.restore()}},t.prototype.xm=function(){if(null!==this.Jb&&null!==this.Oi){var t=this.Jb.ei/2,i=[],n=this.Oi.Ue().slice(),s=this.cn.Xs(),h=this.bm();this.Oi===s.no()&&this.cn.Xs().Ue().forEach((function(t){s.Hu(t)&&n.push(t)}));var r=this.Oi.jt()[0],e=this.Oi;n.forEach((function(n){var h=n.Vn(s,e).filter((function(t){return t instanceof pt}));h.forEach((function(t){t.Pi(void 0),t.Wi()&&i.push(t)})),r===n&&h.length>0&&(t=h[0].xi())}));var u=i.filter((function(i){return i.xi()<=t})),o=i.filter((function(i){return i.xi()>t}));if(u.sort((function(t,i){return i.xi()-t.xi()})),u.length&&o.length&&o.push(u[0]),o.sort((function(t,i){return t.xi()-i.xi()})),i.forEach((function(t){return t.Pi(t.xi())})),this.Oi.nt().alignLabels){for(var l=1;l<u.length;l++){var a=u[l],f=(v=u[l-1]).Mi(h,!1);a.xi()>(d=v.Fi())-f&&a.Pi(d-f)}for(var c=1;c<o.length;c++){var v,d;a=o[c],f=(v=o[c-1]).Mi(h,!0);a.xi()<(d=v.Fi())+f&&a.Pi(d+f)}}}},t.prototype.Nm=function(t,i,n){if(null!==this.Jb){t.save();var s=this.te(),h=this.bm();s.forEach((function(s){var r=s.It();t.save(),n&&r.wt?r.wt(t,h,i):r._t&&r._t(t,h,i),t.restore()})),t.restore()}},t.prototype.Tm=function(t,i){if(null!==this.Jb&&null!==this.Oi){t.save();var n=this.cn.rm().ci(),s=[],h=this.cn.Xs(),r=n.Ao().Vn(h,this.Oi);r.length&&s.push(r);var e=this.bm();s.forEach((function(n){n.forEach((function(n){var s=n.It();t.save(),s._t&&(s._t(t,e,i),t.restore())}))})),t.restore()}},t.prototype.Am=function(t){this._b.style.cursor=1===t?"ns-resize":"default"},t.prototype.Gr=function(){var t=this.pm();this.im<t&&this.cn.rm().ci().Kc(),this.im=t},t.prototype.hm=function(t){this.tm.D(),this.tm=new Vh(t.U,t.$,t.Y)},t}();var Hh=function(){if(!Nh)return!1;var t=!!navigator.maxTouchPoints||!!navigator.msMaxTouchPoints||!!Nh&&("ontouchstart"in window||Boolean(window.DocumentTouch&&document instanceof window.DocumentTouch));return"onorientationchange"in window&&t}();var jh=function(){if(!Nh)return!1;var t=/Android/i.test(navigator.userAgent),i=/iPhone|iPad|iPod|AppleWebKit.+Mobile/i.test(navigator.userAgent);return t||i}();function Uh(t,i,n){t.wt&&t.wt(i,n)}function qh(t,i,n){t._t(i,n)}function Yh(t,i){return t.On()}function $h(t,i){return void 0!==t.ev?t.ev(i):[]}var Kh=function(){function t(t,i){var n=this;this.Jb=new gh(0,0),this.Lm=null,this.Em=null,this.Bm=null,this.Dm=!1,this.Fm=new $,this.Pm=0,this.Wm=!1,this.Rm=null,this.zm=!1,this.Om=null,this.Vm=null,this.sm=function(){return n.Im&&n.yn().uo()},this.um=function(){return n.Im&&n.yn().uo()},this.Hm=t,this.Im=i,this.Im.oo().k(this.jm.bind(this),this,!0);var s=this.yn().nw(E(this.Im));this.Um=document.createElement("td"),this.Um.style.padding="0",this.Um.style.position="relative",this.Um.className+="pane-".concat(s);var h=document.createElement("div");h.style.width="100%",h.style.height="100%",h.style.position="relative",h.style.overflow="hidden",h.style.transform="translateZ(0px)",this.qm=document.createElement("td"),this.qm.style.position="relative",this.qm.style.padding="0",this.Ym=document.createElement("td"),this.Ym.style.padding="0",this.Um.appendChild(h),this.lm=Ch(h,new gh(16,16)),this.lm.subscribeCanvasConfigured(this.sm);var r=this.lm.canvas;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.am=Ch(h,new gh(16,16)),this.am.subscribeCanvasConfigured(this.um);var e=this.am.canvas;e.style.position="absolute",e.style.zIndex="2",e.style.left="0",e.style.top="0",this.vb=document.createElement("tr"),this.vb.appendChild(this.qm),this.vb.appendChild(this.Um),this.vb.appendChild(this.Ym),this.$m(),this.bb=new Lh(this.am.canvas,this,{cM:function(){return null===n.Rm&&!n.Hm.nt().handleScroll.vertTouchDrag},vM:function(){return null===n.Rm&&!n.Hm.nt().handleScroll.horzTouchDrag}})}return t.prototype.D=function(){null!==this.Lm&&this.Lm.D(),null!==this.Em&&this.Em.D(),this.am.unsubscribeCanvasConfigured(this.um),this.am.destroy(),this.lm.unsubscribeCanvasConfigured(this.sm),this.lm.destroy(),null!==this.Im&&this.Im.oo().A(this),this.bb.D()},t.prototype.Xs=function(){return E(this.Im)},t.prototype.Km=function(i){null!==this.Im&&this.Im.oo().A(this),this.Im=i,null!==this.Im&&this.Im.oo().k(t.prototype.jm.bind(this),this,!0),this.$m()},t.prototype.Uo=function(t){var i=t.toString();this.Um.style.cursor!==i&&(this.Um.style.cursor=i)},t.prototype.rm=function(){return this.Hm},t.prototype.xb=function(){return this.vb},t.prototype.$m=function(){if(null!==this.Im&&(this.Zm(),0!==this.yn().Vt().length)){if(null!==this.Lm){var t=this.Im.Ku();this.Lm.an(E(t))}if(null!==this.Em){var i=this.Im.Gs();this.Em.an(E(i))}}},t.prototype.Xm=function(){null!==this.Lm&&this.Lm.Ot(),null!==this.Em&&this.Em.Ot()},t.prototype.zu=function(){return null!==this.Im?this.Im.zu():0},t.prototype.Ou=function(t){this.Im&&this.Im.Ou(t)},t.prototype.uM=function(t){if(this.Im){this.Jm();var i=t.UM,n=t.qM;this.Gm(i,n)}},t.prototype.NM=function(t){this.Jm(),this.Qm(),this.Gm(t.UM,t.qM)},t.prototype.oM=function(t){if(this.Im){var i=t.UM,n=t.qM;if(t){if(this.tp(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)E(document.activeElement).blur();else{var s=document.getSelection();null!==s&&s.removeAllRanges()}var r=this.yn();if(this.Im.Nn().dt()||r.qt().dt())return;if(null!==this.Rm){var e=r.Ao();this.Om=new h(e.bi(),e.mi()),this.Rm=new h(t.UM,t.qM)}}else this.ip()&&this.np();Hh||(this.Gm(i,n),this.sp(9,t))}},t.prototype.gM=function(t){if(null!==this.Im){this.Jm(),this.sp(3,t);var i=t.UM,n=t.qM;if(this.Fm.B()){var s=this.yn().Ao().Ut(),r=this.yn().nw(E(this.Im)),e=new h(i,n);e.iw=r,this.Fm.L(s,e)}this.hp()}},t.prototype.wM=function(t){if(null!==this.Im){var i=this.yn(),n=t.UM,s=t.qM;if(null!==this.Rm){this.zm=!1;var r=E(this.Om),e=r.x+(n-this.Rm.x),u=r.y+(s-this.Rm.y);this.Gm(e,u)}else this.ip()||this.Gm(n,s);if(null===this.Bm&&this.sp(11,t),!i.qt().dt()&&!t.Lo){var o=this.Hm.nt(),l=o.handleScroll,a=o.kineticScroll;if(l.pressedMouseMove&&"touch"!==t.ss||(l.horzTouchDrag||l.vertTouchDrag)&&"mouse"!==t.ss){var f=this.Im.Nn(),c=performance.now();null!==this.Bm||this.rp()||(this.Bm=new h(t.zM,t.OM),this.Bm.Ji=c,this.Bm.UM=t.UM,this.Bm.qM=t.qM),null!==this.Vm&&this.Vm.Vb(t.UM,c),null===this.Bm||this.Dm||this.Bm.x===t.zM&&this.Bm.y===t.OM||(null===this.Vm&&("touch"===t.ss&&a.touch||"mouse"===t.ss&&a.mouse)&&(this.Vm=new Oh(.2,7,.997,15),this.Vm.Vb(this.Bm.UM,this.Bm.Ji),this.Vm.Vb(t.UM,c)),f.dt()||i.Gu(this.Im,f,t.qM),i.Z_(t.UM),this.Dm=!0),this.Dm&&(f.dt()||i.Qu(this.Im,f,t.qM),i.X_(t.UM))}}}},t.prototype.pM=function(t){null!==this.Im&&(this.Jm(),this.sp(10,t),this.Wm=!1,this.ep(t))},t.prototype.RM=function(t){if(this.Wm=!0,null===this.Rm&&jh){var i=new h(t.UM,t.qM);this.up(i,i)}},t.prototype.WM=function(t){null!==this.Im&&(this.Jm(),this.Im.ci().B_(null),this.np())},t.prototype.op=function(){return this.Fm},t.prototype.LM=function(){this.Pm=1,this.tp()},t.prototype.EM=function(t,i){if(this.Hm.nt().handleScale.pinch){var n=5*(i-this.Pm);this.Pm=i,this.yn().Y_(t.St,n)}},t.prototype.xM=function(t){if(this.Wm=!1,this.zm=null!==this.Rm,this.Qm(),null!==this.Rm){var i=this.yn().Ao();this.Om=new h(i.bi(),i.mi()),this.Rm=new h(t.UM,t.qM)}},t.prototype.dM=function(t){if(null!==this.Im){var i=t.UM,n=t.qM;if(null===this.Rm)this.lp(t);else{this.zm=!1;var s=E(this.Om),h=s.x+(i-this.Rm.x),r=s.y+(n-this.Rm.y);this.Gm(h,r)}}},t.prototype.bM=function(t){0===this.rm().nt().trackingMode.exitMode&&(this.zm=!0),this.hp(),this.ep(t)},t.prototype.Mt=function(t,i){return null},t.prototype.ap=function(t,i){E("left"===i?this.Lm:this.Em).gm(new gh(t,this.Jb.ei))},t.prototype.Cb=function(){return this.Jb},t.prototype.gm=function(t){if(t.ri<0||t.ei<0)throw new Error("Try to set invalid size to PaneWidget "+JSON.stringify(t));this.Jb.br(t)||(this.Jb=t,this.lm.resizeCanvas({width:t.ri,height:t.ei}),this.am.resizeCanvas({width:t.ri,height:t.ei}),this.Um.style.width=t.ri+"px",this.Um.style.height=t.ei+"px")},t.prototype.fp=function(){var t=E(this.Im);t.Yu(t.Ku()),t.Yu(t.Gs());for(var i=0,n=t.jt();i<n.length;i++){var s=n[i];if(t.Hu(s)){var h=s.Jt();null!==h&&t.Yu(h),s.Hn()}}},t.prototype.Nb=function(){return this.lm.canvas},t.prototype.km=function(t){if(0!==t&&null!==this.Im){if(t>1&&this.fp(),null!==this.Lm&&this.Lm.km(t),null!==this.Em&&this.Em.km(t),1!==t){var i=kh(this.lm.canvas),n=this.Yo(this.lm);i.save(),this.Cm(i,n),this.Im&&(this.cp(i,n),this.vp(i,n),this.Nm(i,n,Yh)),i.restore()}var s=kh(this.am.canvas),h=this.Yo(this.am);s.clearRect(0,0,Math.ceil(this.Jb.ri*this.am.pixelRatio),Math.ceil(this.Jb.ei*this.am.pixelRatio)),this.Nm(s,h,$h),this.dp(s,h)}},t.prototype._p=function(){return this.Lm},t.prototype.wp=function(){return this.Um},t.prototype.Mp=function(){return this.Em},t.prototype.Yo=function(t){return t||(t=this.lm),{bt:t.pixelRatio,al:t.canvas.width,bp:t.canvas.height,Ni:this.rm().ci().qt().wi(),Ch:this.Xs().Mi()}},t.prototype.sp=function(t,i){var n=this;if(null!==this.Im){this.Uo(Ui.Mu),this.yn().R_().To(this,t,i);for(var s=this.Im.Ue(),h=s.length-1;h>=0;h--){s[h].On().forEach((function(s){void 0!==s.To&&s.To(n,t,i)}))}}},t.prototype.jm=function(){null!==this.Im&&this.Im.oo().A(this),this.Im=null},t.prototype.Cm=function(t,i){var n=this;wt(t,i.bt,(function(){var i=n.yn(),s=i.cw(),h=i.fw();s===h?Mt(t,0,0,n.Jb.ri,n.Jb.ei,h):bt(t,0,0,n.Jb.ri,n.Jb.ei,s,h)}))},t.prototype.cp=function(t,i){var n=E(this.Im),s=n.lo().ar().It(n.Mi(),n.wi(),n);null!==s&&(t.save(),s._t(t,i),t.restore())},t.prototype.vp=function(t,i){var n=this.yn().W_();this.mp(t,i,Yh,Uh,n),this.mp(t,i,Yh,qh,n)},t.prototype.dp=function(t,i){this.mp(t,i,Yh,qh,this.yn().Ao())},t.prototype.Nm=function(t,i,n){for(var s=E(this.Im).Ue(),h=0,r=s;h<r.length;h++){var e=r[h];this.mp(t,i,n,Uh,e)}for(var u=0,o=s;u<o.length;u++){e=o[u];this.mp(t,i,n,qh,e)}},t.prototype.mp=function(t,i,n,s,h){for(var r=E(this.Im),e=n(h,r),u=r.Mi(),o=r.wi(),l=0,a=e;l<a.length;l++){var f=a[l].It(u,o,r);null!==f&&(t.save(),s(f,t,i),t.restore())}},t.prototype.Zm=function(){if(null!==this.Im){var t=this.Hm,i=this.Im.Ku().nt().visible,n=this.Im.Gs().nt().visible;i||null===this.Lm||(this.qm.removeChild(this.Lm.xb()),this.Lm.D(),this.Lm=null),n||null===this.Em||(this.Ym.removeChild(this.Em.xb()),this.Em.D(),this.Em=null);var s=t.ci().rw();i&&null===this.Lm&&(this.Lm=new Ih(this,t.nt().layout,s,"left"),this.qm.appendChild(this.Lm.xb())),n&&null===this.Em&&(this.Em=new Ih(this,t.nt().layout,s,"right"),this.Ym.appendChild(this.Em.xb()))}},t.prototype.ip=function(){return jh&&null===this.Rm},t.prototype.rp=function(){return jh&&this.Wm||null!==this.Rm},t.prototype.pp=function(t){return Math.max(0,Math.min(t,this.Jb.ri-1))},t.prototype.gp=function(t){return Math.max(0,Math.min(t,this.Jb.ei-1))},t.prototype.Gm=function(t,i){this.yn().tw(this.pp(t),this.gp(i),E(this.Im))},t.prototype.np=function(){this.yn().sw()},t.prototype.hp=function(){this.zm&&(this.Rm=null,this.np())},t.prototype.up=function(t,i){this.Rm=t,this.zm=!1,this.Gm(i.x,i.y);var n=this.yn().Ao();this.Om=new h(n.bi(),n.mi())},t.prototype.yn=function(){return this.Hm.ci()},t.prototype.yp=function(){var t=this.yn(),i=this.Xs(),n=i.Nn();t.io(i,n),t.J_(),this.Bm=null,this.Dm=!1},t.prototype.ep=function(t){var i=this;if(this.Dm){var n=performance.now();if(null!==this.Vm&&this.Vm.cf(t.UM,n),null===this.Vm||this.Vm.zs(n))this.yp();else{var s=this.yn(),h=s.qt(),r=this.Vm,e=function(){if(!r.jb()){var t=performance.now(),n=r.zs(t);if(!r.jb()){var u=h.Dd();s.X_(r.Ib(t)),u===h.Dd()&&(n=!0,i.Vm=null)}n?i.yp():requestAnimationFrame(e)}};requestAnimationFrame(e)}}},t.prototype.Jm=function(){this.Rm=null},t.prototype.Qm=function(){if(this.Im){if(this.tp(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)E(document.activeElement).blur();else{var t=document.getSelection();null!==t&&t.removeAllRanges()}!this.Im.Nn().dt()&&this.yn().qt().dt()}},t.prototype.lp=function(t){if(null!==this.Im){var i=this.yn();if(!i.qt().dt()){var n=this.Hm.nt(),s=n.handleScroll,r=n.kineticScroll;if(s.pressedMouseMove&&!t.XM||(s.horzTouchDrag||s.vertTouchDrag)&&t.XM){var e=this.Im.Nn(),u=performance.now();null!==this.Bm||this.rp()||(this.Bm=new h(t.zM,t.OM),this.Bm.Ji=u,this.Bm.UM=t.UM,this.Bm.qM=t.qM),null!==this.Vm&&this.Vm.Vb(t.UM,u),null===this.Bm||this.Dm||this.Bm.x===t.zM&&this.Bm.y===t.OM||(null===this.Vm&&(t.XM&&r.touch||!t.XM&&r.mouse)&&(this.Vm=new Oh(.2,7,.997,15),this.Vm.Vb(this.Bm.UM,this.Bm.Ji),this.Vm.Vb(t.UM,u)),e.dt()||i.Gu(this.Im,e,t.qM),i.Z_(t.UM),this.Dm=!0),this.Dm&&(e.dt()||i.Qu(this.Im,e,t.qM),i.X_(t.UM))}}}},t.prototype.tp=function(){var t=performance.now(),i=null===this.Vm||this.Vm.zs(t);null!==this.Vm&&(i||this.yp()),null!==this.Vm&&(this.Vm.Ub(),this.Vm=null)},t}(),Zh=function(){function t(t,i,n,s,h){var r=this;this.Li=!0,this.Jb=new gh(0,0),this.sm=function(){return r.km(3)},this.om="left"===t,this.g_=n.rw,this.kn=i,this.kp=s,this.xp=h,this._b=document.createElement("div"),this._b.style.width="25px",this._b.style.height="100%",this._b.style.overflow="hidden",this.lm=Ch(this._b,new gh(16,16)),this.lm.subscribeCanvasConfigured(this.sm)}return t.prototype.D=function(){this.lm.unsubscribeCanvasConfigured(this.sm),this.lm.destroy()},t.prototype.xb=function(){return this._b},t.prototype.Cb=function(){return this.Jb},t.prototype.gm=function(t){if(t.ri<0||t.ei<0)throw new Error("Try to set invalid size to PriceAxisStub "+JSON.stringify(t));this.Jb.br(t)||(this.Jb=t,this.lm.resizeCanvas({width:t.ri,height:t.ei}),this._b.style.width="".concat(t.ri,"px"),this._b.style.minWidth="".concat(t.ri,"px"),this._b.style.height="".concat(t.ei,"px"),this.Li=!0)},t.prototype.km=function(t){if((!(t<3)||this.Li)&&0!==this.Jb.ri&&0!==this.Jb.ei){this.Li=!1;var i=kh(this.lm.canvas),n={bt:this.lm.pixelRatio};this.Cm(i,n),this.Ra(i,n)}},t.prototype.Nb=function(){return this.lm.canvas},t.prototype.Ra=function(t,i){if(this.kp()){var n=this.Jb.ri,s=i.bt;t.save(),t.fillStyle=this.kn.timeScale.borderColor;var h=Math.floor(this.g_.nt().I*s),r=this.om?Math.round(n*s)-h:0;t.fillRect(r,0,h,h),t.restore()}},t.prototype.Cm=function(t,i){var n=this;wt(t,i.bt,(function(){Mt(t,0,0,n.Jb.ri,n.Jb.ei,n.xp())}))},t}();function Xh(t,i){return t.jv>i.jv?t:i}var Jh=function(){function t(t){var i=this;this.Cp=null,this.Np=null,this.V=null,this.Sp=!1,this.Jb=new gh(0,0),this.Tp=new $,this.Qb=new rt(5),this.nm=!1,this.sm=function(){i.nm||i.Hm.ci().uo()},this.um=function(){i.nm||i.Hm.ci().uo()},this.Hm=t,this.kn=t.nt().layout,this.Ap=document.createElement("tr"),this.Lp=document.createElement("td"),this.Lp.style.padding="0",this.Ep=document.createElement("td"),this.Ep.style.padding="0",this._b=document.createElement("td"),this._b.style.height="25px",this._b.style.padding="0",this.Bp=document.createElement("div"),this.Bp.style.width="100%",this.Bp.style.height="100%",this.Bp.style.position="relative",this.Bp.style.overflow="hidden",this._b.appendChild(this.Bp),this.lm=Ch(this.Bp,new gh(16,16)),this.lm.subscribeCanvasConfigured(this.sm);var n=this.lm.canvas;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.am=Ch(this.Bp,new gh(16,16)),this.am.subscribeCanvasConfigured(this.um);var s=this.am.canvas;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.Ap.appendChild(this.Lp),this.Ap.appendChild(this._b),this.Ap.appendChild(this.Ep),this.Dp(),this.Hm.ci().Ru().k(this.Dp.bind(this),this),this.bb=new Lh(this.am.canvas,this,{cM:function(){return!0},vM:function(){return!1}})}return t.prototype.D=function(){this.bb.D(),null!==this.Cp&&this.Cp.D(),null!==this.Np&&this.Np.D(),this.am.unsubscribeCanvasConfigured(this.um),this.am.destroy(),this.lm.unsubscribeCanvasConfigured(this.sm),this.lm.destroy()},t.prototype.xb=function(){return this.Ap},t.prototype.Fp=function(){return this.Cp},t.prototype.Pp=function(){return this.Np},t.prototype.NM=function(t){if(!this.Sp){this.Sp=!0;var i=this.Hm.ci();!i.qt().dt()&&this.Hm.nt().handleScale.axisPressedMouseMove.time&&i.q_(t.UM)}},t.prototype.xM=function(t){this.NM(t)},t.prototype.SM=function(){var t=this.Hm.ci();!t.qt().dt()&&this.Sp&&(this.Sp=!1,this.Hm.nt().handleScale.axisPressedMouseMove.time&&t.Q_())},t.prototype.wM=function(t){var i=this.Hm.ci();!i.qt().dt()&&this.Hm.nt().handleScale.axisPressedMouseMove.time&&i.G_(t.UM)},t.prototype.dM=function(t){this.wM(t)},t.prototype.pM=function(){this.Sp=!1;var t=this.Hm.ci();t.qt().dt()&&!this.Hm.nt().handleScale.axisPressedMouseMove.time||t.Q_()},t.prototype.bM=function(){this.pM()},t.prototype.tM=function(){this.Hm.nt().handleScale.axisDoubleClickReset&&this.Hm.ci().rs()},t.prototype.Xw=function(){this.tM()},t.prototype.uM=function(){this.Hm.ci().nt().handleScale.axisPressedMouseMove.time&&this.Am(1)},t.prototype.WM=function(){this.Am(0)},t.prototype.Cb=function(){return this.Jb},t.prototype.Wp=function(){return this.Tp},t.prototype.Rp=function(t,i,n){this.Jb&&this.Jb.br(t)||(this.Jb=t,this.nm=!0,this.lm.resizeCanvas({width:t.ri,height:t.ei}),this.am.resizeCanvas({width:t.ri,height:t.ei}),this.nm=!1,this._b.style.minWidth=t.ri+"px",this._b.style.width=t.ri+"px",this._b.style.height=t.ei+"px",this.Tp.L(t)),null!==this.Cp&&this.Cp.gm(new gh(i,t.ei)),null!==this.Np&&this.Np.gm(new gh(n,t.ei))},t.prototype.zp=function(){var t=this.Op();return Math.ceil(t.I+t.H+t.U+t.J+t.K)},t.prototype.Ot=function(){this.Hm.ci().qt().lr()},t.prototype.Nb=function(){return this.lm.canvas},t.prototype.km=function(t){if(0!==t){if(1!==t){var i=kh(this.lm.canvas),n=this.Hm.fb()[0].Yo(this.lm);this.Cm(i,n),this.Ra(i,n),this.Nm(this.Hm.ci().jt(),i,n,!0),this.Sm(i,n),this.Nm(this.Hm.ci().jt(),i,n),null!==this.Cp&&this.Cp.km(t),null!==this.Np&&this.Np.km(t)}var s=kh(this.am.canvas),h=this.Hm.fb()[0].Yo(this.am),r=this.am.pixelRatio;s.clearRect(0,0,Math.ceil(this.Jb.ri*r),Math.ceil(this.Jb.ei*r)),this.Nm([this.Hm.ci().Ao()],s,h)}},t.prototype.Cm=function(t,i){var n=this;wt(t,i.bt,(function(){Mt(t,0,0,n.Jb.ri,n.Jb.ei,n.Hm.ci().fw())}))},t.prototype.Ra=function(t,i){if(this.Hm.nt().timeScale.borderVisible){t.save(),t.fillStyle=this.Vp();var n=i.bt,s=Math.max(1,Math.floor(this.Op().I*n));t.fillRect(0,0,Math.ceil(this.Jb.ri*n),s),t.restore()}},t.prototype.Sm=function(t,i){var n=this,s=this.Hm.ci().qt().lr();if(s&&0!==s.length){var h=i.bt,r=s.reduce(Xh,s[0]).jv;r>30&&r<50&&(r=30),t.save(),t.strokeStyle=this.Vp();var e=this.Op(),u=e.I+e.H+e.J+e.U-e.G;t.textAlign="center",t.fillStyle=this.Vp();var o=Math.floor(this.Op().I*h),l=Math.max(1,Math.floor(h)),a=Math.floor(.5*h);if(this.Hm.ci().qt().nt().borderVisible){t.beginPath();for(var f=Math.round(e.H*h),c=s.length;c--;){var v=Math.round(s[c].sr*h);t.rect(v-a,o,l,f)}t.fill()}t.fillStyle=this.rt(),wt(t,i.bt,(function(){t.font=n.Ip();for(var i=0,h=s;i<h.length;i++){if((a=h[i]).jv<r){var e=a.Wd?n.Hp(t,a.sr,a.Vr):a.sr;t.fillText(a.Vr,e,u)}}t.font=n.jp();for(var o=0,l=s;o<l.length;o++){var a;if((a=l[o]).jv>=r){e=a.Wd?n.Hp(t,a.sr,a.Vr):a.sr;t.fillText(a.Vr,e,u)}}})),t.restore()}},t.prototype.Hp=function(t,i,n){var s=this.Qb.O(t,n),h=s/2,r=Math.floor(i-h)+.5;return r<0?i+=Math.abs(0-r):r+s>this.Jb.ri&&(i-=Math.abs(this.Jb.ri-(r+s))),i},t.prototype.Nm=function(t,i,n,s){for(var h=this.Op(),r=0,e=t;r<e.length;r++)for(var u=0,o=e[r].fn();u<o.length;u++){var l=o[u].It();i.save(),s&&l.wt?l.wt(i,h,n):l._t&&l._t(i,h,n),i.restore()}},t.prototype.Vp=function(){return this.Hm.nt().timeScale.borderColor},t.prototype.rt=function(){return this.kn.textColor},t.prototype.st=function(){return this.kn.fontSize},t.prototype.Ip=function(){return st(this.st(),this.kn.fontFamily)},t.prototype.jp=function(){return st(this.st(),this.kn.fontFamily,"bold")},t.prototype.Op=function(){null===this.V&&(this.V={I:1,G:NaN,J:NaN,K:NaN,Hi:NaN,H:3,U:NaN,q:"",j:new rt});var t=this.V,i=this.Ip();if(t.q!==i){var n=this.st();t.U=n,t.q=i,t.J=Math.ceil(n/2.5),t.K=t.J,t.Hi=Math.ceil(n/2),t.G=Math.round(this.st()/5),t.j.R()}return this.V},t.prototype.Am=function(t){this._b.style.cursor=1===t?"ew-resize":"default"},t.prototype.Dp=function(){var t=this.Hm.ci(),i=t.nt();i.leftPriceScale.visible||null===this.Cp||(this.Lp.removeChild(this.Cp.xb()),this.Cp.D(),this.Cp=null),i.rightPriceScale.visible||null===this.Np||(this.Ep.removeChild(this.Np.xb()),this.Np.D(),this.Np=null);var n={rw:this.Hm.ci().rw()},s=function(){return i.leftPriceScale.borderVisible&&t.qt().nt().borderVisible},h=function(){return t.fw()};i.leftPriceScale.visible&&null===this.Cp&&(this.Cp=new Zh("left",i,n,s,h),this.Lp.appendChild(this.Cp.xb())),i.rightPriceScale.visible&&null===this.Np&&(this.Np=new Zh("right",i,n,s,h),this.Ep.appendChild(this.Np.xb()))},t}(),Gh=function(){function t(t,i){var n;this.Up=[],this.qp=[],this.Yp=0,this.jr=0,this.Nu=0,this.$p=0,this.Kp=0,this.Zp=null,this.Xp=!1,this.Fm=new $,this.M_=new $,this.kn=i,this.Ap=document.createElement("div"),this.Ap.classList.add("tv-lightweight-charts"),this.Ap.style.overflow="hidden",this.Ap.style.width="100%",this.Ap.style.height="100%",(n=this.Ap).style.userSelect="none",n.style.webkitUserSelect="none",n.style.msUserSelect="none",n.style.MozUserSelect="none",n.style.webkitTapHighlightColor="transparent",this.Jp=document.createElement("table"),this.Jp.setAttribute("cellspacing","0"),this.Ap.appendChild(this.Jp),this.Gp=this.Qp.bind(this),this.Ap.addEventListener("wheel",this.Gp,{passive:!1}),this.yn=new Mh(this.p_.bind(this),this.kn),this.ci().z_().k(this.tg.bind(this),this),this.ig=new Jh(this),this.Jp.appendChild(this.ig.xb());var s=this.kn.width,h=this.kn.height;if(0===s||0===h){var r=t.getBoundingClientRect();0===s&&(s=Math.floor(r.width),s-=s%2),0===h&&(h=Math.floor(r.height),h-=h%2)}this.ng(s,h),this.sg(),t.appendChild(this.Ap),this.hg(),this.yn.qt().Yd().k(this.yn.Kc.bind(this.yn),this),this.yn.Ru().k(this.yn.Kc.bind(this.yn),this)}return t.prototype.ci=function(){return this.yn},t.prototype.nt=function(){return this.kn},t.prototype.fb=function(){return this.Up},t.prototype.rg=function(){return this.ig},t.prototype.D=function(){this.Ap.removeEventListener("wheel",this.Gp),0!==this.Yp&&window.cancelAnimationFrame(this.Yp),this.yn.z_().A(this),this.yn.qt().Yd().A(this),this.yn.Ru().A(this),this.yn.D();for(var t=0,i=this.Up;t<i.length;t++){var n=i[t];this.Jp.removeChild(n.xb()),n.op().A(this),n.D()}this.Up=[];for(var s=0,h=this.qp;s<h.length;s++){var r=h[s];this.eg(r)}this.qp=[],E(this.ig).D(),null!==this.Ap.parentElement&&this.Ap.parentElement.removeChild(this.Ap),this.M_.D(),this.Fm.D()},t.prototype.ng=function(t,i,n){if(void 0===n&&(n=!1),this.jr!==i||this.Nu!==t){this.jr=i,this.Nu=t;var s=i+"px",h=t+"px";E(this.Ap).style.height=s,E(this.Ap).style.width=h,this.Jp.style.height=s,this.Jp.style.width=h,n?this.ug(new Et(3)):this.yn.Kc()}},t.prototype.km=function(t){void 0===t&&(t=new Et(3));for(var i=0;i<this.Up.length;i++)this.Up[i].km(t.ts(i).Jn);this.kn.timeScale.visible&&this.ig.km(t.Qn())},t.prototype.th=function(t){this.yn.th(t),this.hg();var i=t.width||this.Nu,n=t.height||this.jr;this.ng(i,n)},t.prototype.op=function(){return this.Fm},t.prototype.z_=function(){return this.M_},t.prototype.og=function(){var t=this;null!==this.Zp&&(this.ug(this.Zp),this.Zp=null);var i=this.Up[0],n=xh(document,new gh(this.Nu,this.jr)),s=kh(n),h=yh(n);return wt(s,h,(function(){var n=0,h=0,r=function(i){for(var r=0;r<t.Up.length;r++){var e=t.Up[r],u=e.Cb().ei,o=E("left"===i?e._p():e.Mp()),l=o.Nb();if(s.drawImage(l,n,h,o.ym(),u),h+=u,r<t.Up.length-1){var a=t.qp[r],f=a.Cb(),c=a.Nb();s.drawImage(c,n,h,f.ri,f.ei),h+=f.ei}}};t.lg()&&(r("left"),n=E(i._p()).ym()),h=0;for(var e=0;e<t.Up.length;e++){var u=t.Up[e],o=u.Cb(),l=u.Nb();if(s.drawImage(l,n,h,o.ri,o.ei),h+=o.ei,e<t.Up.length-1){var a=t.qp[e],f=a.Cb(),c=a.Nb();s.drawImage(c,n,h,f.ri,f.ei),h+=f.ei}}n+=i.Cb().ri,t.ag()&&(h=0,r("right"));var v=function(i){var r=E("left"===i?t.ig.Fp():t.ig.Pp()),e=r.Cb(),u=r.Nb();s.drawImage(u,n,h,e.ri,e.ei)};if(t.kn.timeScale.visible){n=0,t.lg()&&(v("left"),n=E(i._p()).ym());var d=t.ig.Cb();l=t.ig.Nb();s.drawImage(l,n,h,d.ri,d.ei),t.ag()&&(n+=i.Cb().ri,v("right"),s.restore())}})),n},t.prototype.fg=function(t){return"none"===t?0:("left"!==t||this.lg())&&("right"!==t||this.ag())?0===this.Up.length?0:E("left"===t?this.Up[0]._p():this.Up[0].Mp()).ym():0},t.prototype.Sb=function(){this.cg()},t.prototype.cg=function(){for(var t,i=0,n=0,s=0,h=!1,r=!1,e=0,u=this.Up;e<u.length;e++){var o=u[e];this.lg()&&(n=Math.max(n,E(o._p()).pm()),h=E(o._p())._m()),this.ag()&&(s=Math.max(s,E(o.Mp()).pm()),r=E(o.Mp())._m()),i+=o.zu()}var l=this.Nu,a=this.jr,f=Math.max(l-(h?0:n)-(r?0:s),0),c=1*this.qp.length,v=this.kn.timeScale.visible,d=this.kn.timeScale.visible?this.ig.zp():0;d%2&&(d+=1);for(var _=c+d,w=a<_?0:a-_,M=w/i,b=0,m=(null===(t=document.body.ownerDocument.defaultView)||void 0===t?void 0:t.devicePixelRatio)||1,p=0;p<this.Up.length;++p){(o=this.Up[p]).Km(this.yn.Qs()[p]);var g,y=0;y=p===this.Up.length-1?Math.ceil((w-b)*m)/m:Math.round(o.zu()*M*m)/m,b+=g=Math.max(y,2),o.gm(new gh(f,g)),this.lg()&&o.ap(n,"left"),this.ag()&&o.ap(s,"right"),o.Xs()&&this.yn.O_(o.Xs(),g)}this.ig.Rp(new gh(v?f:0,d),v&&!h?n:0,v&&!r?s:0),this.yn.Vu(f),this.$p!==n&&(this.$p=n),this.Kp!==s&&(this.Kp=s)},t.prototype.Qp=function(t){var i=t.deltaX/100,n=-t.deltaY/100;if(0!==i&&this.kn.handleScroll.mouseWheel||0!==n&&this.kn.handleScale.mouseWheel){switch(t.cancelable&&t.preventDefault(),t.deltaMode){case t.DOM_DELTA_PAGE:i*=120,n*=120;break;case t.DOM_DELTA_LINE:i*=32,n*=32}if(0!==n&&this.kn.handleScale.mouseWheel){var s=Math.sign(n)*Math.min(1,Math.abs(n)),h=t.clientX-this.Ap.getBoundingClientRect().left;this.ci().Y_(h,s)}0!==i&&this.kn.handleScroll.mouseWheel&&this.ci().K_(-80*i)}},t.prototype.ug=function(t){var i,n=t.Qn();3===n&&this.vg(),3!==n&&2!==n||(this.dg(t),this._g(t),this.ig.Ot(),this.Up.forEach((function(t){t.Xm()})),3===(null===(i=this.Zp)||void 0===i?void 0:i.Qn())&&(this.Zp.ls(t),this.vg(),this.dg(this.Zp),this._g(this.Zp),t=this.Zp,this.Zp=null)),this.km(t)},t.prototype._g=function(t){for(var i=0,n=t.os();i<n.length;i++){var s=n[i];this.fs(s)}},t.prototype.dg=function(t){for(var i=this.yn.Qs(),n=0;n<i.length;n++)t.ts(n).Gn&&i[n].ro()},t.prototype.fs=function(t){var i=this.yn.qt();switch(t.ss){case 0:i.Kd();break;case 1:i.Zd(t.Gt);break;case 2:i.es(t.Gt);break;case 3:i.us(t.Gt);break;case 4:i.Rd()}},t.prototype.p_=function(t){var i=this;null!==this.Zp?this.Zp.ls(t):this.Zp=t,this.Xp||(this.Xp=!0,this.Yp=window.requestAnimationFrame((function(){if(i.Xp=!1,i.Yp=0,null!==i.Zp){var t=i.Zp;i.Zp=null,i.ug(t)}})))},t.prototype.vg=function(){this.sg()},t.prototype.eg=function(t){this.Jp.removeChild(t.xb()),t.D()},t.prototype.sg=function(){for(var t=this.yn.Qs(),i=t.length,n=this.Up.length,s=i;s<n;s++){var h=L(this.Up.pop());this.Jp.removeChild(h.xb()),h.op().A(this),h.D(),void 0!==(r=this.qp.pop())&&this.eg(r)}for(s=n;s<i;s++){if((h=new Kh(this,t[s])).op().k(this.wg.bind(this),this),this.Up.push(h),s>0){var r=new Wh(this,s-1,s,!1);this.qp.push(r),this.Jp.insertBefore(r.xb(),this.ig.xb())}this.Jp.insertBefore(h.xb(),this.ig.xb())}for(s=0;s<i;s++){var e=t[s];(h=this.Up[s]).Xs()!==e?h.Km(e):h.$m()}this.hg(),this.cg()},t.prototype.Mg=function(t,i){var n,s=new Map;null!==t&&this.yn.Vt().forEach((function(i){var n=i.Kf(t);null!==n&&s.set(i,n)}));if(null!==t){var r=this.yn.qt().Tn(t);null!==r&&(n=r)}var e=this.ci().E_(),u=null!==e&&e.D_ instanceof qs?e.D_:void 0,o=null!==e&&void 0!==e.bg?e.bg.$f:void 0;return{Bt:n,mg:i&&new h(i.x,i.y)||void 0,iw:null==i?void 0:i.iw,pg:u,gg:s,yg:o}},t.prototype.wg=function(t,i){var n=this;this.Fm.L((function(){return n.Mg(t,i)}))},t.prototype.tg=function(t,i){var n=this;this.M_.L((function(){return n.Mg(t,i)}))},t.prototype.hg=function(){var t=this.kn.timeScale.visible?"":"none";this.ig.xb().style.display=t},t.prototype.lg=function(){return this.Up[0].Xs().Ku().nt().visible},t.prototype.ag=function(){return this.Up[0].Xs().Gs().nt().visible},t}();function Qh(t,i,n){var s=n.value;return{oa:i,Bt:t,Gt:[s,s,s,s]}}function tr(t,i,n){var s=n.value,h={oa:i,Bt:t,Gt:[s,s,s,s]};return"color"in n&&void 0!==n.color&&(h.$=n.color),h}function ir(t){return void 0!==t.Gt}function nr(t){return function(i,n,s){return void 0===(h=s).lowerValue&&void 0===h.open&&void 0===h.value?{Bt:i,oa:n}:t(i,n,s);var h}}var sr={Candlestick:nr((function(t,i,n){var s={oa:i,Bt:t,Gt:[n.open,n.high,n.low,n.close]};return"color"in n&&void 0!==n.color&&(s.$=n.color),"borderColor"in n&&void 0!==n.borderColor&&(s.Qt=n.borderColor),"wickColor"in n&&void 0!==n.wickColor&&(s.Va=n.wickColor),s})),Bar:nr((function(t,i,n){var s={oa:i,Bt:t,Gt:[n.open,n.high,n.low,n.close]};return"color"in n&&void 0!==n.color&&(s.$=n.color),s})),Area:nr(Qh),Baseline:nr(Qh),CloudArea:nr((function(t,i,n){return{oa:i,Bt:t,Gt:[n.higherValue,n.higherValue,n.lowerValue,n.lowerValue]}})),BrokenArea:nr((function(t,i,n){var s={oa:i,Bt:t,Gt:[n.higherValue,n.higherValue,n.lowerValue,n.lowerValue]};return void 0!==n.color&&(s.$=n.color),void 0!==n.label&&(s.Vr=n.label),void 0!==n.extendRight&&(s.Aa=n.extendRight),void 0!==n.id&&(s.en=n.id),s})),Histogram:nr(tr),Line:nr(tr)};function hr(t){return sr[t]}function rr(t){return 60*t*60*1e3}function er(t){return 60*t*1e3}var ur,or=[{kg:(ur=1,1e3*ur),jv:10},{kg:er(1),jv:20},{kg:er(5),jv:21},{kg:er(30),jv:22},{kg:rr(1),jv:30},{kg:rr(3),jv:31},{kg:rr(6),jv:32},{kg:rr(12),jv:33}];function lr(t,i){if(t.getUTCFullYear()!==i.getUTCFullYear())return 70;if(t.getUTCMonth()!==i.getUTCMonth())return 60;if(t.getUTCDate()!==i.getUTCDate())return 50;for(var n=or.length-1;n>=0;--n)if(Math.floor(i.getTime()/or[n].kg)!==Math.floor(t.getTime()/or[n].kg))return or[n].jv;return 0}function ar(t,i){if(void 0===i&&(i=0),0!==t.length){for(var n=0===i?null:t[i-1].Bt.Ji,s=null!==n?new Date(1e3*n):null,h=0,r=i;r<t.length;++r){var e=t[r],u=new Date(1e3*e.Bt.Ji);null!==s&&(e.Hv=lr(u,s)),h+=e.Bt.Ji-(n||e.Bt.Ji),n=e.Bt.Ji,s=u}if(0===i&&t.length>1){var o=Math.ceil(h/(t.length-1)),l=new Date(1e3*(t[0].Bt.Ji-o));t[0].Hv=lr(new Date(1e3*t[0].Bt.Ji),l)}}}function fr(t){if(!mh(t))throw new Error("time must be of type BusinessDay");var i=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{Ji:Math.round(i.getTime()/1e3),Dv:t}}function cr(t){if(!ph(t))throw new Error("time must be of type isUTCTimestamp");return{Ji:t}}function vr(t){return 0===t.length?null:mh(t[0].time)?fr:cr}function dr(t){return ph(t)?cr(t):mh(t)?fr(t):fr(_r(t))}function _r(t){var i=new Date(t);if(isNaN(i.getTime()))throw new Error("Invalid date string=".concat(t,", expected format=yyyy-mm-dd"));return{day:i.getUTCDate(),month:i.getUTCMonth()+1,year:i.getUTCFullYear()}}function wr(t){J(t.time)&&(t.time=_r(t.time))}function Mr(t){return{oa:0,xg:new Map,Ke:t}}function br(t){if(void 0!==t&&0!==t.length)return{Cg:t[0].Bt.Ji,Ng:t[t.length-1].Bt.Ji}}var mr=function(){function t(){this.Sg=new Map,this.Tg=new Map,this.Ag=new Map,this.Lg=[]}return t.prototype.D=function(){this.Sg.clear(),this.Tg.clear(),this.Ag.clear(),this.Lg=[]},t.prototype.Eg=function(t,i){var n=this,s=0!==this.Sg.size,h=!1,r=this.Tg.get(t);if(void 0!==r)if(1===this.Tg.size)s=!1,h=!0,this.Sg.clear();else for(var e=0,u=this.Lg;e<u.length;e++){u[e].pointData.xg.delete(t)&&(h=!0)}var o=[];if(0!==i.length){!function(t){t.forEach(wr)}(i);var l=E(vr(i)),a=hr(t.fo());o=i.map((function(i){var s=l(i.time),r=n.Sg.get(s.Ji);void 0===r&&(r=Mr(s),n.Sg.set(s.Ji,r),h=!0);var e=a(s,r.oa,i);return r.xg.set(t,e),e}))}s&&this.Bg(),this.Dg(t,o);var f=-1;if(h){var c=[];this.Sg.forEach((function(t){c.push({Hv:0,Bt:t.Ke,pointData:t})})),c.sort((function(t,i){return t.Bt.Ji-i.Bt.Ji})),f=this.Fg(c)}return this.Pg(t,f,function(t,i){var n=br(t),s=br(i);if(void 0!==n&&void 0!==s)return{Gc:n.Ng>=s.Ng&&n.Cg>=s.Cg}}(this.Tg.get(t),r))},t.prototype.H_=function(t){return this.Eg(t,[])},t.prototype.Wg=function(t,i){wr(i);var n=E(vr([i]))(i.time),s=this.Ag.get(t);if(void 0!==s&&n.Ji<s.Ji)throw new Error("Cannot update oldest data, last time=".concat(s.Ji,", new time=").concat(n.Ji));var h=this.Sg.get(n.Ji),r=void 0===h;void 0===h&&(h=Mr(n),this.Sg.set(n.Ji,h));var e=hr(t.fo())(n,h.oa,i);h.xg.set(t,e),this.Rg(t,e);var u={Gc:ir(e)};if(!r)return this.Pg(t,-1,u);var o={Hv:0,Bt:h.Ke,pointData:h},l=jn(this.Lg,o.Bt.Ji,(function(t,i){return t.Bt.Ji<i}));this.Lg.splice(l,0,o);for(var a=l;a<this.Lg.length;++a)pr(this.Lg[a].pointData,a);return ar(this.Lg,l),this.Pg(t,l,u)},t.prototype.Rg=function(t,i){var n=this.Tg.get(t);void 0===n&&(n=[],this.Tg.set(t,n));var s=0!==n.length?n[n.length-1]:null;null===s||i.Bt.Ji>s.Bt.Ji?ir(i)&&n.push(i):ir(i)?n[n.length-1]=i:n.splice(-1,1),this.Ag.set(t,i.Bt)},t.prototype.Dg=function(t,i){0!==i.length?(this.Tg.set(t,i.filter(ir)),this.Ag.set(t,i[i.length-1].Bt)):(this.Tg.delete(t),this.Ag.delete(t))},t.prototype.Bg=function(){for(var t=0,i=this.Lg;t<i.length;t++){var n=i[t];0===n.pointData.xg.size&&this.Sg.delete(n.Bt.Ji)}},t.prototype.Fg=function(t){for(var i=-1,n=0;n<this.Lg.length&&n<t.length;++n){var s=this.Lg[n],h=t[n];if(s.Bt.Ji!==h.Bt.Ji){i=n;break}h.Hv=s.Hv,pr(h.pointData,n)}if(-1===i&&this.Lg.length!==t.length&&(i=Math.min(this.Lg.length,t.length)),-1===i)return-1;for(n=i;n<t.length;++n)pr(t[n].pointData,n);return ar(t,i),this.Lg=t,i},t.prototype.zg=function(){if(0===this.Tg.size)return null;var t=0;return this.Tg.forEach((function(i){0!==i.length&&(t=Math.max(t,i[i.length-1].oa))})),t},t.prototype.Pg=function(t,i,n){var s={Og:new Map,qt:{Td:this.zg()}};if(-1!==i)this.Tg.forEach((function(i,h){s.Og.set(h,{dh:i,Vg:h===t?n:void 0})})),this.Tg.has(t)||s.Og.set(t,{dh:[],Vg:n}),s.qt.Is=this.Lg,s.qt.Ig=i;else{var h=this.Tg.get(t);s.Og.set(t,{dh:h||[],Vg:n})}return s},t}();function pr(t,i){t.oa=i,t.xg.forEach((function(t){t.oa=i}))}var gr={color:"#FF0000",price:0,visible:!0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:""},yr=function(){function t(t){this.nc=t}return t.prototype.applyOptions=function(t){this.nc.th(t)},t.prototype.options=function(){return this.nc.nt()},t.prototype.Hg=function(){return this.nc},t}();function kr(t){var i=t.overlay,n=function(t,i){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&i.indexOf(s)<0&&(n[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var h=0;for(s=Object.getOwnPropertySymbols(t);h<s.length;h++)i.indexOf(s[h])<0&&Object.prototype.propertyIsEnumerable.call(t,s[h])&&(n[s[h]]=t[s[h]])}return n}(t,["overlay"]);return i&&(n.priceScaleId=""),n}var xr=function(){function t(t,i,n){this.Kl=t,this.jg=i,this.Ug=n}return t.prototype.priceFormatter=function(){return this.Kl.su()},t.prototype.priceToCoordinate=function(t){var i=this.Kl.Kt();return null===i?null:this.Kl.Jt().Xt(t,i.Gt)},t.prototype.coordinateToPrice=function(t){var i=this.Kl.Kt();return null===i?null:this.Kl.Jt().Sn(t,i.Gt)},t.prototype.barsInLogicalRange=function(t){if(null===t)return null;var i=new rh(new th(t.from,t.to)).Kv(),n=this.Kl.Yn();if(n.dt())return null;var s=n.Nc(i.vu(),1),h=n.Nc(i.du(),-1),r=E(n.kc()),e=E(n.qn());if(null!==s&&null!==h&&s.oa>h.oa)return{barsBefore:t.from-r,barsAfter:e-t.to};var u={barsBefore:null===s||s.oa===r?t.from-r:s.oa-r,barsAfter:null===h||h.oa===e?e-t.to:e-h.oa};return null!==s&&null!==h&&(u.from=s.Bt.Dv||s.Bt.Ji,u.to=h.Bt.Dv||h.Bt.Ji),u},t.prototype.setData=function(t){this.Kl.fo(),this.jg.qg(this.Kl,t)},t.prototype.update=function(t){this.Kl.fo(),this.jg.vo(this.Kl,t)},t.prototype.setMarkers=function(t){var i=t.map((function(t){return q(q({},t),{time:dr(t.time)})}));this.Kl.tv(i)},t.prototype.applyOptions=function(t){var i=kr(t);this.Kl.th(i)},t.prototype.options=function(){return Q(this.Kl.nt())},t.prototype.priceScale=function(){return this.Ug.priceScale(this.Kl.Jt().en())},t.prototype.createPriceLine=function(t){var i=K(Q(gr),t),n=this.Kl.iv(i);return new yr(n)},t.prototype.removePriceLine=function(t){this.Kl.nv(t.Hg())},t.prototype.removeAllPriceLines=function(){this.Kl.hv()},t.prototype.getPriceLine=function(t,i){var n=this.Kl.sv(t,i);if(n)return new yr(n)},t.prototype.seriesType=function(){return this.Kl.fo()},t.prototype.setExtensionsBoundaries=function(t){return this.Kl.Ba(t)},t}(),Cr=function(t){function i(){return null!==t&&t.apply(this,arguments)||this}return U(i,t),i.prototype.applyOptions=function(i){bh(i),t.prototype.applyOptions.call(this,i)},i}(xr),Nr=function(){function t(t){this.Yg=t}return t.prototype.setPoints=function(t){throw new Error("Method not implemented.")},t.prototype.applyOptions=function(t){this.Yg.th(t)},t.prototype.options=function(){return Q(this.Yg.nt())},t.prototype.toolType=function(){return this.Yg.uh()},t}(),Sr={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,floating:!1,drawTicks:!1,scaleMargins:{bottom:.1,top:.2}},Tr={color:"rgba(0, 0, 0, 0)",visible:!1,fontSize:48,fontFamily:nt,fontStyle:"",text:"",horzAlign:"center",vertAlign:"center"},Ar={width:0,height:0,layout:{background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:11,fontFamily:nt},crosshair:{vertLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},horzLine:{color:"#758696",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#4c525e"},magnetThreshold:14},grid:{vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},overlayPriceScales:q({},Sr),leftPriceScale:q(q({},Sr),{visible:!1}),rightPriceScale:q(q({},Sr),{visible:!0}),nonPrimaryPriceScale:q(q({},Sr),{visible:!0}),timeScale:{rightOffset:0,barSpacing:6,minBarSpacing:.5,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",mode:0,visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0},watermark:Tr,localization:{locale:Nh?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:!0,mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}},Lr={upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Er={upColor:"#26a69a",downColor:"#ef5350",openVisible:!0,thinBars:!0},Br={color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Dr={topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Fr={positiveColor:"rgba( 76, 175, 80, 0.1)",negativeColor:"rgba( 255, 82, 82, 0.1)",higherLineColor:"#4CAF50",higherLineStyle:0,higherLineWidth:3,higherLineType:0,lowerLineColor:"#FF5252",lowerLineStyle:0,lowerLineWidth:3,lowerLineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:""},Pr={baseValue:{type:"price",price:0},topFillColor1:"rgba(38, 166, 154, 0.28)",topFillColor2:"rgba(38, 166, 154, 0.05)",topLineColor:"rgba(38, 166, 154, 1)",bottomFillColor1:"rgba(239, 83, 80, 0.05)",bottomFillColor2:"rgba(239, 83, 80, 0.28)",bottomLineColor:"rgba(239, 83, 80, 1)",lineWidth:3,lineStyle:0,lineType:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBackgroundColor:"",lastPriceAnimation:0},Wr={color:"#26a69a",base:0},Rr={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:1,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}},zr=function(){function t(t,i){this.lb=t,this.$g=i}return t.prototype.applyOptions=function(t){this.lb.ci().F_(this.$g,t)},t.prototype.options=function(){return this.Oi().nt()},t.prototype.width=function(){return Lt(this.$g)?this.lb.fg("left"===this.$g?"left":"right"):0},t.prototype.Oi=function(){return E(this.lb.ci().P_(this.$g)).Jt},t}(),Or=function(){function t(t,i){this.Kg=new $,this.ed=new $,this.Tp=new $,this.yn=t,this.Au=t.qt(),this.ig=i,this.Au.Ud().k(this.Zg.bind(this)),this.Au.qd().k(this.Xg.bind(this)),this.ig.Wp().k(this.Jg.bind(this))}return t.prototype.D=function(){this.Au.Ud().A(this),this.Au.qd().A(this),this.ig.Wp().A(this),this.Kg.D(),this.ed.D(),this.Tp.D()},t.prototype.scrollPosition=function(){return this.Au.Dd()},t.prototype.scrollToPosition=function(t,i){i?this.Au.jd(t,1e3):this.yn.us(t)},t.prototype.scrollToRealTime=function(){this.Au.Hd()},t.prototype.getVisibleRange=function(){var t,i,n=this.Au.Jo();return null===n?null:{from:null!==(t=n.from.Dv)&&void 0!==t?t:n.from.Ji,to:null!==(i=n.to.Dv)&&void 0!==i?i:n.to.Ji}},t.prototype.setVisibleRange=function(t){var i={from:dr(t.from),to:dr(t.to)},n=this.Au.Cd(i);this.yn.lw(n)},t.prototype.getVisibleLogicalRange=function(){var t=this.Au.gd();return null===t?null:{from:t.vu(),to:t.du()}},t.prototype.setVisibleLogicalRange=function(t){A(t.from<=t.to,"The from index cannot be after the to index."),this.yn.lw(t)},t.prototype.resetTimeScale=function(){this.yn.rs()},t.prototype.fitContent=function(){this.yn.Kd()},t.prototype.logicalToCoordinate=function(t){var i=this.yn.qt();return i.dt()?null:i.ii(t)},t.prototype.coordinateToLogical=function(t){return this.Au.dt()?null:this.Au.Ad(t)},t.prototype.timeToCoordinate=function(t){var i=dr(t),n=this.Au.vv(i,!1);return null===n?null:this.Au.ii(n)},t.prototype.coordinateToTime=function(t){var i,n=this.yn.qt(),s=n.Ad(t),h=n.Tn(s);return null===h?null:null!==(i=h.Dv)&&void 0!==i?i:h.Ji},t.prototype.width=function(){return this.ig.Cb().ri},t.prototype.height=function(){return this.ig.Cb().ei},t.prototype.subscribeVisibleTimeRangeChange=function(t){this.Kg.k(t)},t.prototype.unsubscribeVisibleTimeRangeChange=function(t){this.Kg.T(t)},t.prototype.subscribeVisibleLogicalRangeChange=function(t){this.ed.k(t)},t.prototype.unsubscribeVisibleLogicalRangeChange=function(t){this.ed.T(t)},t.prototype.subscribeSizeChange=function(t){this.Tp.k(t)},t.prototype.unsubscribeSizeChange=function(t){this.Tp.T(t)},t.prototype.applyOptions=function(t){this.Au.th(t)},t.prototype.options=function(){return Q(this.Au.nt())},t.prototype.Zg=function(){this.Kg.B()&&this.Kg.L(this.getVisibleRange())},t.prototype.Xg=function(){this.ed.B()&&this.ed.L(this.getVisibleLogicalRange())},t.prototype.Jg=function(t){this.Tp.L(t.ri,t.ei)},t}();function Vr(t){if(void 0!==t&&"custom"!==t.type){var i=t;void 0!==i.minMove&&void 0===i.precision&&(i.precision=function(t){if(t>=1)return 0;for(var i=0;i<8;i++){var n=Math.round(t);if(Math.abs(n-t)<1e-8)return i;t*=10}return i}(i.minMove))}}function Ir(t){return function(t){if(G(t.handleScale)){var i=t.handleScale;t.handleScale={axisDoubleClickReset:i,axisPressedMouseMove:{time:i,price:i},mouseWheel:i,pinch:i}}else if(void 0!==t.handleScale&&G(t.handleScale.axisPressedMouseMove)){var n=t.handleScale.axisPressedMouseMove;t.handleScale.axisPressedMouseMove={time:n,price:n}}var s=t.handleScroll;G(s)&&(t.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),function(t){if(t.priceScale){t.leftPriceScale=t.leftPriceScale||{},t.rightPriceScale=t.rightPriceScale||{};var i=t.priceScale.position;delete t.priceScale.position,t.leftPriceScale=K(t.leftPriceScale,t.priceScale),t.rightPriceScale=K(t.rightPriceScale,t.priceScale),"left"===i&&(t.leftPriceScale.visible=!0,t.rightPriceScale.visible=!1),"right"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!0),"none"===i&&(t.leftPriceScale.visible=!1,t.rightPriceScale.visible=!1),t.overlayPriceScales=t.overlayPriceScales||{},void 0!==t.priceScale.invertScale&&(t.overlayPriceScales.invertScale=t.priceScale.invertScale),void 0!==t.priceScale.scaleMargins&&(t.overlayPriceScales.scaleMargins=t.priceScale.scaleMargins)}}(t),function(t){t.layout&&t.layout.backgroundColor&&!t.layout.background&&(t.layout.background={type:"solid",color:t.layout.backgroundColor})}(t),t}var Hr=function(){function t(t,i){var n=this;this.Gg=new mr,this.Qg=new Map,this.ty=new Map,this.iy=new $,this.ny=new $;var s=void 0===i?Q(Ar):K(Q(Ar),Ir(i));this.lb=new Gh(t,s),this.lb.op().k((function(t){n.iy.B()&&n.iy.L(n.sy(t()))}),this),this.lb.z_().k((function(t){n.ny.B()&&n.ny.L(n.sy(t()))}),this);var h=this.lb.ci();this.hy=new Or(h,this.lb.rg())}return t.prototype.remove=function(){this.lb.op().A(this),this.lb.z_().A(this),this.hy.D(),this.lb.D(),this.Qg.clear(),this.ty.clear(),this.iy.D(),this.ny.D(),this.Gg.D()},t.prototype.resize=function(t,i,n){this.lb.ng(t,i,n)},t.prototype.addAreaSeries=function(t){void 0===t&&(t={}),Vr((t=kr(t)).priceFormat);var i=K(Q(Rr),Dr,t),n=this.lb.ci().ew("Area",i),s=new xr(n,this,this);return this.Qg.set(s,n),this.ty.set(n,s),s},t.prototype.addBaselineSeries=function(t){void 0===t&&(t={}),Vr((t=kr(t)).priceFormat);var i=K(Q(Rr),Q(Pr),t),n=this.lb.ci().ew("Baseline",i),s=new xr(n,this,this);return this.Qg.set(s,n),this.ty.set(n,s),s},t.prototype.addCloudAreaSeries=function(t){void 0===t&&(t={}),Vr((t=kr(t)).priceFormat);var i=K(Q(Rr),Fr,t),n=this.lb.ci().ew("CloudArea",i),s=new xr(n,this,this);return this.Qg.set(s,n),this.ty.set(n,s),s},t.prototype.addBrokenAreaSeries=function(t){void 0===t&&(t={}),t=kr(t);var i=K(Q(Rr),t),n=this.lb.ci().ew("BrokenArea",i),s=new xr(n,this,this);return this.Qg.set(s,n),this.ty.set(n,s),s},t.prototype.addBarSeries=function(t){void 0===t&&(t={}),Vr((t=kr(t)).priceFormat);var i=K(Q(Rr),Er,t),n=this.lb.ci().ew("Bar",i),s=new xr(n,this,this);return this.Qg.set(s,n),this.ty.set(n,s),s},t.prototype.addCandlestickSeries=function(t){void 0===t&&(t={}),bh(t=kr(t)),Vr(t.priceFormat);var i=K(Q(Rr),Lr,t),n=this.lb.ci().ew("Candlestick",i),s=new Cr(n,this,this);return this.Qg.set(s,n),this.ty.set(n,s),s},t.prototype.addHistogramSeries=function(t){void 0===t&&(t={}),Vr((t=kr(t)).priceFormat);var i=K(Q(Rr),Wr,t),n=this.lb.ci().ew("Histogram",i),s=new xr(n,this,this);return this.Qg.set(s,n),this.ty.set(n,s),s},t.prototype.addLineSeries=function(t){void 0===t&&(t={}),Vr((t=kr(t)).priceFormat);var i=K(Q(Rr),Br,t),n=this.lb.ci().ew("Line",i),s=new xr(n,this,this);return this.Qg.set(s,n),this.ty.set(n,s),s},t.prototype.removeSeries=function(t){var i=L(this.Qg.get(t)),n=this.Gg.H_(i);this.lb.ci().H_(i),this.ey(n),this.Qg.delete(t),this.ty.delete(i)},t.prototype.addLineTool=function(t,i,n){var s=K(Q(It[t]),n||{}),h=this.lb.ci().ow(t,s,i);return new Nr(h)},t.prototype.setActiveLineTool=function(t,i){this.lb.ci().R_().Ll(t,i)},t.prototype.qg=function(t,i){this.ey(this.Gg.Eg(t,i))},t.prototype.vo=function(t,i){this.ey(this.Gg.Wg(t,i))},t.prototype.subscribeClick=function(t){this.iy.k(t)},t.prototype.unsubscribeClick=function(t){this.iy.T(t)},t.prototype.subscribeCrosshairMove=function(t){this.ny.k(t)},t.prototype.unsubscribeCrosshairMove=function(t){this.ny.T(t)},t.prototype.clearCrosshairPosition=function(){this.lb.ci().sw()},t.prototype.priceScale=function(t){return void 0===t&&(t=this.lb.ci().Bl()),new zr(this.lb,t)},t.prototype.timeScale=function(){return this.hy},t.prototype.applyOptions=function(t){this.lb.th(Ir(t))},t.prototype.options=function(){return this.lb.nt()},t.prototype.takeScreenshot=function(){return this.lb.og()},t.prototype.fullUpdate=function(){return this.lb.ci().Kc()},t.prototype.removePane=function(t){this.lb.ci().I_(t)},t.prototype.swapPane=function(t,i){this.lb.ci().j_(t,i)},t.prototype.getPaneElements=function(){return this.lb.fb().map((function(t){return t.wp()}))},t.prototype.ey=function(t){var i=this.lb.ci();i.hw(t.qt.Td,t.qt.Is,t.qt.Ig),t.Og.forEach((function(t,i){return i.xt(t.dh,t.Vg)})),i.Ed()},t.prototype.uy=function(t){return L(this.ty.get(t))},t.prototype.sy=function(t){var i=this,n=new Map;t.gg.forEach((function(t,s){n.set(i.uy(s),t)}));var s=void 0===t.pg?void 0:this.uy(t.pg);return{time:t.Bt&&(t.Bt.Dv||t.Bt.Ji),point:t.mg,paneIndex:t.iw,hoveredSeries:s,hoveredMarkerId:t.yg,seriesPrices:n}},t}();function jr(t,i){var n;if(J(t)){var s=document.getElementById(t);A(null!==s,"Cannot find element in DOM with id=".concat(t)),n=s}else n=t;return new Hr(n,i)}function Ur(){return"3.8.0-dev+202211041707"}export{dh as BoxHorizontalAlignment,vh as BoxVerticalAlignment,wh as ColorType,St as CrosshairMode,fh as LasPriceAnimationMode,fh as LastPriceAnimationMode,n as LineEnd,s as LineStyle,i as LineType,ch as PriceLineSource,Vi as PriceScaleMode,_h as TextAlignment,nh as TickMarkType,sh as TimeScaleMode,uh as TrackingModeExitMode,jr as createChart,mh as isBusinessDay,ph as isUTCTimestamp,Ur as version};
